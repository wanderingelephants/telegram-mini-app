function xirr(cashflows, dates, guess) {
    console.log("cashflows", cashflows.length)
    if (cashflows.length !== dates.length) {
      throw new Error('Cashflows and dates arrays must have the same length.');
    }
  
    guess = guess || 0.1; // Default guess of 10%
  
    let x = guess;
    let maxIterations = 100;
    let tolerance = 0.00001;
  
    for (let i = 0; i < maxIterations; i++) {
      let npv = 0;
      let dNpv = 0;
  
      for (let j = 0; j < cashflows.length; j++) {
        let days = (dates[j] - dates[0]);// / (1000 * 60 * 60 * 24); // Calculate days between dates
        let factor = Math.pow(1 + x, days / 365);
        npv += cashflows[j] / factor;
        dNpv -= cashflows[j] * days / 365 / factor / (1 + x);
      }
      if (Math.abs(npv) < tolerance) {
        return x;
      }
  
      x -= npv / dNpv;
    }
  
    throw new Error('XIRR calculation did not converge.');
  }

  const cashflows = [768595415.6,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000,-100000]
  const dates = [45562,45447,45308,44953,44951,44827,44725,44693,44627,44616,44606,44550,44547,44526,44497,44316,44298,44291,44279,44253,44223,44218,44186,44154,44119,44098,44095,44074,44046,44039,44026,44006,43997,43993,43986,43973,43969,43965,43955,43945,43942,43924,43922,43920,43913,43908,43907,43906,43902,43899,43896,43889,43862,43836,43748,43738,43725,43654,43364,43133,42695,42545,42465,42423,42411,42384,42373,42269,42251,42248,42240,42228,42157,42136,42130,42089,42072,42034,42010,41989,41907,41831,41669,41666,41562,41547,41540,41537,41520,41513,41505,41502,41492,41479,41471,41445,41425,41417,41333,41078,41074,41037,41033,40990,40983,40973,40966,40961,40938,40896,40893,40889,40885,40868,40858,40856,40820,40819,40808,40798,40773,40686,40666,40598,40557,40556,40553,40527,40521,40519,40506,40494,40330,40323,40317,40305,40214,40205,40162,40143,40129,40113,40042,40032,40002,40000,39981,39972,39959,39954,39941,39939,39931,39924,39919,39902,39881,39877,39874,39864,39861,39860,39846,39836,39834,39833,39828,39825,39820,39808,39805,39783,39777,39776,39772,39771,39770,39769,39764,39763,39758,39748,39745,39744,39743,39738,39736,39731,39729,39727,39724,39720,39717,39714,39708,39706,39696,39681,39674,39672,39658,39654,39644,39632,39630,39629,39626,39622,39619,39618,39617,39608,39603,39601,39597,39595,39594,39590,39577,39576,39548,39542,39538,39524,39520,39514,39511,39510,39500,39498,39489,39476,39469,39468,39465,39433,39407,39373,39372,39367,39363,39315,39310,39304,39295,39290,39239,39174,39155,39146,39143,39141,39136,39135,39127,39105,39092,39063,39062,38971,38915,38894,38881,38880,38876,38875,38873,38868,38859,38856,38855,38852,38814,38749,38712,38701,38652,38639,38631,38617,38572]
  const irr = xirr(cashflows, dates, 0.20)
  console.log(irr)