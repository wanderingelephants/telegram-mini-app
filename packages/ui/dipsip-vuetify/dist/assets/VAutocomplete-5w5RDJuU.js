import{au as Ye,av as lt,ao as ze,E as ve,aw as nt,d as Le,r as Ue,ax as ot,ay as we,az as st,aA as fe,aB as it,aC as ut,M as rt,W as dt,aD as Pe,_ as ct,A as U,C as q,ai as re,p as ce,z as N,x as de,y as ee,Z as De,o as Ce,Y as Ee,i as Fe,j as ke,m as ft,a as vt,b as mt,c as gt,u as pt,e as ht,f as yt,g as _t,V as Ie,h as bt,k as kt,l as Vt,n as xt,q as St}from"./index-B2EZGdCX.js";import{T as wt,p as oe,J as Be,m as Ct,b as Ft,g as se,W as qe,d as Rt,B as ne,z as Tt,ax as Ot,E as At,f as ie,a0 as Re,h as Pt,s as Dt,l as Et,o as It,Q as Bt,O as Mt,av as $t,aG as Wt,aw as Yt,$ as Me,G as zt}from"./vuetify-BbdkIOBN.js";import{c as T,s as ae,m as a,F as Y,n as W,Q as b,d as le,f as Lt,E as G,N as z,S as te,P as n,R as v,V as _,U as pe,O as he,_ as Ut,w as ye,A as $e}from"./vue-BQEgaIvT.js";import{V as qt}from"./VDialog-FSAZchas.js";const _e=wt("v-spacer","div","VSpacer"),Nt=oe({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:Be,default:"$ratingEmpty"},fullIcon:{type:Be,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Ct(),...Ye(),...lt(),...ze(),...Ft()},"VRating"),We=se()({name:"VRating",props:Nt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const{t:i}=qe(),{themeClasses:g}=Rt(e),d=ne(e,"modelValue"),l=T(()=>Tt(parseFloat(d.value),0,+e.length)),x=T(()=>Ot(Number(e.length),1)),D=T(()=>x.value.flatMap(m=>e.halfIncrements?[m-.5,m]:[m])),u=ae(-1),k=T(()=>D.value.map(m=>{const w=e.hover&&u.value>-1,C=l.value>=m,V=u.value>=m,p=(w?V:C)?e.fullIcon:e.emptyIcon,c=e.activeColor??e.color,L=C||V?c:e.color;return{isFilled:C,isHovered:V,icon:p,color:L}})),y=T(()=>[0,...D.value].map(m=>{function w(){u.value=m}function C(){u.value=-1}function V(){e.disabled||e.readonly||(d.value=l.value===m&&e.clearable?0:m)}return{onMouseenter:e.hover?w:void 0,onMouseleave:e.hover?C:void 0,onClick:V}})),r=T(()=>e.name??`v-rating-${At()}`);function S(m){var H,Q;let{value:w,index:C,showStar:V=!0}=m;const{onMouseenter:I,onMouseleave:p,onClick:c}=y.value[C+1],L=`${r.value}-${String(w).replace(".","-")}`,B={color:(H=k.value[C])==null?void 0:H.color,density:e.density,disabled:e.disabled,icon:(Q=k.value[C])==null?void 0:Q.icon,ripple:e.ripple,size:e.size,variant:"plain"};return a(Y,null,[a("label",{for:L,class:{"v-rating__item--half":e.halfIncrements&&w%1>0,"v-rating__item--full":e.halfIncrements&&w%1===0},onMouseenter:I,onMouseleave:p,onClick:c},[a("span",{class:"v-rating__hidden"},[i(e.itemAriaLabel,w,e.length)]),V?o.item?o.item({...k.value[C],props:B,value:w,index:C,rating:l.value}):a(ve,W({"aria-label":i(e.itemAriaLabel,w,e.length)},B),null):void 0]),a("input",{class:"v-rating__hidden",name:r.value,id:L,type:"radio",value:w,checked:l.value===w,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function E(m){return o["item-label"]?o["item-label"](m):m.label?a("span",null,[m.label]):a("span",null,[b(" ")])}return ie(()=>{var w;const m=!!((w=e.itemLabels)!=null&&w.length)||o["item-label"];return a(e.tag,{class:["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},g.value,e.class],style:e.style},{default:()=>[a(S,{value:0,index:-1,showStar:!1},null),x.value.map((C,V)=>{var I,p;return a("div",{class:"v-rating__wrapper"},[m&&e.itemLabelPosition==="top"?E({value:C,index:V,label:(I=e.itemLabels)==null?void 0:I[V]}):void 0,a("div",{class:"v-rating__item"},[e.halfIncrements?a(Y,null,[a(S,{value:C-.5,index:V*2},null),a(S,{value:C,index:V*2+1},null)]):a(S,{value:C,index:V},null)]),m&&e.itemLabelPosition==="bottom"?E({value:C,index:V,label:(p=e.itemLabels)==null?void 0:p[V]}):void 0])})]})}),{}}}),Te=Symbol.for("vuetify:v-tabs"),Ht=oe({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Re(nt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),be=se()({name:"VTab",props:Ht(),setup(e,t){let{slots:o,attrs:i}=t;const{textColorClasses:g,textColorStyles:d}=Le(e,"sliderColor"),l=le(),x=le(),D=T(()=>e.direction==="horizontal"),u=T(()=>{var y,r;return((r=(y=l.value)==null?void 0:y.group)==null?void 0:r.isSelected.value)??!1});function k(y){var S,E;let{value:r}=y;if(r){const m=(E=(S=l.value)==null?void 0:S.$el.parentElement)==null?void 0:E.querySelector(".v-tab--selected .v-tab__slider"),w=x.value;if(!m||!w)return;const C=getComputedStyle(m).color,V=m.getBoundingClientRect(),I=w.getBoundingClientRect(),p=D.value?"x":"y",c=D.value?"X":"Y",L=D.value?"right":"bottom",B=D.value?"width":"height",H=V[p],Q=I[p],A=H>Q?V[L]-I[L]:V[p]-I[p],X=Math.sign(A)>0?D.value?"right":"bottom":Math.sign(A)<0?D.value?"left":"top":"center",Ve=(Math.abs(A)+(Math.sign(A)<0?V[B]:I[B]))/Math.max(V[B],I[B])||0,ue=V[B]/I[B]||0,Z=1.5;Pt(w,{backgroundColor:[C,"currentcolor"],transform:[`translate${c}(${A}px) scale${c}(${ue})`,`translate${c}(${A/Z}px) scale${c}(${(Ve-1)/Z+1})`,"none"],transformOrigin:Array(3).fill(X)},{duration:225,easing:Dt})}}return ie(()=>{const y=ve.filterProps(e);return a(ve,W({symbol:Te,ref:l,class:["v-tab",e.class],style:e.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1},y,i,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":k}),{...o,default:()=>{var r;return a(Y,null,[((r=o.default)==null?void 0:r.call(o))??e.text,!e.hideSlider&&a("div",{ref:x,class:["v-tab__slider",g.value],style:d.value},null)])}})}),Ue({},l)}}),jt=oe({...Re(ot(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Kt=se()({name:"VTabsWindow",props:jt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const i=Lt(Te,null),g=ne(e,"modelValue"),d=T({get(){var l;return g.value!=null||!i?g.value:(l=i.items.value.find(x=>i.selected.value.includes(x.id)))==null?void 0:l.value},set(l){g.value=l}});return ie(()=>{const l=we.filterProps(e);return a(we,W({_as:"VTabsWindow"},l,{modelValue:d.value,"onUpdate:modelValue":x=>d.value=x,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),o)}),{}}}),Gt=oe({...st()},"VTabsWindowItem"),Qt=se()({name:"VTabsWindowItem",props:Gt(),setup(e,t){let{slots:o}=t;return ie(()=>{const i=fe.filterProps(e);return a(fe,W({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",e.class],style:e.style}),o)}),{}}});function Xt(e){return e?e.map(t=>Bt(t)?t:{text:t,value:t}):[]}const Jt=oe({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...it({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ye(),...ze()},"VTabs"),Zt=se()({name:"VTabs",props:Jt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:o,slots:i}=t;const g=ne(e,"modelValue"),d=T(()=>Xt(e.items)),{densityClasses:l}=ut(e),{backgroundColorClasses:x,backgroundColorStyles:D}=rt(G(e,"bgColor")),{scopeId:u}=dt();return Et({VTab:{color:G(e,"color"),direction:G(e,"direction"),stacked:G(e,"stacked"),fixed:G(e,"fixedTabs"),sliderColor:G(e,"sliderColor"),hideSlider:G(e,"hideSlider")}}),ie(()=>{const k=Pe.filterProps(e),y=!!(i.window||e.items.length>0);return a(Y,null,[a(Pe,W(k,{modelValue:g.value,"onUpdate:modelValue":r=>g.value=r,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},l.value,x.value,e.class],style:[{"--v-tabs-height":It(e.height)},D.value,e.style],role:"tablist",symbol:Te},u,o),{default:()=>{var r;return[((r=i.default)==null?void 0:r.call(i))??d.value.map(S=>{var E;return((E=i.tab)==null?void 0:E.call(i,{item:S}))??a(be,W(S,{key:S.text,value:S.value}),{default:i[`tab.${S.value}`]?()=>{var m;return(m=i[`tab.${S.value}`])==null?void 0:m.call(i,{item:S})}:void 0})})]}}),y&&a(Kt,W({modelValue:g.value,"onUpdate:modelValue":r=>g.value=r,key:"tabs-window"},u),{default:()=>{var r;return[d.value.map(S=>{var E;return((E=i.item)==null?void 0:E.call(i,{item:S}))??a(Qt,{value:S.value},{default:()=>{var m;return(m=i[`item.${S.value}`])==null?void 0:m.call(i,{item:S})}})}),(r=i.window)==null?void 0:r.call(i)]}})])}),{}}}),ea={name:"MFAnalysis",components:{},props:{analysisReport:{type:Object,required:!0}},data:()=>({showDialog:!1,showSectorDetails:!1,selectedOverlap:null,activeTab:0,downloading:!1,overlapHeaders:[{title:"Fund 1",key:"fund1_name"},{title:"Fund 2",key:"fund2_name"},{title:"Overlap %",key:"overlap_percentage"},{title:"Actions",key:"actions",sortable:!1}],expenseHeaders:[{title:"Fund Name",key:"fund_name"},{title:"Expense Ratio",key:"expense_ratio"},{title:"Category Average",key:"category_avg"},{title:"Relative Cost",key:"relative_cost"}],etfRecommendationHeaders:[{title:"Fund Name",key:"fund_name"},{title:"ETF Name",key:"etf"},{title:"Overlap %",key:"overlap_percentage"},{title:"ETF Fee %",key:"etf_fee"},{title:"Fund Fee %",key:"fund_fee"},{title:"Potential Savings %",key:"potential_savings"}]}),computed:{sectorChartSeries(){return Object.values(this.analysisReport.diversification.sector_breakdown).map(e=>e.percentage)},formattedEtfRecommendations(){const e=[];return console.log(this.analysisReport.recommendedETFs),Object.entries(this.analysisReport.recommendedETFs).forEach(([t,o])=>{console.log([t,o]),o.length>0&&o.forEach(i=>{e.push({fund_name:t,etf:i.etf,overlap_percentage:i["overlap%"],etf_fee:i.etf_fee,fund_fee:i.fund_fee,potential_savings:i.potential_savings})})}),console.log("computed formattedEtfRecom",e),e},sectorChartOptions(){return{chart:{type:"donut",animations:{dynamicAnimation:{enabled:!0}}},labels:Object.keys(this.analysisReport.diversification.sector_breakdown),plotOptions:{pie:{donut:{size:"65%"}}},tooltip:{y:{formatter:e=>`${e.toFixed(1)}%`}},legend:{position:"bottom",horizontalAlign:"center",fontSize:"14px",markers:{width:12,height:12,radius:12}},responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],dataLabels:{enabled:!1},colors:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#3F51B5","#546E7A","#D4526E","#8D5B4C","#F86624","#D7263D","#1B998B","#2E294E","#F46036","#E2C044"]}},sectorTableData(){const e=this.analysisReport.diversification.sector_breakdown;return Object.entries(e).map(([t,o])=>({name:t,percentage:o.percentage})).sort((t,o)=>o.percentage-t.percentage)},sectorHeaders(){return[{title:"Sector",key:"name"},{title:"Allocation (%)",key:"percentage"}]},performanceHeaders(){return[{title:"Fund Name",key:"mutual_fund_name",align:"start",sortable:!0},{title:"5 Year",key:"mutual_fund_return_5Y",align:"end",sortable:!0,format:e=>`${e}%`},{title:"3 Year",key:"mutual_fund_return_3Y",align:"end",sortable:!0,format:e=>`${e}%`},{title:"1 Year",key:"mutual_fund_return_1Y",align:"end",sortable:!0,format:e=>`${e}%`}]},performanceTableData(){const e=this.analysisReport.performanceAnalysis;return console.log("flattened",e.map(t=>({mutual_fund_name:t.mutual_fund_name,mutual_fund_return_1Y:t.mutual_fund_return_1Y||"-",mutual_fund_return_3Y:t.mutual_fund_return_3Y||"-",mutual_fund_return_5Y:t.mutual_fund_return_5Y||"-"}))),e.map(t=>({mutual_fund_name:t.mutual_fund_name,mutual_fund_return_1Y:t.mutual_fund_return_1Y||"-",mutual_fund_return_3Y:t.mutual_fund_return_3Y||"-",mutual_fund_return_5Y:t.mutual_fund_return_5Y||"-"}))},formattedOverlaps(){return this.analysisReport.overlaps.overlaps.map(e=>({fund1_name:e.comparison_metadata.fund1.name,fund2_name:e.comparison_metadata.fund2.name,overlap_percentage:e.overlap_percentage,...e})).sort((e,t)=>t.overlap_percentage-e.overlap_percentage)}},methods:{getOverlapColor(e){return e>=25?"red":e>=15?"orange":"green"},getDiversificationColor(e){return{"over-diversified":"orange",concentrated:"red",optimal:"green"}[e]||"grey"},getCategoryColor(e){return{"large cap":"blue","mid cap":"purple","small cap":"deep-purple","multi cap":"indigo"}[e.toLowerCase()]||"grey"},getExpenseColor(e){return e>.5?"red":e<-.5?"green":"orange"},showOverlapDetails(e){this.selectedOverlap=e,this.showDialog=!0},async downloadCompleteReport(){this.downloading=!0;try{const e=new jsPDF("p","mm","a4");let t=10;e.setFontSize(18),e.text("Mutual Fund Analysis Report",105,t,{align:"center"}),t+=15,e.setFontSize(14),e.text("1. Portfolio Overview",10,t),t+=10,e.setFontSize(10);const o=`Total Unique Stocks: ${this.analysisReport.diversification.unique_stocks.count}`;e.text(o,15,t),t+=5,e.text(`Status: ${this.analysisReport.diversification.unique_stocks.status}`,15,t),t+=5,e.text(`Recommendation: ${this.analysisReport.diversification.unique_stocks.recommendation}`,15,t),t+=15,e.setFontSize(14),e.text("2. Sector Allocation",10,t),t+=10;const i=Object.entries(this.analysisReport.diversification.sector_breakdown).map(([u,k])=>[u,`${k.percentage.toFixed(1)}%`]).sort((u,k)=>parseFloat(k[1])-parseFloat(u[1]));e.autoTable({startY:t,head:[["Sector","Allocation"]],body:i,theme:"striped",headStyles:{fillColor:[71,85,119]},columnStyles:{0:{cellWidth:100},1:{cellWidth:40,halign:"right"}},margin:{left:15}}),t=e.lastAutoTable.finalY+10,e.setFontSize(14),e.text("3. Fund Category Distribution",10,t),t+=10;const g=Object.entries(this.analysisReport.diversification.category_breakdown).map(([u,k])=>[u,`${k.percentage.toFixed(1)}%`]).sort((u,k)=>parseFloat(k[1])-parseFloat(u[1]));e.autoTable({startY:t,head:[["Category","Allocation"]],body:g,theme:"striped",headStyles:{fillColor:[71,85,119]},columnStyles:{0:{cellWidth:100},1:{cellWidth:40,halign:"right"}},margin:{left:15}}),t=e.lastAutoTable.finalY+10,e.setFontSize(14),e.text("4. Stock Overlaps Analysis",10,t),t+=10;const d=this.formattedOverlaps.filter(u=>u.overlap_percentage>=25).sort((u,k)=>k.overlap_percentage-u.overlap_percentage),l=this.formattedOverlaps.map(u=>[u.fund1_name,u.fund2_name,`${u.overlap_percentage.toFixed(1)}%`]).sort((u,k)=>parseFloat(k[2])-parseFloat(u[2]));e.autoTable({startY:t,head:[["Fund 1","Fund 2","Overlap"]],body:l,theme:"striped",headStyles:{fillColor:[71,85,119]},columnStyles:{0:{cellWidth:70},1:{cellWidth:70},2:{cellWidth:30,halign:"right"}},margin:{left:15}}),t=e.lastAutoTable.finalY+10,d.length>0&&(e.setFontSize(10),e.text("High Overlap Warning:",15,t,{style:"bold"}),t+=5,e.text("The following fund pairs have significant overlap (>25%):",15,t),t+=5,d.forEach(u=>{const k=`• ${u.fund1_name} - ${u.fund2_name}: ${u.overlap_percentage.toFixed(1)}%`;e.text(k,20,t),t+=5})),t+=5,e.setFontSize(14),e.text("5. Expense Ratio Analysis",10,t),t+=10,console.log(this.analysisReport.expenses);const x=this.analysisReport.expenses.map(u=>[u.fund_name,`${u.expense_ratio.toFixed(2)}%`,`${u.category_avg.toFixed(2)}%`,`${u.relative_cost>0?"+":""}${u.relative_cost.toFixed(2)}%`]);e.autoTable({startY:t,head:[["Fund Name","Expense Ratio","Category Avg","Relative Cost"]],body:x,theme:"striped",headStyles:{fillColor:[71,85,119]},columnStyles:{0:{cellWidth:70},1:{cellWidth:40,halign:"right"},2:{cellWidth:40,halign:"right"},3:{cellWidth:40,halign:"right"}},margin:{left:15}}),t=e.lastAutoTable.finalY+10,e.setFontSize(14),e.text("6. Key Recommendations",10,t),t+=10,e.setFontSize(10),this.generateRecommendations().forEach(u=>{e.text(`• ${u}`,15,t),t+=5}),e.save("mutual_fund_analysis_report.pdf")}catch(e){console.error("Error generating PDF:",e)}finally{this.downloading=!1}},generateRecommendations(){var i,g;const e=[];this.analysisReport.overlaps.maxOverlap>25&&e.push(`Consider consolidating funds with high overlap (${(i=this.analysisReport.overlaps.maxOverlapPair)==null?void 0:i.fund1_name} and ${(g=this.analysisReport.overlaps.maxOverlapPair)==null?void 0:g.fund2_name})`);const{unique_stocks:t}=this.analysisReport.diversification;t.count>100?e.push("Portfolio may be over-diversified. Consider streamlining holdings."):t.count<30&&e.push("Portfolio concentration is high. Consider adding more diversity.");const o=this.analysisReport.expenses.filter(d=>d.relative_cost>.5);return o.length>0&&e.push(`Consider reviewing high expense funds: ${o.map(d=>d.fund_name).join(", ")}`),e}}},ta={class:"analysis-container"},aa={class:"mt-2"};function la(e,t,o,i,g,d){return z(),te("div",ta,[a(N,{class:"mb-4"},{default:n(()=>[a(U,{class:"d-flex flex-wrap"},{default:n(()=>[t[4]||(t[4]=v("span",{class:"text-h6"},"Stock Overlap Analysis",-1)),a(_e)]),_:1}),a(q,null,{default:n(()=>[a(re,{headers:e.overlapHeaders,items:d.formattedOverlaps,"items-per-page":5,density:"comfortable",class:"elevation-1",hover:!0},{"item.overlap_percentage":n(({item:l})=>[a(ce,{color:d.getOverlapColor(l.overlap_percentage),"text-color":"white"},{default:n(()=>[b(_(l.overlap_percentage)+"% ",1)]),_:2},1032,["color"])]),"item.actions":n(({item:l})=>[a(ve,{small:"",text:"",color:"primary",onClick:x=>d.showOverlapDetails(l)},{default:n(()=>t[5]||(t[5]=[b(" Details ")])),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1}),a(N,{class:"mb-4"},{default:n(()=>[a(U,{class:"text-h6"},{default:n(()=>t[6]||(t[6]=[b("Portfolio Diversification Analysis")])),_:1}),a(q,null,{default:n(()=>[a(de,{dense:""},{default:n(()=>[a(ee,null,{default:n(()=>[a(N,{outlined:""},{default:n(()=>[a(U,{class:"text-subtitle-1"},{default:n(()=>[b(" Unique Stocks: "+_(o.analysisReport.diversification.unique_stocks.count),1)]),_:1}),a(q,null,{default:n(()=>[a(ce,{color:d.getDiversificationColor(o.analysisReport.diversification.unique_stocks.status),"text-color":"white"},{default:n(()=>[b(_(o.analysisReport.diversification.unique_stocks.status),1)]),_:1},8,["color"]),v("p",aa,_(o.analysisReport.diversification.unique_stocks.recommendation),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(de,null,{default:n(()=>[a(ee,null,{default:n(()=>[a(N,null,{default:n(()=>[a(U,null,{default:n(()=>[t[7]||(t[7]=b(" Sector Analysis Details ")),a(_e)]),_:1}),a(q,null,{default:n(()=>[a(re,{headers:d.sectorHeaders,items:d.sectorTableData,"items-per-page":5,density:"comfortable",class:"elevation-1"},{item:n(({item:l})=>[v("tr",null,[v("td",null,_(l.name),1),v("td",null,[a(De,{value:l.percentage,height:"20",color:"primary"},{default:n(()=>[b(_(l.percentage.toFixed(1))+"% ",1)]),_:2},1032,["value"])])])]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),a(de,null,{default:n(()=>[a(ee,null,{default:n(()=>[a(N,null,{default:n(()=>[a(U,null,{default:n(()=>[t[8]||(t[8]=b(" Performance Analysis (Returns) ")),a(_e)]),_:1}),a(q,null,{default:n(()=>[a(re,{headers:d.performanceHeaders,items:d.performanceTableData,"items-per-page":5,density:"comfortable",class:"elevation-1"},null,8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),a(de,null,{default:n(()=>[a(ee,{cols:"12",sm:"6",md:"12",lg:"12"},{default:n(()=>[a(N,{outlined:""},{default:n(()=>[a(U,{class:"text-subtitle-1"},{default:n(()=>t[9]||(t[9]=[b("Fund Category Distribution")])),_:1}),a(q,null,{default:n(()=>[(z(!0),te(Y,null,pe(o.analysisReport.diversification.category_breakdown,(l,x)=>(z(),he(De,{key:x,value:l.percentage,color:d.getCategoryColor(x),height:"25",striped:""},{default:n(()=>[b(_(x)+": "+_(l.percentage)+"% ",1)]),_:2},1032,["value","color"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(N,null,{default:n(()=>[a(U,{class:"text-h6"},{default:n(()=>t[10]||(t[10]=[b("Expense Ratio Analysis")])),_:1}),a(q,null,{default:n(()=>[a(re,{headers:e.expenseHeaders,items:o.analysisReport.expenses,"items-per-page":5,density:"comfortable",hover:!0},{"item.relative_cost":n(({item:l})=>[a(ce,{color:d.getExpenseColor(l.relative_cost),"text-color":"white"},{default:n(()=>[b(_(l.relative_cost>0?"+":"")+_(l.relative_cost)+"% ",1)]),_:2},1032,["color"])]),_:1},8,["headers","items"])]),_:1})]),_:1}),a(N,{class:"mt-4"},{default:n(()=>[a(U,{class:"text-h6"},{default:n(()=>t[11]||(t[11]=[b("Similar ETFs")])),_:1}),a(q,null,{default:n(()=>[a(re,{headers:e.etfRecommendationHeaders,items:d.formattedEtfRecommendations,"items-per-page":5,density:"comfortable",hover:!0},{"item.overlap_percentage":n(({item:l})=>[b(_(l.overlap_percentage.toFixed(2))+"% ",1)]),"item.etf_fee":n(({item:l})=>[b(_(l.etf_fee.toFixed(2))+"% ",1)]),"item.fund_fee":n(({item:l})=>[b(_(l.fund_fee.toFixed(2))+"% ",1)]),"item.potential_savings":n(({item:l})=>[a(ce,{color:l.potential_savings>.3?"green":"orange","text-color":"white"},{default:n(()=>[b(_(l.potential_savings.toFixed(2))+"% ",1)]),_:2},1032,["color"])]),_:1},8,["headers","items"])]),_:1})]),_:1}),a(qt,{modelValue:e.showDialog,"onUpdate:modelValue":t[3]||(t[3]=l=>e.showDialog=l),"max-width":"800px"},{default:n(()=>[a(N,null,{default:n(()=>[a(U,null,{default:n(()=>[t[13]||(t[13]=b(" Overlap Details ")),a(_e),a(ve,{icon:"",onClick:t[0]||(t[0]=l=>e.showDialog=!1)},{default:n(()=>[a(Ce,null,{default:n(()=>t[12]||(t[12]=[b("mdi-close")])),_:1})]),_:1})]),_:1}),e.selectedOverlap?(z(),he(q,{key:0},{default:n(()=>[a(Zt,{modelValue:e.activeTab,"onUpdate:modelValue":t[1]||(t[1]=l=>e.activeTab=l)},{default:n(()=>[a(be,null,{default:n(()=>t[14]||(t[14]=[b("Overlapping Stocks")])),_:1}),a(be,null,{default:n(()=>t[15]||(t[15]=[b("Unique Stocks")])),_:1}),a(be,null,{default:n(()=>t[16]||(t[16]=[b("Fund Comparison")])),_:1})]),_:1},8,["modelValue"]),a(we,{modelValue:e.activeTab,"onUpdate:modelValue":t[2]||(t[2]=l=>e.activeTab=l)},{default:n(()=>[a(fe,null,{default:n(()=>[a(Ee,null,{default:n(()=>[v("thead",null,[v("tr",null,[t[17]||(t[17]=v("th",null,"Stock",-1)),v("th",null,_(e.selectedOverlap.comparison_metadata.fund1.name)+" (%) ",1),v("th",null,_(e.selectedOverlap.comparison_metadata.fund2.name)+" (%) ",1)])]),v("tbody",null,[(z(!0),te(Y,null,pe(e.selectedOverlap.overlapping_stocks,l=>(z(),te("tr",{key:l.stock_name},[v("td",null,_(l.stock_name),1),v("td",null,_(l.fund1_holding),1),v("td",null,_(l.fund2_holding),1)]))),128))])]),_:1})]),_:1}),a(fe,null,{default:n(()=>[a(de,null,{default:n(()=>[a(ee,{cols:"6"},{default:n(()=>[v("h3",null,_(e.selectedOverlap.comparison_metadata.fund1.name)+" Unique Stocks ",1),a(Fe,{dense:""},{default:n(()=>[(z(!0),te(Y,null,pe(e.selectedOverlap.fund1_unique_stocks,l=>(z(),he(ke,{key:l},{default:n(()=>[b(_(l),1)]),_:2},1024))),128))]),_:1})]),_:1}),a(ee,{cols:"6"},{default:n(()=>[v("h3",null,_(e.selectedOverlap.comparison_metadata.fund2.name)+" Unique Stocks ",1),a(Fe,{dense:""},{default:n(()=>[(z(!0),te(Y,null,pe(e.selectedOverlap.fund2_unique_stocks,l=>(z(),he(ke,{key:l},{default:n(()=>[b(_(l),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),a(fe,null,{default:n(()=>[a(Ee,null,{default:n(()=>[v("thead",null,[v("tr",null,[t[18]||(t[18]=v("th",null,"Metric",-1)),v("th",null,_(e.selectedOverlap.comparison_metadata.fund1.name),1),v("th",null,_(e.selectedOverlap.comparison_metadata.fund2.name),1)])]),v("tbody",null,[v("tr",null,[t[19]||(t[19]=v("td",null,"AUM (millions)",-1)),v("td",null,_(e.selectedOverlap.comparison_metadata.fund1.aum),1),v("td",null,_(e.selectedOverlap.comparison_metadata.fund2.aum),1)]),v("tr",null,[t[20]||(t[20]=v("td",null,"Star Rating",-1)),v("td",null,[a(We,{value:e.selectedOverlap.comparison_metadata.fund1.star_rating,readonly:"",small:"",dense:""},null,8,["value"])]),v("td",null,[a(We,{value:e.selectedOverlap.comparison_metadata.fund2.star_rating,readonly:"",small:"",dense:""},null,8,["value"])])]),v("tr",null,[t[21]||(t[21]=v("td",null,"Expense Ratio",-1)),v("td",null,_(e.selectedOverlap.comparison_metadata.fund1.expenses_ratio)+"% ",1),v("td",null,_(e.selectedOverlap.comparison_metadata.fund2.expenses_ratio)+"% ",1)])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):Ut("",!0)]),_:1})]),_:1},8,["modelValue"])])}const da=ct(ea,[["render",la],["__scopeId","data-v-75eca7ae"]]);function na(e,t,o){if(t==null)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return typeof t=="number"&&~t?a(Y,null,[a("span",{class:"v-autocomplete__unmask"},[e.substr(0,t)]),a("span",{class:"v-autocomplete__mask"},[e.substr(t,o)]),a("span",{class:"v-autocomplete__unmask"},[e.substr(t+o)])]):e}const oa=oe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...ft({filterKeys:["title"]}),...vt(),...Re(mt({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...gt({transition:!1})},"VAutocomplete"),ca=se()({name:"VAutocomplete",props:oa(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:o}=t;const{t:i}=qe(),g=le(),d=ae(!1),l=ae(!0),x=ae(!1),D=le(),u=le(),k=ne(e,"menu"),y=T({get:()=>k.value,set:s=>{var f;k.value&&!s&&((f=D.value)!=null&&f.ΨopenChildren.size)||(k.value=s)}}),r=ae(-1),S=T(()=>{var s;return(s=g.value)==null?void 0:s.color}),E=T(()=>y.value?e.closeText:e.openText),{items:m,transformIn:w,transformOut:C}=pt(e),{textColorClasses:V,textColorStyles:I}=Le(S),p=ne(e,"search",""),c=ne(e,"modelValue",[],s=>w(s===null?[null]:zt(s)),s=>{const f=C(s);return e.multiple?f:f[0]??null}),L=T(()=>typeof e.counterValue=="function"?e.counterValue(c.value):typeof e.counterValue=="number"?e.counterValue:c.value.length),B=ht(e),{filteredItems:H,getMatches:Q}=yt(e,m,()=>l.value?"":p.value),A=T(()=>e.hideSelected?H.value.filter(s=>!c.value.some(f=>f.value===s.value)):H.value),X=T(()=>!!(e.chips||o.chip)),J=T(()=>X.value||!!o.selection),Ve=T(()=>c.value.map(s=>s.props.value)),ue=T(()=>{var f;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&p.value===((f=A.value[0])==null?void 0:f.title))&&A.value.length>0&&!l.value&&!x.value}),Z=T(()=>e.hideNoData&&!A.value.length||B.isReadonly.value||B.isDisabled.value),xe=le(),Ne=_t(xe,g);function He(s){e.openOnClear&&(y.value=!0),p.value=""}function je(){Z.value||(y.value=!0)}function Ke(s){Z.value||(d.value&&(s.preventDefault(),s.stopPropagation()),y.value=!y.value)}function Ge(s){var f;Yt(s)&&((f=g.value)==null||f.focus())}function Qe(s){var h,F,M;if(B.isReadonly.value)return;const f=g.value.selectionStart,R=c.value.length;if((r.value>-1||["Enter","ArrowDown","ArrowUp"].includes(s.key))&&s.preventDefault(),["Enter","ArrowDown"].includes(s.key)&&(y.value=!0),["Escape"].includes(s.key)&&(y.value=!1),ue.value&&["Enter","Tab"].includes(s.key)&&!c.value.some(O=>{let{value:P}=O;return P===A.value[0].value})&&j(A.value[0]),s.key==="ArrowDown"&&ue.value&&((h=xe.value)==null||h.focus("next")),["Backspace","Delete"].includes(s.key)){if(!e.multiple&&J.value&&c.value.length>0&&!p.value)return j(c.value[0],!1);if(~r.value){const O=r.value;j(c.value[r.value],!1),r.value=O>=R-1?R-2:O}else s.key==="Backspace"&&!p.value&&(r.value=R-1)}if(e.multiple){if(s.key==="ArrowLeft"){if(r.value<0&&f>0)return;const O=r.value>-1?r.value-1:R-1;c.value[O]?r.value=O:(r.value=-1,g.value.setSelectionRange((F=p.value)==null?void 0:F.length,(M=p.value)==null?void 0:M.length))}if(s.key==="ArrowRight"){if(r.value<0)return;const O=r.value+1;c.value[O]?r.value=O:(r.value=-1,g.value.setSelectionRange(0,0))}}}function Xe(s){if(Me(g.value,":autofill")||Me(g.value,":-webkit-autofill")){const f=m.value.find(R=>R.title===s.target.value);f&&j(f)}}function Je(){var s;e.eager&&((s=u.value)==null||s.calculateVisibleItems())}function Ze(){var s;d.value&&(l.value=!0,(s=g.value)==null||s.focus())}function et(s){d.value=!0,setTimeout(()=>{x.value=!0})}function tt(s){x.value=!1}function at(s){(s==null||s===""&&!e.multiple&&!J.value)&&(c.value=[])}const Se=ae(!1);function j(s){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!s||s.props.disabled))if(e.multiple){const R=c.value.findIndex(F=>e.valueComparator(F.value,s.value)),h=f??!~R;if(~R){const F=h?[...c.value,s]:[...c.value];F.splice(R,1),c.value=F}else h&&(c.value=[...c.value,s]);e.clearOnSelect&&(p.value="")}else{const R=f!==!1;c.value=R?[s]:[],p.value=R&&!J.value?s.title:"",$e(()=>{y.value=!1,l.value=!0})}}return ye(d,(s,f)=>{var R;s!==f&&(s?(Se.value=!0,p.value=e.multiple||J.value?"":String(((R=c.value.at(-1))==null?void 0:R.props.title)??""),l.value=!0,$e(()=>Se.value=!1)):(!e.multiple&&p.value==null&&(c.value=[]),y.value=!1,c.value.some(h=>{let{title:F}=h;return F===p.value})||(p.value=""),r.value=-1))}),ye(p,s=>{!d.value||Se.value||(s&&(y.value=!0),l.value=!s)}),ye(y,()=>{if(!e.hideSelected&&y.value&&c.value.length){const s=A.value.findIndex(f=>c.value.some(R=>f.value===R.value));Mt&&window.requestAnimationFrame(()=>{var f;s>=0&&((f=u.value)==null||f.scrollToIndex(s))})}}),ye(()=>e.items,(s,f)=>{y.value||d.value&&!f.length&&s.length&&(y.value=!0)}),ie(()=>{const s=!!(!e.hideNoData||A.value.length||o["prepend-item"]||o["append-item"]||o["no-data"]),f=c.value.length>0,R=Ie.filterProps(e);return a(Ie,W({ref:g},R,{modelValue:p.value,"onUpdate:modelValue":[h=>p.value=h,at],focused:d.value,"onUpdate:focused":h=>d.value=h,validationValue:c.externalValue,counterValue:L.value,dirty:f,onChange:Xe,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":y.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!J.value,"v-autocomplete--selecting-index":r.value>-1},e.class],style:e.style,readonly:B.isReadonly.value,placeholder:f?void 0:e.placeholder,"onClick:clear":He,"onMousedown:control":je,onKeydown:Qe}),{...o,default:()=>a(Y,null,[a(bt,W({ref:D,modelValue:y.value,"onUpdate:modelValue":h=>y.value=h,activator:"parent",contentClass:"v-autocomplete__content",disabled:Z.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Je,onAfterLeave:Ze},e.menuProps),{default:()=>[s&&a(Fe,W({ref:xe,selected:Ve.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:h=>h.preventDefault(),onKeydown:Ge,onFocusin:et,onFocusout:tt,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Ne,e.listProps),{default:()=>{var h,F,M;return[(h=o["prepend-item"])==null?void 0:h.call(o),!A.value.length&&!e.hideNoData&&(((F=o["no-data"])==null?void 0:F.call(o))??a(ke,{title:i(e.noDataText)},null)),a(kt,{ref:u,renderless:!0,items:A.value},{default:O=>{var Ae;let{item:P,index:K,itemRef:$}=O;const Oe=W(P.props,{ref:$,key:K,active:ue.value&&K===0?!0:void 0,onClick:()=>j(P,null)});return((Ae=o.item)==null?void 0:Ae.call(o,{item:P,index:K,props:Oe}))??a(ke,W(Oe,{role:"option"}),{prepend:me=>{let{isSelected:ge}=me;return a(Y,null,[e.multiple&&!e.hideSelected?a(Vt,{key:P.value,modelValue:ge,ripple:!1,tabindex:"-1"},null):void 0,P.props.prependAvatar&&a(xt,{image:P.props.prependAvatar},null),P.props.prependIcon&&a(Ce,{icon:P.props.prependIcon},null)])},title:()=>{var me,ge;return l.value?P.title:na(P.title,(me=Q(P))==null?void 0:me.title,((ge=p.value)==null?void 0:ge.length)??0)}})}}),(M=o["append-item"])==null?void 0:M.call(o)]}})]}),c.value.map((h,F)=>{function M($){$.stopPropagation(),$.preventDefault(),j(h,!1)}const O={"onClick:close":M,onKeydown($){$.key!=="Enter"&&$.key!==" "||($.preventDefault(),$.stopPropagation(),M($))},onMousedown($){$.preventDefault(),$.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},P=X.value?!!o.chip:!!o.selection,K=P?$t(X.value?o.chip({item:h,index:F,props:O}):o.selection({item:h,index:F})):void 0;if(!(P&&!K))return a("div",{key:h.value,class:["v-autocomplete__selection",F===r.value&&["v-autocomplete__selection--selected",V.value]],style:F===r.value?I.value:{}},[X.value?o.chip?a(St,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:h.title}}},{default:()=>[K]}):a(ce,W({key:"chip",closable:e.closableChips,size:"small",text:h.title,disabled:h.props.disabled},O),null):K??a("span",{class:"v-autocomplete__selection-text"},[h.title,e.multiple&&F<c.value.length-1&&a("span",{class:"v-autocomplete__selection-comma"},[b(",")])])])})]),"append-inner":function(){var O;for(var h=arguments.length,F=new Array(h),M=0;M<h;M++)F[M]=arguments[M];return a(Y,null,[(O=o["append-inner"])==null?void 0:O.call(o,...F),e.menuIcon?a(Ce,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:Ke,onClick:Wt,"aria-label":i(E.value),title:i(E.value),tabindex:"-1"},null):void 0])}})}),Ue({isFocused:d,isPristine:l,menu:y,search:p,filteredItems:H,select:j},g)}});export{da as M,ca as V,_e as a};
//# sourceMappingURL=VAutocomplete-5w5RDJuU.js.map
