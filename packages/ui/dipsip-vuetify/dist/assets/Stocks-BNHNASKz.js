import{_ as se,A as ae,C as F,z as ke,a6 as re,E as w,N as oe,a7 as ye,q as Z,a8 as Oe,a9 as Ie,J as Ae,aa as Ne,ab as Ee,I as We,ac as Ye,ad as Re,ae as Be,K as Ge,af as Le,ag as Ue,M as je,ah as He,Z as _e,s as Fe,H as qe,x as X,y as U,p as Ke,o as ze,D as Je,G as $e,w as Ze}from"./index-DQVnS5Zf.js";import{A as Qe}from"./apexcharts-3z0-31-X.js";import{$ as ge,N as j,O as q,P as f,m as s,Q as g,S as Xe,R as ee,c as D,d as ne,s as K,w as pe,a as De,n as V,z as et,A as tt,E as Se,F as at,V as te,_ as le}from"./vue-Ci2-vDhJ.js";import{a as nt,M as st,b as ot,c as rt,d as lt,e as it,f as dt,V as ut}from"./VAutocomplete-BU1v-gK8.js";import{p as O,J as z,g as A,f as E,Z as ct,aL as H,B as N,G as J,aM as mt,ax as be,o as Pe,ak as ft,T as ht,m as vt,b as kt,d as yt,a0 as $,W as _t}from"./vuetify-BlS6c2-T.js";import"./VDialog-BTrOnwY-.js";const gt={Promoters:1,"Key Management Personnel":2,Relative:3,"-":4,"Promoter Group":5,"Employees/Designated Employees":6,Director:7,Other:8,"Immediate relative":9,"Key Managerial Personnel":10},pt=Object.entries(gt).reduce((e,[t,o])=>(e[o]=t,e),{}),Dt={"7(2)":1,"7(3)":2};Object.entries(Dt).reduce((e,[t,o])=>(e[o]=t,e),{});const St={"Equity Shares":1,"Convertible Debentures":2,Warrants:3,"ADR/GDR/FCCB":4},bt=Object.entries(St).reduce((e,[t,o])=>(e[o]=t,e),{}),Pt={ESOP:1,Gift:2,"Invocation of Pledge":3,"Market Purchase":4,"Market Sale":5,"Off Market":6,Others:7,"Pledge Creation":8,"Preferential Offer":9,"Revokation of Pledge":10,"Scheme of Amalgamation/Merger/Demerger/Arrangement":11,"Inter-se-Transfer":12,"Conversion of security":13,Bonus:14,"-":15},xt=Object.entries(Pt).reduce((e,[t,o])=>(e[o]=t,e),{}),Ct={Buy:1,Sell:2,Pledge:3,"Pledge Revoke":4,"Invocation of Pledge":5},Vt=Object.entries(Ct).reduce((e,[t,o])=>(e[o]=t,e),{}),wt={NSE:1,BSE:2,MSEI:3,NA:4},Mt={main:0,sme:1};Object.entries(Mt).reduce((e,[t,o])=>(e[o]=t,e),{});Object.entries(wt).reduce((e,[t,o])=>(e[o]=t,e),{});const Tt={Not_Specified:-1,Positive:0,Negative:1,Neutral:2},Ot=Object.entries(Tt).reduce((e,[t,o])=>(e[o]=t,e),{}),It={components:{apexchart:Qe},props:{candles:Array},computed:{series(){return[{data:this.candles.map(e=>({x:new Date(e.timestamp),y:[e.open,e.high,e.low,e.close]}))}]},chartOptions(){return{chart:{type:"candlestick",height:350},xaxis:{type:"datetime"},yaxis:{tooltip:{enabled:!0}}}}}};function At(e,t,o,d,a,r){const l=ge("apexchart");return j(),q(ke,null,{default:f(()=>[s(ae,null,{default:f(()=>t[0]||(t[0]=[g("Stock Price Chart")])),_:1}),s(F,null,{default:f(()=>[s(l,{type:"candlestick",options:r.chartOptions,series:r.series},null,8,["options","series"])]),_:1})]),_:1})}const Nt=se(It,[["render",At],["__scopeId","data-v-cc929203"]]),Et={props:{announcements:Array,insiderTrades:Array,candles:Array},components:{StockPriceChart:Nt},data(){return{announcementHeaders:[{text:"Company",value:"company_name"},{text:"Summary",value:"announcement_text_summary"},{text:"Impact",value:"announcement_impact"},{text:"Signal",value:"announcement_sentiment"},{text:"Date",value:"announcement_date"}]}},computed:{insiderTradeHeaders(){return[{text:"Company",value:"company_name"},{text:"Insider",value:"name_of_insider"},{text:"Category",value:"category_of_insider"},{text:"Type",value:"transaction_type"},{text:"Mode",value:"mode_of_transaction"},{text:"% Pre",value:"shareholding_before_transaction"},{text:"% Post",value:"shareholding_after_transaction"},{text:"Date",value:"intimation_date"}]}}};function Wt(e,t,o,d,a,r){return j(),Xe("div",null,[t[13]||(t[13]=ee("h2",null,"Stock Watchlist",-1)),t[14]||(t[14]=ee("h3",null,"Announcements",-1)),s(re,{headers:a.announcementHeaders,items:o.announcements},{"header.company_name":f(()=>t[0]||(t[0]=[g("Company")])),"header.announcement_text_summary":f(()=>t[1]||(t[1]=[g("Summary")])),"header.announcement_impact":f(()=>t[2]||(t[2]=[g("Impact")])),"header.announcement_sentiment":f(()=>t[3]||(t[3]=[g("Signal")])),"header.announcement_date":f(()=>t[4]||(t[4]=[g("Date")])),_:1},8,["headers","items"]),t[15]||(t[15]=ee("h3",null,"Insider Trades",-1)),s(re,{headers:r.insiderTradeHeaders,items:o.insiderTrades,class:"mb-4"},{"header.company_name":f(()=>t[5]||(t[5]=[g("Company")])),"header.name_of_insider":f(()=>t[6]||(t[6]=[g("Insider")])),"header.category_of_insider":f(()=>t[7]||(t[7]=[g("Category")])),"header.transaction_type":f(()=>t[8]||(t[8]=[g("Type")])),"header.mode_of_transaction":f(()=>t[9]||(t[9]=[g("Mode")])),"header.shareholding_before_transaction":f(()=>t[10]||(t[10]=[g("%Pre")])),"header.shareholding_after_transaction":f(()=>t[11]||(t[11]=[g("%Post")])),"header.intimation_date":f(()=>t[12]||(t[12]=[g("Intimation")])),_:1},8,["headers","items"])])}const Yt=se(Et,[["render",Wt],["__scopeId","data-v-d151aaa6"]]),xe=O({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:z,default:"$next"},prevIcon:{type:z,default:"$prev"},modeIcon:{type:z,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),ie=A()({name:"VDatePickerControls",props:xe(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:o}=t;const d=D(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=D(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),r=D(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),l=D(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){o("click:prev")}function n(){o("click:next")}function i(){o("click:year")}function m(){o("click:month")}return E(()=>s("div",{class:["v-date-picker-controls"]},[s(w,{class:"v-date-picker-controls__month-btn",disabled:d.value,text:e.text,variant:"text",rounded:!0,onClick:m},null),s(w,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:i},null),s(nt,{key:"mode-spacer"},null),s("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[s(w,{disabled:r.value,icon:e.prevIcon,variant:"text",onClick:u},null),s(w,{disabled:l.value,icon:e.nextIcon,variant:"text",onClick:n},null)])])),{}}}),Rt=O({appendIcon:z,color:String,header:String,transition:String,onClick:ct()},"VDatePickerHeader"),de=A()({name:"VDatePickerHeader",props:Rt(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:o,slots:d}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=oe(e,"color");function l(){o("click")}function u(){o("click:append")}return E(()=>{const n=!!(d.default||e.header),i=!!(d.append||e.appendIcon);return s("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:r.value,onClick:l},[d.prepend&&s("div",{key:"prepend",class:"v-date-picker-header__prepend"},[d.prepend()]),n&&s(ye,{key:"content",name:e.transition},{default:()=>{var m;return[s("div",{key:e.header,class:"v-date-picker-header__content"},[((m=d.default)==null?void 0:m.call(d))??e.header])]}}),i&&s("div",{class:"v-date-picker-header__append"},[d.append?s(Z,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var m;return[(m=d.append)==null?void 0:m.call(d)]}}):s(w,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),Bt=O({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function Gt(e){const t=H(),o=N(e,"modelValue",[],v=>J(v)),d=D(()=>e.displayValue?t.date(e.displayValue):o.value.length>0?t.date(o.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),a=N(e,"year",void 0,v=>{const y=v!=null?Number(v):t.getYear(d.value);return t.startOfYear(t.setYear(t.date(),y))},v=>t.getYear(v)),r=N(e,"month",void 0,v=>{const y=v!=null?Number(v):t.getMonth(d.value),k=t.setYear(t.startOfMonth(t.date()),t.getYear(a.value));return t.setMonth(k,y)},v=>t.getMonth(v)),l=D(()=>{const v=Number(e.firstDayOfWeek??0);return e.weekdays.map(y=>(y+v)%7)}),u=D(()=>{const v=t.getWeekArray(r.value,e.firstDayOfWeek),y=v.flat(),k=6*7;if(e.weeksInMonth==="static"&&y.length<k){const b=y[y.length-1];let _=[];for(let c=1;c<=k-y.length;c++)_.push(t.addDays(b,c)),c%7===0&&(v.push(_),_=[])}return v});function n(v,y){return v.filter(k=>l.value.includes(t.toJsDate(k).getDay())).map((k,b)=>{const _=t.toISO(k),c=!t.isSameMonth(k,r.value),x=t.isSameDay(k,t.startOfMonth(r.value)),T=t.isSameDay(k,t.endOfMonth(r.value)),C=t.isSameDay(k,r.value);return{date:k,isoDate:_,formatted:t.format(k,"keyboardDate"),year:t.getYear(k),month:t.getMonth(k),isDisabled:M(k),isWeekStart:b%7===0,isWeekEnd:b%7===6,isToday:t.isSameDay(k,y),isAdjacent:c,isHidden:c&&!e.showAdjacentMonths,isStart:x,isSelected:o.value.some(W=>t.isSameDay(k,W)),isEnd:T,isSame:C,localized:t.format(k,"dayOfMonth")}})}const i=D(()=>{const v=t.startOfWeek(d.value,e.firstDayOfWeek),y=[];for(let b=0;b<=6;b++)y.push(t.addDays(v,b));const k=t.date();return n(y,k)}),m=D(()=>{const v=u.value.flat(),y=t.date();return n(v,y)}),p=D(()=>u.value.map(v=>v.length?mt(t,v[0]):null));function M(v){if(e.disabled)return!0;const y=t.date(v);return e.min&&t.isAfter(t.date(e.min),y)||e.max&&t.isAfter(y,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(k=>t.isSameDay(t.date(k),y)):typeof e.allowedDates=="function"?!e.allowedDates(y):!1}return{displayValue:d,daysInMonth:m,daysInWeek:i,genDays:n,model:o,weeksInMonth:u,weekDays:l,weekNumbers:p}}const Ce=O({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Bt()},"VDatePickerMonth"),ue=A()({name:"VDatePickerMonth",props:Ce(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:o,slots:d}=t;const a=ne(),{daysInMonth:r,model:l,weekNumbers:u}=Gt(e),n=H(),i=K(),m=K(),p=K(!1),M=D(()=>p.value?e.reverseTransition:e.transition);e.multiple==="range"&&l.value.length>0&&(i.value=l.value[0],l.value.length>1&&(m.value=l.value[l.value.length-1]));const v=D(()=>{const _=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return l.value.length>=_});pe(r,(_,c)=>{c&&(p.value=n.isBefore(_[0].date,c[0].date))});function y(_){const c=n.startOfDay(_);if(l.value.length===0?i.value=void 0:l.value.length===1&&(i.value=l.value[0],m.value=void 0),!i.value)i.value=c,l.value=[i.value];else if(m.value)i.value=_,m.value=void 0,l.value=[i.value];else{if(n.isSameDay(c,i.value)){i.value=void 0,l.value=[];return}else n.isBefore(c,i.value)?(m.value=n.endOfDay(i.value),i.value=c):m.value=n.endOfDay(c);const x=n.getDiff(m.value,i.value,"days"),T=[i.value];for(let C=1;C<x;C++){const W=n.addDays(i.value,C);T.push(W)}T.push(m.value),l.value=T}}function k(_){const c=l.value.findIndex(x=>n.isSameDay(x,_));if(c===-1)l.value=[...l.value,_];else{const x=[...l.value];x.splice(c,1),l.value=x}}function b(_){e.multiple==="range"?y(_):e.multiple?k(_):l.value=[_]}return()=>s("div",{class:"v-date-picker-month"},[e.showWeek&&s("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&s("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[g(" ")]),u.value.map(_=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[_]))]),s(ye,{name:M.value},{default:()=>{var _;return[s("div",{ref:a,key:(_=r.value[0].date)==null?void 0:_.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&n.getWeekdays(e.firstDayOfWeek).map(c=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[c])),r.value.map((c,x)=>{const T={props:{onClick:()=>b(c.date)},item:c,i:x};return v.value&&!c.isSelected&&(c.isDisabled=!0),s("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":c.isAdjacent,"v-date-picker-month__day--hide-adjacent":c.isHidden,"v-date-picker-month__day--selected":c.isSelected,"v-date-picker-month__day--week-end":c.isWeekEnd,"v-date-picker-month__day--week-start":c.isWeekStart}],"data-v-date":c.isDisabled?void 0:c.isoDate},[(e.showAdjacentMonths||!c.isAdjacent)&&s(Z,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(c.isSelected||c.isToday)&&!c.isDisabled?e.color:void 0,disabled:c.isDisabled,icon:!0,ripple:!1,text:c.localized,variant:c.isDisabled?c.isToday?"outlined":"text":c.isToday&&!c.isSelected?"outlined":"flat",onClick:()=>b(c.date)}}},{default:()=>{var C;return[((C=d.day)==null?void 0:C.call(d,T))??s(w,T.props,null)]}})])})])]}})])}}),Ve=O({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),ce=A()({name:"VDatePickerMonths",props:Ve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:d}=t;const a=H(),r=N(e,"modelValue"),l=D(()=>{let u=a.startOfYear(a.date());return e.year&&(u=a.setYear(u,e.year)),be(12).map(n=>{const i=a.format(u,"monthShort"),m=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),u)||e.max&&a.isAfter(u,a.startOfMonth(a.date(e.max))));return u=a.getNextMonth(u),{isDisabled:m,text:i,value:n}})});return De(()=>{r.value=r.value??a.getMonth(a.date())}),E(()=>s("div",{class:"v-date-picker-months",style:{height:Pe(e.height)}},[s("div",{class:"v-date-picker-months__content"},[l.value.map((u,n)=>{var p;const i={active:r.value===n,color:r.value===n?e.color:void 0,disabled:u.isDisabled,rounded:!0,text:u.text,variant:r.value===u.value?"flat":"text",onClick:()=>m(n)};function m(M){if(r.value===M){o("update:modelValue",r.value);return}r.value=M}return((p=d.month)==null?void 0:p.call(d,{month:u,i:n,props:i}))??s(w,V({key:"month"},i),null)})])])),{}}}),we=O({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),me=A()({name:"VDatePickerYears",props:we(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:d}=t;const a=H(),r=N(e,"modelValue"),l=D(()=>{const n=a.getYear(a.date());let i=n-100,m=n+52;e.min&&(i=a.getYear(a.date(e.min))),e.max&&(m=a.getYear(a.date(e.max)));let p=a.startOfYear(a.date());return p=a.setYear(p,i),be(m-i+1,i).map(M=>{const v=a.format(p,"year");return p=a.setYear(p,a.getYear(p)+1),{text:v,value:M}})});De(()=>{r.value=r.value??a.getYear(a.date())});const u=ft();return et(async()=>{var n;await tt(),(n=u.el)==null||n.scrollIntoView({block:"center"})}),E(()=>s("div",{class:"v-date-picker-years",style:{height:Pe(e.height)}},[s("div",{class:"v-date-picker-years__content"},[l.value.map((n,i)=>{var p;const m={ref:r.value===n.value?u:void 0,active:r.value===n.value,color:r.value===n.value?e.color:void 0,rounded:!0,text:n.text,variant:r.value===n.value?"flat":"text",onClick:()=>{if(r.value===n.value){o("update:modelValue",r.value);return}r.value=n.value}};return((p=d.year)==null?void 0:p.call(d,{year:n,i,props:m}))??s(w,V({key:"month"},m),null)})])])),{}}}),Lt=ht("v-picker-title"),Me=O({color:String,...Oe(),...vt(),...Ie(),...Ae(),...Ne(),...Ee(),...We(),...Ye(),...kt()},"VSheet"),fe=A()({name:"VSheet",props:Me(),setup(e,t){let{slots:o}=t;const{themeClasses:d}=yt(e),{backgroundColorClasses:a,backgroundColorStyles:r}=oe(Se(e,"color")),{borderClasses:l}=Re(e),{dimensionStyles:u}=Be(e),{elevationClasses:n}=Ge(e),{locationStyles:i}=Le(e),{positionClasses:m}=Ue(e),{roundedClasses:p}=je(e);return E(()=>s(e.tag,{class:["v-sheet",d.value,a.value,l.value,n.value,m.value,p.value,e.class],style:[r.value,u.value,i.value,e.style]},o)),{}}}),Te=O({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Me()},"VPicker"),he=A()({name:"VPicker",props:Te(),setup(e,t){let{slots:o}=t;const{backgroundColorClasses:d,backgroundColorStyles:a}=oe(Se(e,"color"));return E(()=>{const r=fe.filterProps(e),l=!!(e.title||o.title);return s(fe,V(r,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!o.actions},e.class],style:e.style}),{default:()=>{var u;return[!e.hideHeader&&s("div",{key:"header",class:[d.value],style:[a.value]},[l&&s(Lt,{key:"picker-title"},{default:()=>{var n;return[((n=o.title)==null?void 0:n.call(o))??e.title]}}),o.header&&s("div",{class:"v-picker__header"},[o.header()])]),s("div",{class:"v-picker__body"},[(u=o.default)==null?void 0:u.call(o)]),o.actions&&s(Z,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[s("div",{class:"v-picker__actions"},[o.actions()])]})]}})}),{}}}),Ut=O({header:{type:String,default:"$vuetify.datePicker.header"},...xe(),...Ce({weeksInMonth:"static"}),...$(Ve(),["modelValue"]),...$(we(),["modelValue"]),...Te({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),ve=A()({name:"VDatePicker",props:Ut(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:o,slots:d}=t;const a=H(),{t:r}=_t(),l=N(e,"modelValue",void 0,h=>J(h),h=>e.multiple?h:h[0]),u=N(e,"viewMode"),n=D(()=>{var P;const h=a.date((P=l.value)==null?void 0:P[0]);return h&&a.isValid(h)?h:a.date()}),i=ne(Number(e.month??a.getMonth(a.startOfMonth(n.value)))),m=ne(Number(e.year??a.getYear(a.startOfYear(a.setMonth(n.value,i.value))))),p=K(!1),M=D(()=>e.multiple&&l.value.length>1?r("$vuetify.datePicker.itemsSelected",l.value.length):l.value[0]&&a.isValid(l.value[0])?a.format(a.date(l.value[0]),"normalDateWithWeekday"):r(e.header)),v=D(()=>{let h=a.date();return h=a.setDate(h,1),h=a.setMonth(h,i.value),h=a.setYear(h,m.value),a.format(h,"monthAndYear")}),y=D(()=>`date-picker-header${p.value?"-reverse":""}-transition`),k=D(()=>{const h=a.date(e.min);return e.min&&a.isValid(h)?h:null}),b=D(()=>{const h=a.date(e.max);return e.max&&a.isValid(h)?h:null}),_=D(()=>{if(e.disabled)return!0;const h=[];if(u.value!=="month")h.push("prev","next");else{let P=a.date();if(P=a.setYear(P,m.value),P=a.setMonth(P,i.value),k.value){const I=a.addDays(a.startOfMonth(P),-1);a.isAfter(k.value,I)&&h.push("prev")}if(b.value){const I=a.addDays(a.endOfMonth(P),1);a.isAfter(I,b.value)&&h.push("next")}}return h});function c(){i.value<11?i.value++:(m.value++,i.value=0,B(m.value)),R(i.value)}function x(){i.value>0?i.value--:(m.value--,i.value=11,B(m.value)),R(i.value)}function T(){u.value="month"}function C(){u.value=u.value==="months"?"month":"months"}function W(){u.value=u.value==="year"?"month":"year"}function R(h){u.value==="months"&&C(),o("update:month",h)}function B(h){u.value==="year"&&W(),o("update:year",h)}return pe(l,(h,P)=>{const I=J(P),G=J(h);if(!G.length)return;const Q=a.date(I[I.length-1]),L=a.date(G[G.length-1]),Y=a.getMonth(L),S=a.getYear(L);Y!==i.value&&(i.value=Y,R(i.value)),S!==m.value&&(m.value=S,B(m.value)),p.value=a.isBefore(Q,L)}),E(()=>{const h=he.filterProps(e),P=ie.filterProps(e),I=de.filterProps(e),G=ue.filterProps(e),Q=$(ce.filterProps(e),["modelValue"]),L=$(me.filterProps(e),["modelValue"]),Y={header:M.value,transition:y.value};return s(he,V(h,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var S;return((S=d.title)==null?void 0:S.call(d))??s("div",{class:"v-date-picker__title"},[r(e.title)])},header:()=>d.header?s(Z,{defaults:{VDatePickerHeader:{...Y}}},{default:()=>{var S;return[(S=d.header)==null?void 0:S.call(d,Y)]}}):s(de,V({key:"header"},I,Y,{onClick:u.value!=="month"?T:void 0}),{...d,default:void 0}),default:()=>s(at,null,[s(ie,V(P,{disabled:_.value,text:v.value,"onClick:next":c,"onClick:prev":x,"onClick:month":C,"onClick:year":W}),null),s(He,{hideOnLeave:!0},{default:()=>[u.value==="months"?s(ce,V({key:"date-picker-months"},Q,{modelValue:i.value,"onUpdate:modelValue":[S=>i.value=S,R],min:k.value,max:b.value,year:m.value}),null):u.value==="year"?s(me,V({key:"date-picker-years"},L,{modelValue:m.value,"onUpdate:modelValue":[S=>m.value=S,B],min:k.value,max:b.value}),null):s(ue,V({key:"date-picker-month"},G,{modelValue:l.value,"onUpdate:modelValue":S=>l.value=S,month:i.value,"onUpdate:month":[S=>i.value=S,R],year:m.value,"onUpdate:year":[S=>m.value=S,B],min:k.value,max:b.value}),null)]})]),actions:d.actions})}),{}}}),jt={name:"ChatApp",components:{MutualFundAnalysis:st,GoogleSignIn:_e,StockWatchList:Yt},data(){return{messages:[],userInput:"",isLoading:!1,showError:!1,errorMessage:"",stocks:[],selectedStocks:[],portfolio:[],compareData:{},inserts:[],deletes:[],fromDate:new Date,toDate:new Date,selectedPeriod:"yesterday",showCustomDatePicker:!1,dateRangePeriods:[{text:"Yesterday",value:"yesterday"},{text:"Last 7 Days",value:"last7"},{text:"Last 15 Days",value:"last15"},{text:"Custom",value:"custom"}],searchText:"",title:"Stocks Helper Agent",subTitles:["Ask what Google/ChatGPT cannot answer. E.g.","Which companies reported insider trades in last one month","Last one month, which companies made preferential offer announcements","** Trained on Indian data, can make mistakes"],userInputLabel:"This is an AI tool. Double Check",debug:!1,distilledModel:"analysis_reasoning",announcementHeaders:[{text:"Sentiment",value:"sentiment"}],announcements:[],insiderTrades:[],candles:[]}},watch:{async loggedInGoogle(e){},async userGoogle(e){e&&e.email&&(this.stocks.length===0&&await this.getStocks(),await this.getUserStockPortfolio())}},computed:{...Fe(["loggedInGoogle","userGoogle"]),dateRangeText(){return`${this.fromDate} to ${this.toDate}`}},methods:{async getAnnouncements(){try{const e=await this.$apollo.query({query:ot,variables:{fromDate:this.fromDate.toISOString().split("T")[0],toDate:this.toDate.toISOString().split("T")[0],fromDateTime:this.fromDate.toISOString(),toDateTime:this.toDate.toISOString(),email:this.userGoogle.email},fetchPolicy:"no-cache"});console.log(new Date,"getAnnouncements",this.fromDate.toISOString().split("T")[0],this.toDate.toISOString().split("T")[0],e);const t=this.extractArraysFromResponse(e);this.announcements=t.announcements,this.insiderTrades=t.insiderTrades,this.candles=t.candles}catch(e){console.error(e)}},extractArraysFromResponse(e){const t=e.data.portfolio_stocks,o=[],d=[],a=[];return t.forEach(r=>{const l=r.stock,u=l.company_name;l.stock_announcements.forEach(n=>{o.push({company_name:u,announcement_date:n.announcement_date,announcement_text_summary:n.announcement_text_summary,announcement_impact:n.announcement_impact,announcement_document_link:n.announcement_document_link,announcement_sentiment:Ot[n.announcement_sentiment]})}),l.insider_trades.forEach(n=>{d.push({company_name:u,intimation_date:n.intimation_date,name_of_insider:n.name_of_insider,number_of_securities_transacted:n.number_of_securities_transacted,number_of_securities_after_transaction:n.number_of_securities_after_transaction,number_of_securities_before_transaction:n.number_of_securities_before_transaction,type_of_security:bt[n.type_of_security],shareholding_before_transaction:n.shareholding_before_transaction,shareholding_after_transaction:n.shareholding_after_transaction,mode_of_transaction:xt[n.mode_of_transaction],transaction_type:Vt[n.transaction_type],category_of_insider:pt[n.category_of_insider]})}),l.stock_price_dailies.forEach(n=>{n.open!==void 0&&a.push({company_name:u,open:n.open,high:n.high,low:n.low,volume:n.volume,price_date:n.price_date})})}),{announcements:o,insiderTrades:d,candles:a}},customFilter(e,t){const o=e.toLowerCase();return t.toLowerCase().split(/\s+/).every(r=>o.includes(r))},formatDate(e){return e.toISOString().substr(0,10)},handlePeriodChange(){switch(this.selectedPeriod){case"today":this.fromDate=new Date,this.toDate=new Date,this.showCustomDatePicker=!1;break;case"yesterday":const e=new Date;e.setDate(e.getDate()-1),this.fromDate=e,this.toDate=e,console.log("Yday",this.fromDate,this.toDate),this.showCustomDatePicker=!1;break;case"last7":this.toDate=new Date;const t=new Date;t.setDate(t.getDate()-6),this.fromDate=t,this.showCustomDatePicker=!1;break;case"last15":this.toDate=new Date;const o=new Date;o.setDate(o.getDate()-14),this.fromDate=o,this.showCustomDatePicker=!1;break;case"custom":this.fromDate=new Date,this.toDate=new Date,this.showCustomDatePicker=!0;break}},async updateWatchList(){const e=new Set(this.portfolio.map(a=>a.id)),t=new Set(this.selectedStocks.map(a=>a.id)),o=this.selectedStocks.filter(a=>!e.has(a.id)),d=this.portfolio.filter(a=>!t.has(a.id));for(const[a,r]of o.entries())try{const l=await this.$apollo.query({query:rt,variables:{object:{stock_id:r.id,user:{data:{email:this.userGoogle.email,google_id:this.userGoogle.uid},on_conflict:{constraint:"users_email_key",update_columns:["email"]}}}},fetchPolicy:"no-cache"})}catch(l){console.error(l)}for(const[a,r]of d.entries())try{const l=await this.$apollo.query({query:lt,variables:{stock_id:r.id,email:this.userGoogle.email},fetchPolicy:"no-cache"})}catch(l){console.error(l)}},async getUserStockPortfolio(){if(this.userGoogle.email)try{const e=await this.$apollo.query({query:it,variables:{email:this.userGoogle.email}});this.selectedStocks=e.data.portfolio_stocks.map(t=>({id:t.stock.id,company_name:t.stock.company_name})),this.portfolio=this.selectedStocks}catch(e){console.error(e)}},async getStocks(){try{let e=await this.$apollo.query({query:dt,variables:{},fetchPolicy:"no-cache"});this.stocks=e.data.stock}catch(e){console.error(e)}},handleSearch(e){this.searchText=e},handleStockSelection(e){},scrollToBottom(){const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)}},async mounted(){const e=new Date;e.setDate(e.getDate()-1),this.fromDate=e,this.toDate=e,this.stocks.length==0&&this.userGoogle&&await this.getStocks()}};function Ht(e,t,o,d,a,r){const l=_e,u=ge("stock-watch-list");return j(),q(qe,null,{default:f(()=>[s(Ze,{fluid:"",class:"fill-height pa-0"},{default:f(()=>[s(X,{"no-gutters":"",class:"fill-height"},{default:f(()=>[s(U,{cols:"12"},{default:f(()=>[e.loggedInGoogle===!0?(j(),q(F,{key:0},{default:f(()=>[g("Welcome "+te(e.userGoogle.displayName),1)]),_:1})):le("",!0),s(ke,null,{default:f(()=>[s(ae,{class:"subtitle-wrap"},{default:f(()=>t[6]||(t[6]=[g("We are NOT registered with SEBI. We do not execute any trades, or take any deposits.")])),_:1}),s(ae,{class:"subtitle-wrap"},{default:f(()=>t[7]||(t[7]=[g("No Investment advice. Only providing DIY query tools.")])),_:1}),s(l),s(F,null,{default:f(()=>[s(w,{onClick:r.updateWatchList,color:"primary"},{default:f(()=>t[8]||(t[8]=[g("Update Watch List")])),_:1},8,["onClick"]),s(ut,{modelValue:a.selectedStocks,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.selectedStocks=n),r.handleStockSelection],items:a.stocks,"item-title":"company_name","custom-filter":r.customFilter,"item-value":"id",label:"Select Stocks "+(a.selectedStocks.length?`(${a.selectedStocks.length} selected)`:""),multiple:"",chips:"","closable-chips":"","persistent-hint":"",search:a.searchText,"onUpdate:search":r.handleSearch,"return-object":""},{chip:f(({props:n,item:i})=>[s(Ke,V(n,{text:i.raw.company_name,variant:"elevated"}),{default:f(()=>[s(ze,{start:""},{default:f(()=>t[9]||(t[9]=[g("$mdiChartLine")])),_:1}),g(" "+te(i.raw.company_name),1)]),_:2},1040,["text"])]),_:1},8,["modelValue","items","custom-filter","label","onUpdate:modelValue","search","onUpdate:search"])]),_:1}),s(F,null,{default:f(()=>[s(X,null,{default:f(()=>[s(U,{cols:"12",sm:"4"},{default:f(()=>[s(Je,{modelValue:a.selectedPeriod,"onUpdate:modelValue":[t[1]||(t[1]=n=>a.selectedPeriod=n),r.handlePeriodChange],items:a.dateRangePeriods,"item-title":"text","item-value":"value",label:"Select Period"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),a.showCustomDatePicker?(j(),q(U,{key:0,cols:"12",sm:"8"},{default:f(()=>[s(X,null,{default:f(()=>[s(U,{cols:"12",sm:"6"},{default:f(()=>[s(ve,{"show-adjacent-months":"",modelValue:a.fromDate,"onUpdate:modelValue":t[2]||(t[2]=n=>a.fromDate=n)},null,8,["modelValue"])]),_:1}),s(U,{cols:"12",sm:"6"},{default:f(()=>[s(ve,{"show-adjacent-months":"",modelValue:a.toDate,"onUpdate:modelValue":t[3]||(t[3]=n=>a.toDate=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):le("",!0)]),_:1}),s(w,{onClick:r.getAnnouncements,color:"primary"},{default:f(()=>t[10]||(t[10]=[g("Fetch")])),_:1},8,["onClick"]),s(u,{announcements:a.announcements,insiderTrades:a.insiderTrades,candles:a.candles},null,8,["announcements","insiderTrades","candles"])]),_:1})]),_:1})]),_:1})]),_:1}),s($e,{modelValue:a.showError,"onUpdate:modelValue":t[5]||(t[5]=n=>a.showError=n),color:"error",timeout:"3000"},{action:f(({attrs:n})=>[s(w,V({text:""},n,{onClick:t[4]||(t[4]=i=>a.showError=!1)}),{default:f(()=>t[11]||(t[11]=[g(" Close ")])),_:2},1040)]),default:f(()=>[g(te(a.errorMessage)+" ",1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}const Zt=se(jt,[["render",Ht],["__scopeId","data-v-57c3e172"]]);export{Zt as default};
//# sourceMappingURL=Stocks-BNHNASKz.js.map
