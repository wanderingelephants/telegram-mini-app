{"version":3,"file":"MutualFund-BSaSFHZO.js","sources":["../../src/views/MutualFund.vue"],"sourcesContent":["<template>\n<v-responsive>\n  <v-container fluid class=\"fill-height pa-0\">\n    <v-row no-gutters class=\"fill-height\">\n      <v-col\n            cols=\"12\"\n            md=\"6\"\n            order=\"first\"\n            order-md=\"first\"\n            class=\"left-panel\"\n            \n          >\n          \n              <!--<google-sign-in/>  -->\n       <prompt-chat :distilledModel=\"distilledModel\" :title=\"title\" :subTitles=\"subTitles\" :userInputLabel=\"userInputLabel\" :debug=\"debug\"></prompt-chat>\n      \n              \n      </v-col>\n      <v-col cols=\"12\" md=\"6\" order=\"last\" order-md=\"last\" class=\"right-panel\">\n        <v-card-text v-if=\"loggedInGoogle === true\">Welcome {{userGoogle.displayName}}</v-card-text>\n            <v-card>\n              <v-card-title>We are NOT registered with SEBI.</v-card-title>\n              <v-card-title class=\"subtitle-wrap\">No Investment advice. Only providing DIY query tools.</v-card-title>\n              <v-card-title class=\"subtitle-wrap\">Select 2 or More Funds</v-card-title>\n              <v-card-subtitle class=\"subtitle-wrap\">\n                Reduce Overlap\n              </v-card-subtitle>\n              <v-card-subtitle class=\"subtitle-wrap\">\n                Fee of ETFs can be 10X lower than Mutual Funds. \n                <a href=\"/etfList\">See ETFs</a>\n              </v-card-subtitle>\n              <v-card-text class=\"pb-0\">\n                <v-chip\n                  v-for=\"type in analysisTypes\"\n                  :key=\"type.name\"\n                  class=\"me-2 mb-2\"\n                  :color=\"type.color\"\n                  variant=\"outlined\"\n                >\n                  <v-icon start>{{ type.icon }}</v-icon>\n                  {{ type.name }}\n                </v-chip>\n              </v-card-text>\n              <v-card-text>\n                <v-btn :disabled=\"selectedFunds.length <= 1\" @click=\"sendCompare(selectedFunds)\" color=\"amber\">Compare</v-btn>\n              \n                <v-autocomplete\n                  v-model=\"selectedFunds\"\n                  :items=\"fundList\"\n                  item-title=\"displayName\"\n                  :custom-filter=\"customFilter\"\n                  item-value=\"name\"\n                  :label=\"'Select Mutual Funds ' + (selectedFunds.length ? `(${selectedFunds.length} selected)` : '')\"\n                  multiple\n                  chips\n                  closable-chips\n                  persistent-hint\n                  hint=\"Partial match works while typing e.g. 'Motilal Small'\"\n                  @update:model-value=\"handleFundSelection\"\n                  :search=\"searchText\"\n                  @update:search=\"handleSearch\"\n                >\n                  <template v-slot:chip=\"{ props, item }\">\n                    <v-chip\n                      v-bind=\"props\"\n                      :text=\"item.raw.name\"\n                      variant=\"elevated\"\n                    >\n                      <v-icon start>mdi-chart-line</v-icon>\n                      {{ item.raw.name }}\n                    </v-chip>\n                  </template>\n                </v-autocomplete>\n                </v-card-text>\n              <mutual-fund-analysis :analysisReport=\"compareData\" v-if=\"compareData.overlaps\"></mutual-fund-analysis>\n            </v-card>\n        </v-col> \n    </v-row>\n\n    <!-- Error Snackbar -->\n    <v-snackbar\n      v-model=\"showError\"\n      color=\"error\"\n      timeout=\"3000\"\n    >\n      {{ errorMessage }}\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn\n          text\n          v-bind=\"attrs\"\n          @click=\"showError = false\"\n        >\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n  </v-container>\n</v-responsive>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\n//import GoogleSignIn from '../components/GoogleSignIn'\nimport api from './api'\nimport MutualFundAnalysis from '../components/MutualFundAnalysis.vue'\nimport PromptChat from \"./PromptChat.vue\"\n\nexport default {\n  name: 'ChatApp',\n  components: {\n    MutualFundAnalysis, PromptChat\n  },  \n  data() {\n    return {\n      messages: [],\n      userInput: '',\n      isLoading: false,\n      showError: false,\n      errorMessage: '',\n      fundList: [],\n      selectedFunds: [],\n      portfolio: [],\n      compareData: {},\n      searchText: '',\n      title: 'Mutual Fund Helper Agent',\n      subTitles: ['Ask what Google/ChatGPT cannot answer. E.g.', 'Find - किन म्यूचुअल फंडों में रिटर्न 20% से अधिक है, शुल्क 0.5% से कम है', 'Stock Discovery - Which stocks are present in only 1 small cap fund', 'Reasoning - Define Churn as stocks bought plus stocks sold in a fund. Which funds had highest churn', '** Trained on Indian data, can make mistakes'],\n      userInputLabel: \"This is an AI tool. Double Check\",\n      debug: false,\n      distilledModel: \"analysis_reasoning\",\n      analysisTypes: [\n      {\n        name: 'Overlap',\n        color: 'primary',\n        icon: 'mdi-compare'\n      },\n      {\n        name: 'Diversification',\n        color: 'success',\n        icon: 'mdi-chart-pie'\n      },\n      {\n        name: 'Performance',\n        color: 'info',\n        icon: 'mdi-chart-line'\n      },\n      {\n        name: 'Fees',\n        color: 'warning',\n        icon: 'mdi-alert-circle-outline'\n      }\n    ]\n    \n    }\n  },\n  computed: mapState([\n    // map this.count to store.state.count\n    \"loggedInGoogle\",\n    \"userGoogle\",\n  ]),\n  methods: {\n    customFilter(item, queryText) {\n      const itemText = item.toLowerCase()\n      const searchText = queryText.toLowerCase()\n      const searchWords = searchText.split(/\\s+/)\n      return searchWords.every(word => itemText.includes(word))\n  },\n    async fetchFundList(){\n      try {\n        const response = await api.get('/api/mutualfunds/list')\n        this.fundList = response.data.map(m => {\n          let returnsLabel = m.return_3Y ? \" (3 Y Returns \" +m.return_3Y + \" %)\" : \"\"\n          for (let i=1; i<=m.star_rating; i++) returnsLabel += \"⭐\";\n          return {\n            \"name\": m.name,\n            \"displayName\": m.name +  returnsLabel\n          }\n        })\n      } catch (error) {\n        console.error('Error fetching fund list:', error)\n      }\n    },\n    \n    async sendCompare(){\n      try {\n        const response = await api.post('/api/mutualfunds/compare', {\n         \"fundList\": this.selectedFunds\n        })\n        this.compareData = response.data\n      \n      } catch (error) {\n        console.error('Error in sendCompare:', error)\n      }\n    },\n    handleSearch(val) {\n      // The search text will be available in 'val'\n      this.searchText = val;\n    },\n    handleFundSelection(value){\n      //this.searchText = \"\"\n      this.portfolio.value = value.map(name => {\n        const fund = this.fundList.find(f => f.name === name)\n        return {\n          ...fund,\n          currentValue: '',\n          investedDate: '',\n          investedAmount: ''\n        }\n      })\n      \n    },\n    \n    scrollToBottom() {\n      const container = this.$refs.messagesContainer;\n      if (container) {\n        container.scrollTop = container.scrollHeight;\n      }\n    }\n  },\n\n  async mounted() {   \n\t  if (this.fundList.length == 0)\n    await this.fetchFundList()\n  }\n}\n</script>\n<style scoped>\n.message-content {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  word-break: break-word;\n  overflow-wrap: break-word;\n  line-height: 1.5;\n  max-width: 100%;\n}\n.subtitle-wrap {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  word-break: break-word;\n  overflow-wrap: break-word;\n}\n.max-width-75 {\n  max-width: 75%;\n}\n\n/* Add these styles if you want to preserve specific formatting */\n.v-list-item-content {\n  width: 100%;\n}\n\n.v-list-item {\n  align-items: flex-start;\n}\n.max-width-75 {\n  max-width: 75%;\n}\n\n.text-wrap {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n/* Custom scrollbar styles */\n.overflow-y-auto {\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\n}\n\n.overflow-y-auto::-webkit-scrollbar {\n  width: 6px;\n}\n\n.overflow-y-auto::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.overflow-y-auto::-webkit-scrollbar-thumb {\n  background-color: rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n}\n.left-panel {\n  height: 100vh;\n  position: sticky;\n  top: 0;\n  overflow-y: auto;\n}\n\n.right-panel {\n  height: 100vh;\n  overflow-y: auto;\n}\n\n@media (max-width: 960px) {\n  .left-panel {\n    height: auto;\n    position: relative;\n  }\n}\n</style>"],"names":["_sfc_main","MutualFundAnalysis","PromptChat","mapState","item","queryText","itemText","word","response","api","m","returnsLabel","error","val","value","name","f","container","_createBlock","_component_v_responsive","_withCtx","_createVNode","_component_v_container","_component_v_row","_component_v_col","_component_prompt_chat","$data","_ctx","_openBlock","_component_v_card_text","_createTextVNode","_toDisplayString","_createCommentVNode","_component_v_card","_component_v_card_title","_cache","_component_v_card_subtitle","_createElementVNode","_createElementBlock","_Fragment","_renderList","type","_component_v_chip","_component_v_icon","_component_v_btn","$event","$options","_component_v_autocomplete","props","_mergeProps","_component_mutual_fund_analysis","_component_v_snackbar","attrs"],"mappings":"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"}