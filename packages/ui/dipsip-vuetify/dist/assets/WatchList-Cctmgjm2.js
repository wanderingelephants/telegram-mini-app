import{_ as oe,g as Ie,i as $,f as ne,Z as le,p as A,$ as Ne,A as re,a0 as ye,a1 as ee,a2 as Ye,W as Ee,v as We,a3 as Re,a4 as Be,u as Ue,a5 as je,a6 as Ge,X as Le,w as Fe,a7 as He,a8 as qe,z as Ke,a9 as ze,t as _e,m as $e,aa as Je,ab as Ze,ac as Qe,s as Xe,d as q,e as E,n as et,j as tt,r as ie,V as at}from"./index-CRmyQe2x.js";import{A as nt}from"./apexcharts-3z0-31-X.js";import{a0 as ge,N as I,O as j,P as f,m as s,Q as p,S as pe,R as N,c as D,d as se,s as J,w as De,a as be,n as M,z as st,A as ot,E as Pe,F as xe,V as z,$ as ae,U as rt}from"./vue-DHJw1o5t.js";import{M as lt}from"./MutualFundAnalysis-B-3xJitw.js";import{p as T,J as Z,g as Y,f as R,Z as it,aK as K,B as W,G as Q,aL as ut,ax as Se,o as Ve,ak as dt,T as ct,m as mt,b as ft,d as vt,a0 as X,W as ht}from"./vuetify-CElno0QY.js";import"./VTabs-BlZ4QRSd.js";const kt={Promoters:1,"Key Management Personnel":2,Relative:3,"-":4,"Promoter Group":5,"Employees/Designated Employees":6,Director:7,Other:8,"Immediate relative":9,"Key Managerial Personnel":10},yt=Object.entries(kt).reduce((e,[t,o])=>(e[o]=t,e),{}),_t={"7(2)":1,"7(3)":2};Object.entries(_t).reduce((e,[t,o])=>(e[o]=t,e),{});const gt={"Equity Shares":1,"Convertible Debentures":2,Warrants:3,"ADR/GDR/FCCB":4},pt=Object.entries(gt).reduce((e,[t,o])=>(e[o]=t,e),{}),Dt={ESOP:1,Gift:2,"Invocation of Pledge":3,"Market Purchase":4,"Market Sale":5,"Off Market":6,Others:7,"Pledge Creation":8,"Preferential Offer":9,"Revokation of Pledge":10,"Scheme of Amalgamation/Merger/Demerger/Arrangement":11,"Inter-se-Transfer":12,"Conversion of security":13,Bonus:14,"-":15},bt=Object.entries(Dt).reduce((e,[t,o])=>(e[o]=t,e),{}),Pt={Buy:1,Sell:2,Pledge:3,"Pledge Revoke":4,"Invocation of Pledge":5},xt=Object.entries(Pt).reduce((e,[t,o])=>(e[o]=t,e),{}),St={NSE:1,BSE:2,MSEI:3,NA:4},Vt={main:0,sme:1};Object.entries(Vt).reduce((e,[t,o])=>(e[o]=t,e),{});Object.entries(St).reduce((e,[t,o])=>(e[o]=t,e),{});const Ct={Not_Specified:-1,Positive:0,Negative:1,Neutral:2},wt=Object.entries(Ct).reduce((e,[t,o])=>(e[o]=t,e),{}),Mt={components:{apexchart:nt},props:{candles:Array},computed:{series(){return[{data:this.candles.map(e=>({x:new Date(e.timestamp),y:[e.open,e.high,e.low,e.close]}))}]},chartOptions(){return{chart:{type:"candlestick",height:350},xaxis:{type:"datetime"},yaxis:{tooltip:{enabled:!0}}}}}};function At(e,t,o,u,a,l){const i=ge("apexchart");return I(),j(ne,null,{default:f(()=>[s(Ie,null,{default:f(()=>t[0]||(t[0]=[p("Stock Price Chart")])),_:1}),s($,null,{default:f(()=>[s(i,{type:"candlestick",options:l.chartOptions,series:l.series},null,8,["options","series"])]),_:1})]),_:1})}const Tt=oe(Mt,[["render",At],["__scopeId","data-v-cc929203"]]),Ot={props:{announcements:Array,insiderTrades:Array,candles:Array},components:{StockPriceChart:Tt},data(){return{announcementHeaders:[{text:"Company",value:"company_name"},{text:"Summary",value:"announcement_text_summary"},{text:"Impact",value:"announcement_impact"},{text:"Signal",value:"announcement_sentiment"},{text:"Date",value:"announcement_date"}]}},computed:{insiderTradeHeaders(){return[{text:"Company",value:"company_name"},{text:"Insider",value:"name_of_insider"},{text:"Category",value:"category_of_insider"},{text:"Type",value:"transaction_type"},{text:"Mode",value:"mode_of_transaction"},{text:"% Pre",value:"shareholding_before_transaction"},{text:"% Post",value:"shareholding_after_transaction"},{text:"Date",value:"intimation_date"}]}}};function It(e,t,o,u,a,l){return I(),pe("div",null,[t[13]||(t[13]=N("h2",null,"Stock Watchlist",-1)),t[14]||(t[14]=N("h3",null,"Announcements",-1)),s(le,{headers:a.announcementHeaders,items:o.announcements},{"header.company_name":f(()=>t[0]||(t[0]=[p("Company")])),"header.announcement_text_summary":f(()=>t[1]||(t[1]=[p("Summary")])),"header.announcement_impact":f(()=>t[2]||(t[2]=[p("Impact")])),"header.announcement_sentiment":f(()=>t[3]||(t[3]=[p("Signal")])),"header.announcement_date":f(()=>t[4]||(t[4]=[p("Date")])),_:1},8,["headers","items"]),t[15]||(t[15]=N("h3",null,"Insider Trades",-1)),s(le,{headers:l.insiderTradeHeaders,items:o.insiderTrades,class:"mb-4"},{"header.company_name":f(()=>t[5]||(t[5]=[p("Company")])),"header.name_of_insider":f(()=>t[6]||(t[6]=[p("Insider")])),"header.category_of_insider":f(()=>t[7]||(t[7]=[p("Category")])),"header.transaction_type":f(()=>t[8]||(t[8]=[p("Type")])),"header.mode_of_transaction":f(()=>t[9]||(t[9]=[p("Mode")])),"header.shareholding_before_transaction":f(()=>t[10]||(t[10]=[p("%Pre")])),"header.shareholding_after_transaction":f(()=>t[11]||(t[11]=[p("%Post")])),"header.intimation_date":f(()=>t[12]||(t[12]=[p("Intimation")])),_:1},8,["headers","items"])])}const Nt=oe(Ot,[["render",It],["__scopeId","data-v-ecdd3a5e"]]),Ce=T({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:Z,default:"$next"},prevIcon:{type:Z,default:"$prev"},modeIcon:{type:Z,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),ue=Y()({name:"VDatePickerControls",props:Ce(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:o}=t;const u=D(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=D(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),l=D(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=D(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function d(){o("click:prev")}function n(){o("click:next")}function r(){o("click:year")}function m(){o("click:month")}return R(()=>s("div",{class:["v-date-picker-controls"]},[s(A,{class:"v-date-picker-controls__month-btn",disabled:u.value,text:e.text,variant:"text",rounded:!0,onClick:m},null),s(A,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:r},null),s(Ne,{key:"mode-spacer"},null),s("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[s(A,{disabled:l.value,icon:e.prevIcon,variant:"text",onClick:d},null),s(A,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:n},null)])])),{}}}),Yt=T({appendIcon:Z,color:String,header:String,transition:String,onClick:it()},"VDatePickerHeader"),de=Y()({name:"VDatePickerHeader",props:Yt(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:o,slots:u}=t;const{backgroundColorClasses:a,backgroundColorStyles:l}=re(e,"color");function i(){o("click")}function d(){o("click:append")}return R(()=>{const n=!!(u.default||e.header),r=!!(u.append||e.appendIcon);return s("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:l.value,onClick:i},[u.prepend&&s("div",{key:"prepend",class:"v-date-picker-header__prepend"},[u.prepend()]),n&&s(ye,{key:"content",name:e.transition},{default:()=>{var m;return[s("div",{key:e.header,class:"v-date-picker-header__content"},[((m=u.default)==null?void 0:m.call(u))??e.header])]}}),r&&s("div",{class:"v-date-picker-header__append"},[u.append?s(ee,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var m;return[(m=u.append)==null?void 0:m.call(u)]}}):s(A,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:d},null)])])}),{}}}),Et=T({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function Wt(e){const t=K(),o=W(e,"modelValue",[],h=>Q(h)),u=D(()=>e.displayValue?t.date(e.displayValue):o.value.length>0?t.date(o.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),a=W(e,"year",void 0,h=>{const y=h!=null?Number(h):t.getYear(u.value);return t.startOfYear(t.setYear(t.date(),y))},h=>t.getYear(h)),l=W(e,"month",void 0,h=>{const y=h!=null?Number(h):t.getMonth(u.value),k=t.setYear(t.startOfMonth(t.date()),t.getYear(a.value));return t.setMonth(k,y)},h=>t.getMonth(h)),i=D(()=>{const h=Number(e.firstDayOfWeek??0);return e.weekdays.map(y=>(y+h)%7)}),d=D(()=>{const h=t.getWeekArray(l.value,e.firstDayOfWeek),y=h.flat(),k=6*7;if(e.weeksInMonth==="static"&&y.length<k){const P=y[y.length-1];let _=[];for(let c=1;c<=k-y.length;c++)_.push(t.addDays(P,c)),c%7===0&&(h.push(_),_=[])}return h});function n(h,y){return h.filter(k=>i.value.includes(t.toJsDate(k).getDay())).map((k,P)=>{const _=t.toISO(k),c=!t.isSameMonth(k,l.value),S=t.isSameDay(k,t.startOfMonth(l.value)),w=t.isSameDay(k,t.endOfMonth(l.value)),V=t.isSameDay(k,l.value);return{date:k,isoDate:_,formatted:t.format(k,"keyboardDate"),year:t.getYear(k),month:t.getMonth(k),isDisabled:C(k),isWeekStart:P%7===0,isWeekEnd:P%7===6,isToday:t.isSameDay(k,y),isAdjacent:c,isHidden:c&&!e.showAdjacentMonths,isStart:S,isSelected:o.value.some(B=>t.isSameDay(k,B)),isEnd:w,isSame:V,localized:t.format(k,"dayOfMonth")}})}const r=D(()=>{const h=t.startOfWeek(u.value,e.firstDayOfWeek),y=[];for(let P=0;P<=6;P++)y.push(t.addDays(h,P));const k=t.date();return n(y,k)}),m=D(()=>{const h=d.value.flat(),y=t.date();return n(h,y)}),g=D(()=>d.value.map(h=>h.length?ut(t,h[0]):null));function C(h){if(e.disabled)return!0;const y=t.date(h);return e.min&&t.isAfter(t.date(e.min),y)||e.max&&t.isAfter(y,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(k=>t.isSameDay(t.date(k),y)):typeof e.allowedDates=="function"?!e.allowedDates(y):!1}return{displayValue:u,daysInMonth:m,daysInWeek:r,genDays:n,model:o,weeksInMonth:d,weekDays:i,weekNumbers:g}}const we=T({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Et()},"VDatePickerMonth"),ce=Y()({name:"VDatePickerMonth",props:we(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:o,slots:u}=t;const a=se(),{daysInMonth:l,model:i,weekNumbers:d}=Wt(e),n=K(),r=J(),m=J(),g=J(!1),C=D(()=>g.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(r.value=i.value[0],i.value.length>1&&(m.value=i.value[i.value.length-1]));const h=D(()=>{const _=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=_});De(l,(_,c)=>{c&&(g.value=n.isBefore(_[0].date,c[0].date))});function y(_){const c=n.startOfDay(_);if(i.value.length===0?r.value=void 0:i.value.length===1&&(r.value=i.value[0],m.value=void 0),!r.value)r.value=c,i.value=[r.value];else if(m.value)r.value=_,m.value=void 0,i.value=[r.value];else{if(n.isSameDay(c,r.value)){r.value=void 0,i.value=[];return}else n.isBefore(c,r.value)?(m.value=n.endOfDay(r.value),r.value=c):m.value=n.endOfDay(c);const S=n.getDiff(m.value,r.value,"days"),w=[r.value];for(let V=1;V<S;V++){const B=n.addDays(r.value,V);w.push(B)}w.push(m.value),i.value=w}}function k(_){const c=i.value.findIndex(S=>n.isSameDay(S,_));if(c===-1)i.value=[...i.value,_];else{const S=[...i.value];S.splice(c,1),i.value=S}}function P(_){e.multiple==="range"?y(_):e.multiple?k(_):i.value=[_]}return()=>s("div",{class:"v-date-picker-month"},[e.showWeek&&s("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&s("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[p("Â ")]),d.value.map(_=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[_]))]),s(ye,{name:C.value},{default:()=>{var _;return[s("div",{ref:a,key:(_=l.value[0].date)==null?void 0:_.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&n.getWeekdays(e.firstDayOfWeek).map(c=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[c])),l.value.map((c,S)=>{const w={props:{onClick:()=>P(c.date)},item:c,i:S};return h.value&&!c.isSelected&&(c.isDisabled=!0),s("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":c.isAdjacent,"v-date-picker-month__day--hide-adjacent":c.isHidden,"v-date-picker-month__day--selected":c.isSelected,"v-date-picker-month__day--week-end":c.isWeekEnd,"v-date-picker-month__day--week-start":c.isWeekStart}],"data-v-date":c.isDisabled?void 0:c.isoDate},[(e.showAdjacentMonths||!c.isAdjacent)&&s(ee,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(c.isSelected||c.isToday)&&!c.isDisabled?e.color:void 0,disabled:c.isDisabled,icon:!0,ripple:!1,text:c.localized,variant:c.isDisabled?c.isToday?"outlined":"text":c.isToday&&!c.isSelected?"outlined":"flat",onClick:()=>P(c.date)}}},{default:()=>{var V;return[((V=u.day)==null?void 0:V.call(u,w))??s(A,w.props,null)]}})])})])]}})])}}),Me=T({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),me=Y()({name:"VDatePickerMonths",props:Me(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:u}=t;const a=K(),l=W(e,"modelValue"),i=D(()=>{let d=a.startOfYear(a.date());return e.year&&(d=a.setYear(d,e.year)),Se(12).map(n=>{const r=a.format(d,"monthShort"),m=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),d)||e.max&&a.isAfter(d,a.startOfMonth(a.date(e.max))));return d=a.getNextMonth(d),{isDisabled:m,text:r,value:n}})});return be(()=>{l.value=l.value??a.getMonth(a.date())}),R(()=>s("div",{class:"v-date-picker-months",style:{height:Ve(e.height)}},[s("div",{class:"v-date-picker-months__content"},[i.value.map((d,n)=>{var g;const r={active:l.value===n,color:l.value===n?e.color:void 0,disabled:d.isDisabled,rounded:!0,text:d.text,variant:l.value===d.value?"flat":"text",onClick:()=>m(n)};function m(C){if(l.value===C){o("update:modelValue",l.value);return}l.value=C}return((g=u.month)==null?void 0:g.call(u,{month:d,i:n,props:r}))??s(A,M({key:"month"},r),null)})])])),{}}}),Ae=T({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),fe=Y()({name:"VDatePickerYears",props:Ae(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:u}=t;const a=K(),l=W(e,"modelValue"),i=D(()=>{const n=a.getYear(a.date());let r=n-100,m=n+52;e.min&&(r=a.getYear(a.date(e.min))),e.max&&(m=a.getYear(a.date(e.max)));let g=a.startOfYear(a.date());return g=a.setYear(g,r),Se(m-r+1,r).map(C=>{const h=a.format(g,"year");return g=a.setYear(g,a.getYear(g)+1),{text:h,value:C}})});be(()=>{l.value=l.value??a.getYear(a.date())});const d=dt();return st(async()=>{var n;await ot(),(n=d.el)==null||n.scrollIntoView({block:"center"})}),R(()=>s("div",{class:"v-date-picker-years",style:{height:Ve(e.height)}},[s("div",{class:"v-date-picker-years__content"},[i.value.map((n,r)=>{var g;const m={ref:l.value===n.value?d:void 0,active:l.value===n.value,color:l.value===n.value?e.color:void 0,rounded:!0,text:n.text,variant:l.value===n.value?"flat":"text",onClick:()=>{if(l.value===n.value){o("update:modelValue",l.value);return}l.value=n.value}};return((g=u.year)==null?void 0:g.call(u,{year:n,i:r,props:m}))??s(A,M({key:"month"},m),null)})])])),{}}}),Rt=ct("v-picker-title"),Te=T({color:String,...Ye(),...mt(),...Ee(),...We(),...Re(),...Be(),...Ue(),...je(),...ft()},"VSheet"),ve=Y()({name:"VSheet",props:Te(),setup(e,t){let{slots:o}=t;const{themeClasses:u}=vt(e),{backgroundColorClasses:a,backgroundColorStyles:l}=re(Pe(e,"color")),{borderClasses:i}=Ge(e),{dimensionStyles:d}=Le(e),{elevationClasses:n}=Fe(e),{locationStyles:r}=He(e),{positionClasses:m}=qe(e),{roundedClasses:g}=Ke(e);return R(()=>s(e.tag,{class:["v-sheet",u.value,a.value,i.value,n.value,m.value,g.value,e.class],style:[l.value,d.value,r.value,e.style]},o)),{}}}),Oe=T({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Te()},"VPicker"),he=Y()({name:"VPicker",props:Oe(),setup(e,t){let{slots:o}=t;const{backgroundColorClasses:u,backgroundColorStyles:a}=re(Pe(e,"color"));return R(()=>{const l=ve.filterProps(e),i=!!(e.title||o.title);return s(ve,M(l,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!o.actions},e.class],style:e.style}),{default:()=>{var d;return[!e.hideHeader&&s("div",{key:"header",class:[u.value],style:[a.value]},[i&&s(Rt,{key:"picker-title"},{default:()=>{var n;return[((n=o.title)==null?void 0:n.call(o))??e.title]}}),o.header&&s("div",{class:"v-picker__header"},[o.header()])]),s("div",{class:"v-picker__body"},[(d=o.default)==null?void 0:d.call(o)]),o.actions&&s(ee,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[s("div",{class:"v-picker__actions"},[o.actions()])]})]}})}),{}}}),Bt=T({header:{type:String,default:"$vuetify.datePicker.header"},...Ce(),...we({weeksInMonth:"static"}),...X(Me(),["modelValue"]),...X(Ae(),["modelValue"]),...Oe({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),ke=Y()({name:"VDatePicker",props:Bt(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:o,slots:u}=t;const a=K(),{t:l}=ht(),i=W(e,"modelValue",void 0,v=>Q(v),v=>e.multiple?v:v[0]),d=W(e,"viewMode"),n=D(()=>{var x;const v=a.date((x=i.value)==null?void 0:x[0]);return v&&a.isValid(v)?v:a.date()}),r=se(Number(e.month??a.getMonth(a.startOfMonth(n.value)))),m=se(Number(e.year??a.getYear(a.startOfYear(a.setMonth(n.value,r.value))))),g=J(!1),C=D(()=>e.multiple&&i.value.length>1?l("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&a.isValid(i.value[0])?a.format(a.date(i.value[0]),"normalDateWithWeekday"):l(e.header)),h=D(()=>{let v=a.date();return v=a.setDate(v,1),v=a.setMonth(v,r.value),v=a.setYear(v,m.value),a.format(v,"monthAndYear")}),y=D(()=>`date-picker-header${g.value?"-reverse":""}-transition`),k=D(()=>{const v=a.date(e.min);return e.min&&a.isValid(v)?v:null}),P=D(()=>{const v=a.date(e.max);return e.max&&a.isValid(v)?v:null}),_=D(()=>{if(e.disabled)return!0;const v=[];if(d.value!=="month")v.push("prev","next");else{let x=a.date();if(x=a.setYear(x,m.value),x=a.setMonth(x,r.value),k.value){const O=a.addDays(a.startOfMonth(x),-1);a.isAfter(k.value,O)&&v.push("prev")}if(P.value){const O=a.addDays(a.endOfMonth(x),1);a.isAfter(O,P.value)&&v.push("next")}}return v});function c(){r.value<11?r.value++:(m.value++,r.value=0,L(m.value)),G(r.value)}function S(){r.value>0?r.value--:(m.value--,r.value=11,L(m.value)),G(r.value)}function w(){d.value="month"}function V(){d.value=d.value==="months"?"month":"months"}function B(){d.value=d.value==="year"?"month":"year"}function G(v){d.value==="months"&&V(),o("update:month",v)}function L(v){d.value==="year"&&B(),o("update:year",v)}return De(i,(v,x)=>{const O=Q(x),F=Q(v);if(!F.length)return;const te=a.date(O[O.length-1]),H=a.date(F[F.length-1]),U=a.getMonth(H),b=a.getYear(H);U!==r.value&&(r.value=U,G(r.value)),b!==m.value&&(m.value=b,L(m.value)),g.value=a.isBefore(te,H)}),R(()=>{const v=he.filterProps(e),x=ue.filterProps(e),O=de.filterProps(e),F=ce.filterProps(e),te=X(me.filterProps(e),["modelValue"]),H=X(fe.filterProps(e),["modelValue"]),U={header:C.value,transition:y.value};return s(he,M(v,{class:["v-date-picker",`v-date-picker--${d.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var b;return((b=u.title)==null?void 0:b.call(u))??s("div",{class:"v-date-picker__title"},[l(e.title)])},header:()=>u.header?s(ee,{defaults:{VDatePickerHeader:{...U}}},{default:()=>{var b;return[(b=u.header)==null?void 0:b.call(u,U)]}}):s(de,M({key:"header"},O,U,{onClick:d.value!=="month"?w:void 0}),{...u,default:void 0}),default:()=>s(xe,null,[s(ue,M(x,{disabled:_.value,text:h.value,"onClick:next":c,"onClick:prev":S,"onClick:month":V,"onClick:year":B}),null),s(ze,{hideOnLeave:!0},{default:()=>[d.value==="months"?s(me,M({key:"date-picker-months"},te,{modelValue:r.value,"onUpdate:modelValue":[b=>r.value=b,G],min:k.value,max:P.value,year:m.value}),null):d.value==="year"?s(fe,M({key:"date-picker-years"},H,{modelValue:m.value,"onUpdate:modelValue":[b=>m.value=b,L],min:k.value,max:P.value}),null):s(ce,M({key:"date-picker-month"},F,{modelValue:i.value,"onUpdate:modelValue":b=>i.value=b,month:r.value,"onUpdate:month":[b=>r.value=b,G],year:m.value,"onUpdate:year":[b=>m.value=b,L],min:k.value,max:P.value}),null)]})]),actions:u.actions})}),{}}}),Ut={name:"ChatApp",components:{MutualFundAnalysis:lt,GoogleSignIn:_e,Announcements:Nt},data(){return{messages:[],userInput:"",isLoading:!1,showError:!1,errorMessage:"",stocks:[],selectedStocks:[],portfolio:[],compareData:{},inserts:[],deletes:[],fromDate:new Date,toDate:new Date,selectedPeriod:"yesterday",showCustomDatePicker:!1,dateRangePeriods:[{text:"Yesterday",value:"yesterday"},{text:"Last 7 Days",value:"last7"},{text:"Last 15 Days",value:"last15"},{text:"Custom",value:"custom"}],searchText:"",title:"Stocks Helper Agent",subTitles:["Ask what Google/ChatGPT cannot answer. E.g.","Which companies reported insider trades in last one month","Last one month, which companies made preferential offer announcements","** Trained on Indian data, can make mistakes"],userInputLabel:"This is an AI tool. Double Check",debug:!1,distilledModel:"analysis_reasoning",announcementHeaders:[{text:"Sentiment",value:"sentiment"}],announcements:[],insiderTrades:[],candles:[],snackbar:{show:!1,message:"",timeout:3e3,color:"orange"}}},watch:{async loggedInGoogle(e){},async userGoogle(e){e&&e.email&&await this.getUserStockPortfolio()}},computed:{...$e(["loggedInGoogle","userGoogle"]),dateRangeText(){return`${this.fromDate} to ${this.toDate}`}},methods:{async removeStockFromPortfolio(e){try{const t=await this.$apollo.query({query:Je,variables:{stock_id:e,email:this.userGoogle.email},fetchPolicy:"no-cache"});this.snackbar.message="Removed",this.snackbar.show=!0,await this.getUserStockPortfolio()}catch(t){console.error(t)}},async getAnnouncements(){try{const e=await this.$apollo.query({query:Ze,variables:{fromDate:this.fromDate.toISOString().split("T")[0],toDate:this.toDate.toISOString().split("T")[0],fromDateTime:this.fromDate.toISOString(),toDateTime:this.toDate.toISOString(),email:this.userGoogle.email},fetchPolicy:"no-cache"}),t=this.extractArraysFromResponse(e);this.announcements=t.announcements,this.insiderTrades=t.insiderTrades,this.candles=t.candles}catch(e){console.error(e)}},extractArraysFromResponse(e){const t=e.data.portfolio_stocks,o=[],u=[],a=[];return t.forEach(l=>{const i=l.stock,d=i.company_name;i.stock_announcements.forEach(n=>{o.push({company_name:d,announcement_date:n.announcement_date,announcement_text_summary:n.announcement_text_summary,announcement_impact:n.announcement_impact,announcement_document_link:n.announcement_document_link,announcement_sentiment:wt[n.announcement_sentiment]})}),i.insider_trades.forEach(n=>{u.push({company_name:d,intimation_date:n.intimation_date,name_of_insider:n.name_of_insider,number_of_securities_transacted:n.number_of_securities_transacted,number_of_securities_after_transaction:n.number_of_securities_after_transaction,number_of_securities_before_transaction:n.number_of_securities_before_transaction,type_of_security:pt[n.type_of_security],shareholding_before_transaction:n.shareholding_before_transaction,shareholding_after_transaction:n.shareholding_after_transaction,mode_of_transaction:bt[n.mode_of_transaction],transaction_type:xt[n.transaction_type],category_of_insider:yt[n.category_of_insider]})}),i.stock_price_dailies.forEach(n=>{n.open!==void 0&&a.push({company_name:d,open:n.open,high:n.high,low:n.low,volume:n.volume,price_date:n.price_date})})}),{announcements:o,insiderTrades:u,candles:a}},customFilter(e,t){const o=e.toLowerCase();return t.toLowerCase().split(/\s+/).every(l=>o.includes(l))},formatDate(e){return e.toISOString().substr(0,10)},handlePeriodChange(){switch(this.selectedPeriod){case"today":this.fromDate=new Date,this.toDate=new Date,this.showCustomDatePicker=!1;break;case"yesterday":const e=new Date;e.setDate(e.getDate()-1),this.fromDate=e,this.toDate=e,this.showCustomDatePicker=!1;break;case"last7":this.toDate=new Date;const t=new Date;t.setDate(t.getDate()-6),this.fromDate=t,this.showCustomDatePicker=!1;break;case"last15":this.toDate=new Date;const o=new Date;o.setDate(o.getDate()-14),this.fromDate=o,this.showCustomDatePicker=!1;break;case"custom":this.fromDate=new Date,this.toDate=new Date,this.showCustomDatePicker=!0;break}},async getUserStockPortfolio(){if(this.userGoogle.email)try{const e=await this.$apollo.query({query:Qe,variables:{email:this.userGoogle.email},fetchPolicy:"no-cache"});this.portfolio=e.data.portfolio_stocks.map(t=>({id:t.company_master.id,company_name:t.company_master.company_name}))}catch(e){console.error(e)}},handleSearch(e){this.searchText=e},handleStockSelection(e){},scrollToBottom(){const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)}},async mounted(){const e=new Date;e.setDate(e.getDate()-1),this.fromDate=e,this.toDate=e,await this.getUserStockPortfolio()}},jt={class:"d-flex align-center justify-space-between"},Gt={class:"text-subtitle-1"},Lt=["onClick"];function Ft(e,t,o,u,a,l){const i=_e,d=ge("announcements");return I(),j(Xe,null,{default:f(()=>[s(at,{fluid:"",class:"fill-height pa-0"},{default:f(()=>[s(q,{"no-gutters":"",class:"fill-height"},{default:f(()=>[s(E,{cols:"12"},{default:f(()=>[e.loggedInGoogle===!0?(I(),j($,{key:0},{default:f(()=>[p("Welcome "+z(e.userGoogle.displayName),1)]),_:1})):ae("",!0),s(ne,null,{default:f(()=>[s(i),s($,null,{default:f(()=>[t[8]||(t[8]=N("div",{class:"text-h6 mb-4"},"Your Watchlist",-1)),s(q,null,{default:f(()=>[(I(!0),pe(xe,null,rt(a.portfolio,n=>(I(),j(E,{key:n.id,cols:"12",sm:"6",md:"4",class:"py-2"},{default:f(()=>[s(ne,{outlined:"",class:"pa-3"},{default:f(()=>[N("div",jt,[N("div",Gt,z(n.company_name),1),N("span",{onClick:r=>l.removeStockFromPortfolio(n.id)},[s(et,{color:"error",start:""},{default:f(()=>t[6]||(t[6]=[p("$mdiDelete")])),_:1})],8,Lt)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),a.portfolio.length===0?(I(),j(q,{key:0},{default:f(()=>[s(E,{cols:"12",class:"text-center"},{default:f(()=>t[7]||(t[7]=[N("div",{class:"text-subtitle-1 grey--text"},"Your watchlist is empty",-1)])),_:1})]),_:1})):ae("",!0)]),_:1}),s($,null,{default:f(()=>[s(q,null,{default:f(()=>[s(E,{cols:"12",sm:"4"},{default:f(()=>[s(tt,{modelValue:a.selectedPeriod,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.selectedPeriod=n),l.handlePeriodChange],items:a.dateRangePeriods,"item-title":"text","item-value":"value",label:"Select Period"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),a.showCustomDatePicker?(I(),j(E,{key:0,cols:"12",sm:"8"},{default:f(()=>[s(q,null,{default:f(()=>[s(E,{cols:"12",sm:"6"},{default:f(()=>[s(ke,{"show-adjacent-months":"",modelValue:a.fromDate,"onUpdate:modelValue":t[1]||(t[1]=n=>a.fromDate=n)},null,8,["modelValue"])]),_:1}),s(E,{cols:"12",sm:"6"},{default:f(()=>[s(ke,{"show-adjacent-months":"",modelValue:a.toDate,"onUpdate:modelValue":t[2]||(t[2]=n=>a.toDate=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):ae("",!0)]),_:1}),s(A,{onClick:l.getAnnouncements,color:"primary"},{default:f(()=>t[9]||(t[9]=[p("Fetch Announcements")])),_:1},8,["onClick"]),s(d,{announcements:a.announcements,insiderTrades:a.insiderTrades,candles:a.candles},null,8,["announcements","insiderTrades","candles"])]),_:1})]),_:1})]),_:1})]),_:1}),s(ie,{modelValue:a.showError,"onUpdate:modelValue":t[4]||(t[4]=n=>a.showError=n),color:"error",timeout:"3000"},{action:f(({attrs:n})=>[s(A,M({text:""},n,{onClick:t[3]||(t[3]=r=>a.showError=!1)}),{default:f(()=>t[10]||(t[10]=[p(" Close ")])),_:2},1040)]),default:f(()=>[p(z(a.errorMessage)+" ",1)]),_:1},8,["modelValue"]),s(ie,{modelValue:a.snackbar.show,"onUpdate:modelValue":t[5]||(t[5]=n=>a.snackbar.show=n),timeout:a.snackbar.timeout,color:a.snackbar.color},{default:f(()=>[p(z(a.snackbar.message),1)]),_:1},8,["modelValue","timeout","color"])]),_:1})]),_:1})}const Zt=oe(Ut,[["render",Ft],["__scopeId","data-v-192ae3f7"]]);export{Zt as default};
//# sourceMappingURL=WatchList-Cctmgjm2.js.map
