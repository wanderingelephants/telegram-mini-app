import{m as Le,a as Ge,b as Oe,c as je,u as ze,d as Ke,e as He,t as T,f as We,g as qe,V as ce,h as Ye,i as Je,j as de,k as Qe,l as Ze,n as Xe,o as fe,p as $e,q as et,r as tt,_ as lt,s as at,v as j,w as nt,x as z,y as R,z as K,A as H,B as st,C as E,D as ve,E as le,F as ae,G as ot,H as ut}from"./index-DbaL0MZI.js";import{d as W,s as U,c as w,w as B,A as me,m as a,F as Y,n as F,Q as h,O as it,P as u,N as ne,R as V,Z as rt,S as ge,_ as be,V as q,$ as ct}from"./vue-Ci2-vDhJ.js";import{p as dt,a0 as ft,g as vt,W as mt,B as he,O as gt,f as bt,av as ht,aI as pt,aw as yt,aJ as kt,G as Ct}from"./vuetify-BlS6c2-T.js";import{V as pe}from"./VDialog-ja4Noyon.js";function wt(e,l,_){if(l==null)return e;if(Array.isArray(l))throw new Error("Multiple matches is not implemented");return typeof l=="number"&&~l?a(Y,null,[a("span",{class:"v-combobox__unmask"},[e.substr(0,l)]),a("span",{class:"v-combobox__mask"},[e.substr(l,_)]),a("span",{class:"v-combobox__unmask"},[e.substr(l+_)])]):e}const Vt=dt({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Le({filterKeys:["title"]}),...Ge({hideNoData:!0,returnObject:!0}),...ft(Oe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...je({transition:!1})},"VCombobox"),xt=vt()({name:"VCombobox",props:Vt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,l){var ue;let{emit:_,slots:r}=l;const{t:s}=mt(),m=W(),y=U(!1),i=U(!0),J=U(!1),se=W(),Q=W(),Z=he(e,"menu"),g=w({get:()=>Z.value,set:t=>{var n;Z.value&&!t&&((n=se.value)!=null&&n.Î¨openChildren.size)||(Z.value=t)}}),f=U(-1);let X=!1;const ye=w(()=>{var t;return(t=m.value)==null?void 0:t.color}),oe=w(()=>g.value?e.closeText:e.openText),{items:ke,transformIn:Ce,transformOut:we}=ze(e),{textColorClasses:Ve,textColorStyles:xe}=Ke(ye),c=he(e,"modelValue",[],t=>Ce(Ct(t)),t=>{const n=we(t);return e.multiple?n:n[0]??null}),M=He(e),N=w(()=>!!(e.chips||r.chip)),S=w(()=>N.value||!!r.selection),D=U(!e.multiple&&!S.value?((ue=c.value[0])==null?void 0:ue.title)??"":""),b=w({get:()=>D.value,set:t=>{var n;if(D.value=t??"",!e.multiple&&!S.value&&(c.value=[T(e,t)]),t&&e.multiple&&((n=e.delimiters)!=null&&n.length)){const v=t.split(new RegExp(`(?:${e.delimiters.join("|")})+`));v.length>1&&(v.forEach(o=>{o=o.trim(),o&&x(T(e,o))}),D.value="")}t||(f.value=-1),i.value=!t}}),Se=w(()=>typeof e.counterValue=="function"?e.counterValue(c.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?c.value.length:b.value.length);B(D,t=>{X?me(()=>X=!1):y.value&&!g.value&&(g.value=!0),_("update:search",t)}),B(c,t=>{var n;!e.multiple&&!S.value&&(D.value=((n=t[0])==null?void 0:n.title)??"")});const{filteredItems:L,getMatches:_e}=We(e,ke,()=>i.value?"":b.value),I=w(()=>e.hideSelected?L.value.filter(t=>!c.value.some(n=>n.value===t.value)):L.value),De=w(()=>c.value.map(t=>t.value)),$=w(()=>{var n;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&b.value===((n=I.value[0])==null?void 0:n.title))&&I.value.length>0&&!i.value&&!J.value}),ee=w(()=>e.hideNoData&&!I.value.length||M.isReadonly.value||M.isDisabled.value),te=W(),Ie=qe(te,m);function Pe(t){X=!0,e.openOnClear&&(g.value=!0)}function Ae(){ee.value||(g.value=!0)}function Fe(t){ee.value||(y.value&&(t.preventDefault(),t.stopPropagation()),g.value=!g.value)}function Te(t){var n;yt(t)&&((n=m.value)==null||n.focus())}function Re(t){var o;if(kt(t)||M.isReadonly.value)return;const n=m.value.selectionStart,v=c.value.length;if((f.value>-1||["Enter","ArrowDown","ArrowUp"].includes(t.key))&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(g.value=!0),["Escape"].includes(t.key)&&(g.value=!1),["Enter","Escape","Tab"].includes(t.key)&&($.value&&["Enter","Tab"].includes(t.key)&&!c.value.some(d=>{let{value:C}=d;return C===I.value[0].value})&&x(L.value[0]),i.value=!0),t.key==="ArrowDown"&&$.value&&((o=te.value)==null||o.focus("next")),t.key==="Enter"&&b.value&&(x(T(e,b.value)),S.value&&(D.value="")),["Backspace","Delete"].includes(t.key)){if(!e.multiple&&S.value&&c.value.length>0&&!b.value)return x(c.value[0],!1);if(~f.value){const d=f.value;x(c.value[f.value],!1),f.value=d>=v-1?v-2:d}else t.key==="Backspace"&&!b.value&&(f.value=v-1)}if(e.multiple){if(t.key==="ArrowLeft"){if(f.value<0&&n>0)return;const d=f.value>-1?f.value-1:v-1;c.value[d]?f.value=d:(f.value=-1,m.value.setSelectionRange(b.value.length,b.value.length))}if(t.key==="ArrowRight"){if(f.value<0)return;const d=f.value+1;c.value[d]?f.value=d:(f.value=-1,m.value.setSelectionRange(0,0))}}}function Ee(){var t;e.eager&&((t=Q.value)==null||t.calculateVisibleItems())}function Ue(){var t;y.value&&(i.value=!0,(t=m.value)==null||t.focus())}function x(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!t||t.props.disabled))if(e.multiple){const v=c.value.findIndex(d=>e.valueComparator(d.value,t.value)),o=n??!~v;if(~v){const d=o?[...c.value,t]:[...c.value];d.splice(v,1),c.value=d}else o&&(c.value=[...c.value,t]);e.clearOnSelect&&(b.value="")}else{const v=n!==!1;c.value=v?[t]:[],D.value=v&&!S.value?t.title:"",me(()=>{g.value=!1,i.value=!0})}}function Be(t){y.value=!0,setTimeout(()=>{J.value=!0})}function Me(t){J.value=!1}function Ne(t){(t==null||t===""&&!e.multiple&&!S.value)&&(c.value=[])}return B(y,(t,n)=>{if(!(t||t===n)&&(f.value=-1,g.value=!1,b.value)){if(e.multiple){x(T(e,b.value));return}if(!S.value)return;c.value.some(v=>{let{title:o}=v;return o===b.value})?D.value="":x(T(e,b.value))}}),B(g,()=>{if(!e.hideSelected&&g.value&&c.value.length){const t=I.value.findIndex(n=>c.value.some(v=>e.valueComparator(v.value,n.value)));gt&&window.requestAnimationFrame(()=>{var n;t>=0&&((n=Q.value)==null||n.scrollToIndex(t))})}}),B(()=>e.items,(t,n)=>{g.value||y.value&&!n.length&&t.length&&(g.value=!0)}),bt(()=>{const t=!!(!e.hideNoData||I.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),n=c.value.length>0,v=ce.filterProps(e);return a(ce,F({ref:m},v,{modelValue:b.value,"onUpdate:modelValue":[o=>b.value=o,Ne],focused:y.value,"onUpdate:focused":o=>y.value=o,validationValue:c.externalValue,counterValue:Se.value,dirty:n,class:["v-combobox",{"v-combobox--active-menu":g.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!S.value,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:M.isReadonly.value,placeholder:n?void 0:e.placeholder,"onClick:clear":Pe,"onMousedown:control":Ae,onKeydown:Re}),{...r,default:()=>a(Y,null,[a(Ye,F({ref:se,modelValue:g.value,"onUpdate:modelValue":o=>g.value=o,activator:"parent",contentClass:"v-combobox__content",disabled:ee.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Ee,onAfterLeave:Ue},e.menuProps),{default:()=>[t&&a(Je,F({ref:te,selected:De.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault(),onKeydown:Te,onFocusin:Be,onFocusout:Me,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Ie,e.listProps),{default:()=>{var o,d,C;return[(o=r["prepend-item"])==null?void 0:o.call(r),!I.value.length&&!e.hideNoData&&(((d=r["no-data"])==null?void 0:d.call(r))??a(de,{title:s(e.noDataText)},null)),a(Qe,{ref:Q,renderless:!0,items:I.value},{default:P=>{var re;let{item:p,index:A,itemRef:k}=P;const ie=F(p.props,{ref:k,key:A,active:$.value&&A===0?!0:void 0,onClick:()=>x(p,null)});return((re=r.item)==null?void 0:re.call(r,{item:p,index:A,props:ie}))??a(de,F(ie,{role:"option"}),{prepend:G=>{let{isSelected:O}=G;return a(Y,null,[e.multiple&&!e.hideSelected?a(Ze,{key:p.value,modelValue:O,ripple:!1,tabindex:"-1"},null):void 0,p.props.prependAvatar&&a(Xe,{image:p.props.prependAvatar},null),p.props.prependIcon&&a(fe,{icon:p.props.prependIcon},null)])},title:()=>{var G,O;return i.value?p.title:wt(p.title,(G=_e(p))==null?void 0:G.title,((O=b.value)==null?void 0:O.length)??0)}})}}),(C=r["append-item"])==null?void 0:C.call(r)]}})]}),c.value.map((o,d)=>{function C(k){k.stopPropagation(),k.preventDefault(),x(o,!1)}const P={"onClick:close":C,onKeydown(k){k.key!=="Enter"&&k.key!==" "||(k.preventDefault(),k.stopPropagation(),C(k))},onMousedown(k){k.preventDefault(),k.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},p=N.value?!!r.chip:!!r.selection,A=p?ht(N.value?r.chip({item:o,index:d,props:P}):r.selection({item:o,index:d})):void 0;if(!(p&&!A))return a("div",{key:o.value,class:["v-combobox__selection",d===f.value&&["v-combobox__selection--selected",Ve.value]],style:d===f.value?xe.value:{}},[N.value?r.chip?a(et,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>[A]}):a($e,F({key:"chip",closable:e.closableChips,size:"small",text:o.title,disabled:o.props.disabled},P),null):A??a("span",{class:"v-combobox__selection-text"},[o.title,e.multiple&&d<c.value.length-1&&a("span",{class:"v-combobox__selection-comma"},[h(",")])])])})]),"append-inner":function(){var P;for(var o=arguments.length,d=new Array(o),C=0;C<o;C++)d[C]=arguments[C];return a(Y,null,[(P=r["append-inner"])==null?void 0:P.call(r,...d),(!e.hideNoData||e.items.length)&&e.menuIcon?a(fe,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:Fe,onClick:pt,"aria-label":s(oe.value),title:s(oe.value),tabindex:"-1"},null):void 0])}})}),tt({isFocused:y,isPristine:i,menu:g,search:b,selectionIndex:f,filteredItems:L,select:x},m)}}),St={components:{},computed:at(["loggedInGoogle","userGoogle"]),watch:{},async mounted(){try{const e=await j.get("/api/nse/instruments");this.etfList=e.data.map(l=>({value:l.symbol,title:"("+l.symbol+") "+l.underlying}))}catch(e){console.log(e)}},data(){return{userInput:"",messages:[],isLoading:!1,selectionCriteriaDialog:!1,etfList:[],etfSelected:[],base_amt:100,base_amtShort:"100",trigger:1,buy_factor:1,snackbar:{show:!1,message:"",timeout:3e3,color:"orange"},showSaveConfigDialog:!1,title:"Your Financial Assistant",subTitles:["Ask about DipSIP and how it is useful"],userInputLabel:"Ask about DipSIP. No Trading tips.",debug:!1,systemPrompt:"dipsip"}},methods:{async sendMessage(){},async saveConfig(){this.showSaveConfigDialog=!0},frameworkParamsChanged(){this.base_amt=this.base_amtShort.indexOf(" k")>-1?this.base_amtShort.substring(0,this.base_amtShort.length-2)*1e3:this.base_amtShort*1},async deleteConfig(){try{(await j.post("/api/db/saveconfig",{tg_id:this.$store.state.userGoogle.tg_id,unsubscribe:!0})).status==200?(this.snackbar.show=!0,this.snackbar.message="Unsubscribed !",this.snackbar.color="success"):(this.snackbar.show=!0,this.snackbar.message="Pls try later !",this.snackbar.color="error")}catch{this.snackbar.show=!0,this.snackbar.message="Pls try later !",this.snackbar.color="error"}},async handleTelegramAuth(e){try{const l=await j.post("/api/telegram/auth",{userTG:e,userGoogle:this.userGoogle}),{token:_,userRecord:r,configRecord:s}=l.data;if(this.accountExpiry=new Date(r.expiry_date),s){if(s.base_amt&&(this.base_amt=s.base_amt,this.base_amtShort=this.base_amt/1e3+" k"),s.trigger&&(this.trigger=s.trigger),s.buy_factor&&(this.buy_factor=s.buy_factor),s.instrument){this.etfSelected=[];const m=s.instrument.split(",");for(const y of m)this.etfSelected.push(this.etfList.find(i=>i.value===y.trim()))}}else console.log("No User Config Saved so far")}catch(l){console.error("Authentication failed:",l)}},async saveConfigApi(){this.showSaveConfigDialog=!1;try{const e=localStorage.getItem("jwt");(await j.post("/api/db/saveconfig",{tg_id:this.userGoogle.tg_id,trigger:this.trigger,base_amt:this.base_amt,buy_factor:this.buy_factor,instrument:this.etfSelected.map(_=>_.value).join(", ")},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).status==200?(this.snackbar.show=!0,this.snackbar.message="Params Saved",this.snackbar.color="success"):(this.snackbar.show=!0,this.snackbar.message="Params Not Saved",this.snackbar.color="error")}catch{this.snackbar.show=!0,this.snackbar.message="Params Not Saved",this.snackbar.color="error"}},scrollToBottom(){const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)}}};function _t(e,l,_,r,s,m){const y=ct("v-card-action");return ne(),it(nt,{fluid:"",class:"fill-height pa-0"},{default:u(()=>[a(ut,null,{default:u(()=>[a(z,{"no-gutters":"",class:"fill-height"},{default:u(()=>[a(R),a(R,{cols:"12",md:"6",order:"first","order-md":"first",class:"left-panel"},{default:u(()=>[a(K,{class:"fill-height d-flex flex-column ma-2"},{default:u(()=>[a(H,{class:"text-wrap"},{default:u(()=>l[11]||(l[11]=[h("Regret Buying on Highs ?")])),_:1}),a(st,null,{default:u(()=>l[12]||(l[12]=[h("Try DipSIP. A proven contra strategy.")])),_:1}),a(E,{class:"d-flex align-center flex-wrap"},{default:u(()=>[l[13]||(l[13]=V("span",null,"Select ETFs below, Invest Rs.",-1)),a(ve,{theme:"light","onUpdate:menu":m.frameworkParamsChanged,modelValue:s.base_amtShort,"onUpdate:modelValue":l[0]||(l[0]=i=>s.base_amtShort=i),items:["100","1 k","2 k","5 k","10 k","20 k","50 k"],variant:"underlined",label:"",class:"mx-1 mb-4",style:{"max-width":"70px","min-width":"50px"},density:"compact","hide-details":""},null,8,["onUpdate:menu","modelValue"]),l[14]||(l[14]=V("span",null,"in each, whenever they dip by more than",-1)),a(ve,{theme:"light",label:"","max-width":"40px","onUpdate:menu":m.frameworkParamsChanged,modelValue:s.trigger,"onUpdate:modelValue":l[1]||(l[1]=i=>s.trigger=i),items:["1","2","3","4","5"],variant:"underlined",class:"mx-1 mb-4",density:"compact","hide-details":""},null,8,["onUpdate:menu","modelValue"]),l[15]||(l[15]=V("span",null," %, any day.",-1))]),_:1}),a(z,{"no-gutters":"",class:"mt-2"},{default:u(()=>[a(R,{cols:"12"},{default:u(()=>[a(K,{class:"pb-2",color:"amber",theme:"light","max-width":"100%"},{default:u(()=>[a(H,{class:"d-flex justify-space-between align-center"},{default:u(()=>[l[16]||(l[16]=h(" Select Your ETFs ")),V("a",{href:"#",onClick:l[2]||(l[2]=rt(i=>s.selectionCriteriaDialog=!0,["prevent"])),class:"text-right text-decoration-none"}," Selection Criteria ")]),_:1}),a(xt,{multiple:"",modelValue:s.etfSelected,"onUpdate:modelValue":l[3]||(l[3]=i=>s.etfSelected=i),items:s.etfList,variant:"outlined"},null,8,["modelValue","items"]),a(pe,{modelValue:s.selectionCriteriaDialog,"onUpdate:modelValue":l[5]||(l[5]=i=>s.selectionCriteriaDialog=i),width:"500"},{default:u(()=>[a(K,{class:"pb-2",color:"amber",theme:"light","max-width":"100%"},{default:u(()=>[a(H,{class:"text-h5 grey lighten-2"},{default:u(()=>l[17]||(l[17]=[h(" Selection Criteria ")])),_:1}),a(y,null,{default:u(()=>[a(le,{class:"v-btn v-theme--light text-primary v-btn--density-default v-btn--size-default v-btn--variant-outlined",block:"",onClick:l[4]||(l[4]=i=>s.selectionCriteriaDialog=!1)},{default:u(()=>l[18]||(l[18]=[h("Close")])),_:1})]),_:1}),a(E,{class:"mt-4"},{default:u(()=>l[19]||(l[19]=[V("ul",null,[V("li",null," One of the core objectives of this Platform is to declutter and filter the investment options for end users. "),V("li",null," With more than 2500 Mutual Fund schemes alone, it is tough to filter. Cost comes later. "),V("li",null," We believe Passive Investments offer best risk adjusted returns over long term. "),V("li",null," Hence, we will present to users well-researched ETFs, which are low cost, liquid and there is public data to analyze them. "),V("li",null,[h(" See section "),V("a",{href:"etfList"},"ETFs"),h(" for more details ")])],-1)])),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ae,null,{default:u(()=>[e.loggedInGoogle==!0&&e.userGoogle.tg_id!==""?(ne(),ge("button",{key:0,onClick:l[6]||(l[6]=(...i)=>m.saveConfig&&m.saveConfig(...i)),class:"v-btn v-theme--light text-primary v-btn--density-default v-btn--size-default v-btn--variant-outlined"}," Save ")):be("",!0),e.loggedInGoogle==!0&&e.userGoogle.tg_id!==""?(ne(),ge("button",{key:1,onClick:l[7]||(l[7]=(...i)=>m.deleteConfig&&m.deleteConfig(...i)),class:"v-btn v-theme--light text-primary v-btn--density-default v-btn--size-default v-btn--variant-outlined"}," Unsubscribe ")):be("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),a(z,{"no-gutters":"",class:"mt-1"},{default:u(()=>[a(pe,{modelValue:s.showSaveConfigDialog,"onUpdate:modelValue":l[9]||(l[9]=i=>s.showSaveConfigDialog=i),"max-width":"430px"},{default:u(()=>[a(K,{theme:"light",color:"secondary",dense:""},{default:u(()=>[a(H,{class:"d-flex justify-space-between align-center"},{default:u(()=>l[20]||(l[20]=[h(" Confirm Your Parameters ")])),_:1}),a(z,null,{default:u(()=>[a(R,{cols:"4"},{default:u(()=>[a(E,null,{default:u(()=>[h("Amount: "+q(s.base_amt),1)]),_:1})]),_:1}),a(R,{cols:"4"},{default:u(()=>[a(E,null,{default:u(()=>[h("Trigger: "+q(s.trigger),1)]),_:1})]),_:1})]),_:1}),a(E,null,{default:u(()=>[h("ETFs: "+q(s.etfSelected.map(i=>i.title).join(", ")),1)]),_:1}),a(ae,null,{default:u(()=>[a(le,{block:"",onClick:m.saveConfigApi},{default:u(()=>l[21]||(l[21]=[h("Save")])),_:1},8,["onClick"])]),_:1}),a(ae,null,{default:u(()=>[a(le,{block:"",onClick:l[8]||(l[8]=i=>s.showSaveConfigDialog=!1)},{default:u(()=>l[22]||(l[22]=[h("Cancel")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ot,{modelValue:s.snackbar.show,"onUpdate:modelValue":l[10]||(l[10]=i=>s.snackbar.show=i),timeout:s.snackbar.timeout,color:s.snackbar.color},{default:u(()=>[h(q(s.snackbar.message),1)]),_:1},8,["modelValue","timeout","color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Ft=lt(St,[["render",_t],["__scopeId","data-v-47f089c3"]]);export{Ft as default};
//# sourceMappingURL=DipSipChat-C1K10-_R.js.map
