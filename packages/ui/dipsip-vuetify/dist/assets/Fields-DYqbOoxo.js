import{_ as m}from"./index-BWKbqI-D.js";import{N as n,S as s,R as l,F as c,U as p,V as d,$ as h}from"./vue-eb3ZJrPY.js";import"./vuetify-D9stPb88.js";const y={data(){return{allTables:[],duplicateFields:[]}},methods:{async fetchFields(){try{const o=await fetch("/api/chat/promptfields?noTransform=true");this.allTables=await o.json(),this.findDuplicatesAndUniques()}catch(o){console.error("Error fetching fields:",o)}},findDuplicatesAndUniques(){const o=new Set(["company_name","company_nse_symbol","company_sector","company_market_cap_in_crores","company_market_cap_category","year","month","quarter"]),e=new Map;this.allTables.forEach(({array_name:i,fields:t})=>{if(!Array.isArray(t)){console.warn(`Skipping ${i} due to invalid fields:`,t);return}t.forEach(r=>{o.has(r)||(e.has(r)||e.set(r,[]),e.get(r).push(i))})}),this.duplicateFields=Array.from(e.entries()).filter(([i,t])=>t.length>1).map(([i,t])=>({field:i,found_in_arrays:t})),this.allTables.forEach(i=>{Array.isArray(i.fields)&&(i.uniqueFields=i.fields.filter(t=>{var r;return!o.has(t)&&((r=e.get(t))==null?void 0:r.length)===1}))})}},mounted(){this.fetchFields()}},F={key:0},_={key:0,class:"card"};function g(o,e,i,t,r,f){return n(),s("div",null,[l("button",{onClick:e[0]||(e[0]=(...a)=>f.fetchFields&&f.fetchFields(...a))},"Fetch Fields"),r.allTables.length?(n(),s("div",F,[e[3]||(e[3]=l("h2",null,"Dataset Fields",-1)),(n(!0),s(c,null,p(r.allTables,a=>(n(),s("div",{key:a.array_name,class:"card"},[l("h3",null,d(a.array_name),1),l("ul",null,[(n(!0),s(c,null,p(a.fields,u=>(n(),s("li",{key:u},d(u),1))),128))]),e[1]||(e[1]=l("h4",null,"Fields Unique to Table",-1)),l("ul",null,[(n(!0),s(c,null,p(a.uniqueFields,u=>(n(),s("li",{key:u},d(u),1))),128))])]))),128)),e[4]||(e[4]=l("h2",null,"Duplicate Fields",-1)),r.duplicateFields.length?(n(),s("div",_,[l("table",null,[e[2]||(e[2]=l("thead",null,[l("tr",null,[l("th",null,"Field"),l("th",null,"Found In Arrays")])],-1)),l("tbody",null,[(n(!0),s(c,null,p(r.duplicateFields,a=>(n(),s("tr",{key:a.field},[l("td",null,d(a.field),1),l("td",null,d(a.found_in_arrays.join(", ")),1)]))),128))])])])):h("",!0)])):h("",!0)])}const b=m(y,[["render",g]]);export{b as default};
//# sourceMappingURL=Fields-DYqbOoxo.js.map
