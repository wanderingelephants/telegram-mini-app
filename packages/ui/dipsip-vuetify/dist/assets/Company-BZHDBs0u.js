import{W as O,v as R,A,X as $,w as q,m as v,Y as M,_ as g,p as F,g as b,h as j,d as U,e as k,f as h,i as w,r as L,Z as z,V as G,M as W,N as T,O as V,P as x,n as J,o as X,q as Y,$ as K,t as Q}from"./index-BWKbqI-D.js";import{p as Z,b as ee,g as te,d as ae,W as oe,G as se,f as ne}from"./vuetify-D9stPb88.js";import{E as re,c as le,m as a,n as ie,N as u,S as y,O as _,P as s,Q as i,V as d,R as l,U as D,F as B,M as ce}from"./vue-eb3ZJrPY.js";import{V as de,a as me}from"./VTabs-B4KutWae.js";const ue={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function pe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[t])}function E(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>C(t))}function C(e){let t=[];if(!e)return t;const n=ue[e];if(e!==n){if(e.includes(","))return I(e);if(e.includes("@"))return E(e);n.includes(",")?t=I(n):n.includes("@")?t=E(n):n&&t.push(C(n))}return[pe(e,t)]}function I(e){return e.replace(/\s/g,"").split(",").map(C)}const he=Z({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...O(),...R(),...ee()},"VSkeletonLoader"),ye=te()({name:"VSkeletonLoader",props:he(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:r,backgroundColorStyles:o}=A(re(e,"color")),{dimensionStyles:m}=$(e),{elevationClasses:p}=q(e),{themeClasses:c}=ae(e),{t:f}=oe(),H=le(()=>C(se(e.type).join(",")));return ne(()=>{var P;const S=!n.default||e.loading,N=e.boilerplate||!S?{}:{ariaLive:"polite",ariaLabel:f(e.loadingText),role:"alert"};return a("div",ie({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},c.value,r.value,p.value],style:[o.value,S?m.value:{}]},N),[S?H.value:(P=n.default)==null?void 0:P.call(n)])}),{}}}),_e={props:{symbol:{type:String,required:!0}},async mounted(){this.symbol&&await this.getCompanyData()},computed:{...v(["loggedInGoogle","userGoogle"])},data(){return{company_data:null,snackbar:{show:!1,message:"",color:""}}},methods:{async addToPortfolio(){try{const e=await this.$apollo.query({query:M,variables:{object:{stock_id:this.company_data.company.id,user:{data:{email:this.userGoogle.email,google_id:this.userGoogle.uid},on_conflict:{constraint:"users_email_key",update_columns:["email"]}}}},fetchPolicy:"no-cache"});this.snackbar.color="success",this.snackbar.message="Added to Watch List",this.snackbar.show=!0}catch(e){console.error(e)}},formatNumber(e){if(!e)return"0";const t=1e7,n=1e5;return e>=t?(e/t).toFixed(2)+" Cr":e>=n?(e/n).toFixed(2)+" L":e.toLocaleString("en-IN")},async getCompanyData(){try{const e=await fetch(`/api/company/details/${this.symbol}/ratios`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("jwtGoogle")}`}});if(e.status!==200){this.snackbar.color="error",this.snackbar.message="Not authorized",this.snackbar.show=!0;return}const t=await e.json();this.company_data=t.company_trailing_twelvemonths_ratios[0]}catch(e){console.error(e),this.snackbar.color="error",this.snackbar.message="Error fetching data",this.snackbar.show=!0}}},watch:{symbol:async function(e){await this.getCompanyData()}}},fe={class:"text-body-1"},be={class:"text-body-1"},ge={class:"text-body-1"},ke={class:"text-body-1"};function we(e,t,n,r,o,m){return u(),y("div",null,[o.company_data&&o.company_data.company?(u(),_(h,{key:0,class:"mt-4"},{default:s(()=>[a(b,{class:"text-h5 primary--text"},{default:s(()=>[i(d(o.company_data.company.name)+" ",1),a(F,{color:"primary",class:"ml-2",onClick:m.addToPortfolio},{default:s(()=>t[1]||(t[1]=[i("FOLLOW")])),_:1},8,["onClick"])]),_:1}),a(j,null,{default:s(()=>t[2]||(t[2]=[i("Company Financial Ratios")])),_:1}),a(w,null,{default:s(()=>[a(U,null,{default:s(()=>[a(k,{cols:"12",md:"6"},{default:s(()=>[a(h,{elevation:"2",class:"pa-4 mb-4"},{default:s(()=>[t[3]||(t[3]=l("div",{class:"text-h6 mb-2"},"Market Cap",-1)),l("div",fe,"₹"+d(o.company_data.Market_Cap)+" Cr",1)]),_:1})]),_:1}),a(k,{cols:"12",md:"6"},{default:s(()=>[a(h,{elevation:"2",class:"pa-4 mb-4"},{default:s(()=>[t[4]||(t[4]=l("div",{class:"text-h6 mb-2"},"Enterprise Value",-1)),l("div",be,"₹"+d(o.company_data.Enterprise_Value)+" Cr",1)]),_:1})]),_:1}),a(k,{cols:"12",md:"6"},{default:s(()=>[a(h,{elevation:"2",class:"pa-4 mb-4"},{default:s(()=>[t[5]||(t[5]=l("div",{class:"text-h6 mb-2"},"Price to Earnings",-1)),l("div",ge,d(o.company_data.Price_To_Earnings.toFixed(2)),1)]),_:1})]),_:1}),a(k,{cols:"12",md:"6"},{default:s(()=>[a(h,{elevation:"2",class:"pa-4 mb-4"},{default:s(()=>[t[6]||(t[6]=l("div",{class:"text-h6 mb-2"},"Price to Book Value",-1)),l("div",ke,d(o.company_data.Price_To_BookValue.toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(u(),_(ye,{key:1,type:"card",class:"mt-4"})),a(L,{modelValue:o.snackbar.show,"onUpdate:modelValue":t[0]||(t[0]=p=>o.snackbar.show=p),timeout:o.snackbar.timeout,color:o.snackbar.color},{default:s(()=>[i(d(o.snackbar.message),1)]),_:1},8,["modelValue","timeout","color"])])}const ve=g(_e,[["render",we]]),Ce={name:"Financials",props:{symbol:{type:String,required:!0},entity:{type:String,required:!0}},computed:{...v(["loggedInGoogle","userGoogle"]),formattedBalanceSheetData(){return this.company_balance_sheet_display.filter(e=>e.isCategory||e.isSummary?!0:this.expandedCategories[e.category])}},data(){return{company_balance_sheet:[],company_balance_sheet_display:[],snackbar:{show:!1,message:"",timeout:3e3,color:"orange"}}},computed:{companyName(){var e,t;return((t=(e=this.company_balance_sheet[0])==null?void 0:e.company)==null?void 0:t.name)||"Company"},years(){return[...new Set(this.company_balance_sheet.map(e=>e.year))].sort()},headers(){return[{title:"Line Item",value:"key",sortable:!1},...this.years.map(e=>({title:e.toString(),value:e.toString(),align:"end"}))]}},methods:{transformBalanceSheetData(){const e=[...this.company_balance_sheet].sort((n,r)=>n.rowno-r.rowno),t={};e.forEach(n=>{t[n.key]||(t[n.key]={key:n.key}),t[n.key][n.year]=n.value}),this.company_balance_sheet_display=Object.values(t)},async getCompanyData(){try{const e=await fetch(`/api/company/details/${this.symbol}/${this.entity}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("jwtGoogle")}`}});if(e.status!==200){this.snackbar.color="error",this.snackbar.message="Not authorized",this.snackbar.show=!0;return}const t=await e.json();console.log("financials jsonData",t,this.entity);let n;switch(this.entity){case"ratios":n="company_trailing_twelvemonths_ratios";break;case"balancesheet":n="company_balance_sheet";break;case"profitloss":n="company_profit_and_loss";break;case"cashflow":n="company_cash_flow";break}this.company_data=t[n],this.company_balance_sheet=t[n]||[],console.log("this.company_balance_sheet",this.company_balance_sheet),this.company_balance_sheet=this.company_balance_sheet.filter(r=>r.key!==""),this.transformBalanceSheetData()}catch(e){console.error(e),this.snackbar.color="error",this.snackbar.message="Error fetching data",this.snackbar.show=!0}},formatCurrency(e){return typeof e!="number"?"-":new Intl.NumberFormat("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}},watch:{symbol:async function(e){await this.getCompanyData()}},created(){}};function Se(e,t,n,r,o,m){return u(),_(G,{fluid:""},{default:s(()=>[a(h,null,{default:s(()=>[a(b),a(w,null,{default:s(()=>[a(z,{headers:m.headers,items:o.company_balance_sheet_display,"items-per-page":-1,"hide-default-footer":"",class:"elevation-1"},{item:s(({item:p})=>[l("tr",null,[l("td",null,d(p.key),1),(u(!0),y(B,null,D(m.years,c=>(u(),y("td",{key:c,class:"text-right"},d(m.formatCurrency(p[c])),1))),128))])]),_:1},8,["headers","items"])]),_:1})]),_:1}),a(L,{modelValue:o.snackbar.show,"onUpdate:modelValue":t[0]||(t[0]=p=>o.snackbar.show=p),timeout:o.snackbar.timeout,color:o.snackbar.color},{default:s(()=>[i(d(o.snackbar.message),1)]),_:1},8,["modelValue","timeout","color"])]),_:1})}const Te=g(Ce,[["render",Se],["__scopeId","data-v-07d6e3b4"]]),Ve={props:{symbol:{type:String,required:!0}},mounted(){},data(){return{}},"$route.params.symbol":function(e){console.log("newsymbol",e),this.symbol=e}};function xe(e,t,n,r,o,m){return u(),y("div",null,"Ratios "+d(n.symbol),1)}const De=g(Ve,[["render",xe]]),Be={name:"Documents",props:{symbol:{type:String,required:!0},entity:{type:String,required:!0}},computed:{...v(["loggedInGoogle","userGoogle"])},data(){return{company_data:[],auditor_report:{},director_report:{},chairman_report:{},snackbar:{show:!1,message:"",timeout:3e3,color:"orange"}}},methods:{async getCompanyData(){try{const e=await fetch(`/api/company/details/${this.symbol}/${this.entity}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("jwtGoogle")}`}});if(e.status!==200){this.snackbar.color="error",this.snackbar.message="Not authorized",this.snackbar.show=!0;return}const t=await e.json();console.log("jsonData",t),this.company_data=t.company_master[0],this.company_data.company_auditor_s_report.length>0&&(this.auditor_report=this.company_data.company_auditor_s_report[0]),this.company_data.company_director_s_report.length>0&&(this.director_report=this.company_data.company_director_s_report[0]),this.company_data.company_chairman_s_report.length>0&&(this.chairman_report=this.company_data.company_chairman_s_report[0])}catch(e){console.error(e),this.snackbar.color="error",this.snackbar.message="Error fetching data",this.snackbar.show=!0}}},watch:{symbol:async function(e){await this.getCompanyData()}}},Le=["innerHTML"],Pe=["innerHTML"],Ee=["innerHTML"];function Ie(e,t,n,r,o,m){return u(),_(G,{fluid:""},{default:s(()=>[a(h,null,{default:s(()=>[a(b,null,{default:s(()=>t[1]||(t[1]=[i(" Company Documents ")])),_:1}),a(W,{color:"white"},{default:s(()=>[a(T,null,{default:s(()=>[a(V,null,{default:s(()=>[i(d(o.chairman_report.year)+" Chairman's Report ",1)]),_:1}),a(x,null,{default:s(()=>[l("div",{innerHTML:o.chairman_report.report},null,8,Le)]),_:1})]),_:1}),a(T,null,{default:s(()=>[a(V,null,{default:s(()=>[i(d(o.director_report.year)+" Director's Report ",1)]),_:1}),a(x,null,{default:s(()=>[l("div",{innerHTML:o.director_report.report},null,8,Pe)]),_:1})]),_:1}),a(T,null,{default:s(()=>[a(V,null,{default:s(()=>[i(d(o.auditor_report.year)+" Auditor's Report ",1)]),_:1}),a(x,null,{default:s(()=>[l("div",{innerHTML:o.auditor_report.report},null,8,Ee)]),_:1})]),_:1})]),_:1})]),_:1}),a(L,{modelValue:o.snackbar.show,"onUpdate:modelValue":t[0]||(t[0]=p=>o.snackbar.show=p),timeout:o.snackbar.timeout,color:o.snackbar.color},{default:s(()=>[i(d(o.snackbar.message),1)]),_:1},8,["modelValue","timeout","color"])]),_:1})}const Fe=g(Be,[["render",Ie]]),je={watch:{"$route.params.symbol"(e){this.symbol=e||""}},computed:{...v(["loggedInGoogle","userGoogle"])},displayTabs(){const e=JSON.parse(JSON.stringify(this.baseTabs));return this.symbol&&e.length>0&&(e[0].label=this.symbol),e},data(){return{dialog:!1,selectedTab:"CompanyDetails",symbol:"",baseTabs:[{label:"Company",name:"CompanyDetails",component:"CompanyDetails"},{label:"Balance Sheet",name:"BalanceSheet",component:"Financials",entity:"balancesheet"},{label:"Cash Flow",name:"CashFlow",component:"Financials",entity:"cashflow"},{label:"Profit & Loss",name:"PnL",component:"Financials",entity:"profitloss"},{label:"Documents",name:"Documents",component:"CompanyDocuments",entity:"documents"}],isScrolling:!1,appBarHeight:64}},components:{CompanyDetails:ve,Financials:Te,CompanyDocuments:Fe,Ratios:De},async mounted(){this.symbol=this.$route.params.symbol,this.$nextTick(()=>{const e=document.querySelector(".v-app-bar");e&&(this.appBarHeight=e.offsetHeight,document.documentElement.style.setProperty("--app-bar-height",`${this.appBarHeight}px`))}),window.addEventListener("scroll",this.handleScroll),this.checkUrlHash()},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){if(this.isScrolling)return;const e=this.baseTabs.map(r=>({id:r.name,element:document.getElementById(r.name)}));let t="";const n=this.appBarHeight+48;for(const r of e){if(!r.element)continue;r.element.getBoundingClientRect().top<=n+50&&(t=r.id)}t&&t!==this.selectedTab&&(this.selectedTab=t,history.replaceState(null,null,`#${t}`))},scrollToSection(e){var m;const t=document.getElementById(e);if(!t)return;this.isScrolling=!0;const n=((m=document.querySelector(".sticky-header"))==null?void 0:m.offsetHeight)||48,r=this.appBarHeight+n,o=t.getBoundingClientRect().top+window.pageYOffset-r;window.scrollTo({top:o,behavior:"smooth"}),history.replaceState(null,null,`#${e}`),setTimeout(()=>{this.isScrolling=!1},800)},checkUrlHash(){const e=window.location.hash.replace("#","");e&&this.baseTabs.some(t=>t.component===e)&&(this.selectedTab=e,this.$nextTick(()=>{this.scrollToSection(e)}))}}},Ge={class:"stock-screener"},He={class:"sticky-header"},Ne=["id"];function Oe(e,t,n,r,o,m){const p=Q;return u(),y("div",Ge,[a(p),l("div",He,[a(de,{modelValue:o.selectedTab,"onUpdate:modelValue":[t[0]||(t[0]=c=>o.selectedTab=c),m.scrollToSection],"bg-color":"white",density:"comfortable"},{default:s(()=>[(u(!0),y(B,null,D(o.baseTabs,c=>(u(),_(me,{key:c.name,value:c.name},{default:s(()=>[i(d(c.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),t[9]||(t[9]=l("div",null,null,-1)),(u(!0),y(B,null,D(o.baseTabs,c=>(u(),y("div",{key:c.name,id:c.name,class:"section-container"},[a(h,{class:"mb-6",flat:""},{default:s(()=>[a(b,null,{default:s(()=>[i(d(c.label),1)]),_:2},1024),a(j,null,{default:s(()=>t[4]||(t[4]=[i("All Fields are Promptable in AI Assistant")])),_:1}),l("div",null,[a(J,{size:"small",color:"grey",class:"ml-1",onClick:t[1]||(t[1]=f=>o.dialog=!0)},{default:s(()=>t[5]||(t[5]=[i(" $mdiInformationOutline ")])),_:1}),a(X,{modelValue:o.dialog,"onUpdate:modelValue":t[3]||(t[3]=f=>o.dialog=f),"max-width":"400"},{default:s(()=>[a(h,null,{default:s(()=>[a(b,{class:"headline"},{default:s(()=>t[6]||(t[6]=[i("Prompts Help")])),_:1}),a(w,null,{default:s(()=>t[7]||(t[7]=[i(' In your Prompts, you can include any of the financial fields across Balance Sheet, PnL, Cashflow and others, and combine them arbitrarily with any technical or subjective signals. E.g. "Get me companies whose Cash and Cash Equivalents is more than X, and who made announcements related to large order wins in last 15 days. Show me only companies below 5000 Cr marketcap and those who hit 52-Week highs in last 30 days" ')])),_:1}),a(Y,null,{default:s(()=>[a(K),a(F,{color:"primary",onClick:t[2]||(t[2]=f=>o.dialog=!1)},{default:s(()=>t[8]||(t[8]=[i("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a(w,null,{default:s(()=>[(u(),_(ce(c.component),{symbol:o.symbol,entity:c.entity},null,8,["symbol","entity"]))]),_:2},1024)]),_:2},1024)],8,Ne))),128)),t[10]||(t[10]=l("div",null,null,-1))])}const Me=g(je,[["render",Oe],["__scopeId","data-v-d842d7f8"]]);export{Me as default};
//# sourceMappingURL=Company-BZHDBs0u.js.map
