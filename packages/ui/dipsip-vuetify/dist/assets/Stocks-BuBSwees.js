import{_ as se,g as ae,i as q,f as ye,U as re,o as w,z as oe,W as _e,X,Y as Ie,Z as Ae,u as Ne,$ as We,a0 as Ee,t as Ye,a1 as Re,a2 as Be,a3 as Ue,v as Le,a4 as Ge,a5 as je,y as Fe,a6 as He,s as ge,m as qe,a7 as Ke,a8 as ze,a9 as Je,aa as Ze,ab as Qe,r as Xe,d as ee,e as G,k as $e,l as et,j as tt,q as le,V as at}from"./index-DhenKblQ.js";import{A as nt}from"./apexcharts-3z0-31-X.js";import{$ as pe,N as j,O as K,P as f,m as s,Q as g,S as st,R as te,c as D,d as ne,s as z,w as De,a as be,n as C,z as ot,A as rt,E as Pe,F as lt,V as H,_ as ie}from"./vue-ByHmrbWW.js";import{V as it,M as dt}from"./MutualFundAnalysis-BKw4w3iD.js";import{V as ut}from"./VAutocomplete-Sc6yA_t_.js";import{p as O,J,g as A,f as W,Z as ct,aJ as F,B as N,G as Z,aK as mt,ax as Se,o as Ve,ak as ft,T as ht,m as vt,b as kt,d as yt,a0 as Q,W as _t}from"./vuetify-Bk4RHPLK.js";const gt={Promoters:1,"Key Management Personnel":2,Relative:3,"-":4,"Promoter Group":5,"Employees/Designated Employees":6,Director:7,Other:8,"Immediate relative":9,"Key Managerial Personnel":10},pt=Object.entries(gt).reduce((e,[t,o])=>(e[o]=t,e),{}),Dt={"7(2)":1,"7(3)":2};Object.entries(Dt).reduce((e,[t,o])=>(e[o]=t,e),{});const bt={"Equity Shares":1,"Convertible Debentures":2,Warrants:3,"ADR/GDR/FCCB":4},Pt=Object.entries(bt).reduce((e,[t,o])=>(e[o]=t,e),{}),St={ESOP:1,Gift:2,"Invocation of Pledge":3,"Market Purchase":4,"Market Sale":5,"Off Market":6,Others:7,"Pledge Creation":8,"Preferential Offer":9,"Revokation of Pledge":10,"Scheme of Amalgamation/Merger/Demerger/Arrangement":11,"Inter-se-Transfer":12,"Conversion of security":13,Bonus:14,"-":15},Vt=Object.entries(St).reduce((e,[t,o])=>(e[o]=t,e),{}),xt={Buy:1,Sell:2,Pledge:3,"Pledge Revoke":4,"Invocation of Pledge":5},Ct=Object.entries(xt).reduce((e,[t,o])=>(e[o]=t,e),{}),wt={NSE:1,BSE:2,MSEI:3,NA:4},Mt={main:0,sme:1};Object.entries(Mt).reduce((e,[t,o])=>(e[o]=t,e),{});Object.entries(wt).reduce((e,[t,o])=>(e[o]=t,e),{});const Tt={Not_Specified:-1,Positive:0,Negative:1,Neutral:2},Ot=Object.entries(Tt).reduce((e,[t,o])=>(e[o]=t,e),{}),It={components:{apexchart:nt},props:{candles:Array},computed:{series(){return[{data:this.candles.map(e=>({x:new Date(e.timestamp),y:[e.open,e.high,e.low,e.close]}))}]},chartOptions(){return{chart:{type:"candlestick",height:350},xaxis:{type:"datetime"},yaxis:{tooltip:{enabled:!0}}}}}};function At(e,t,o,d,a,r){const l=pe("apexchart");return j(),K(ye,null,{default:f(()=>[s(ae,null,{default:f(()=>t[0]||(t[0]=[g("Stock Price Chart")])),_:1}),s(q,null,{default:f(()=>[s(l,{type:"candlestick",options:r.chartOptions,series:r.series},null,8,["options","series"])]),_:1})]),_:1})}const Nt=se(It,[["render",At],["__scopeId","data-v-cc929203"]]),Wt={props:{announcements:Array,insiderTrades:Array,candles:Array},components:{StockPriceChart:Nt},data(){return{announcementHeaders:[{text:"Company",value:"company_name"},{text:"Summary",value:"announcement_text_summary"},{text:"Impact",value:"announcement_impact"},{text:"Signal",value:"announcement_sentiment"},{text:"Date",value:"announcement_date"}]}},computed:{insiderTradeHeaders(){return[{text:"Company",value:"company_name"},{text:"Insider",value:"name_of_insider"},{text:"Category",value:"category_of_insider"},{text:"Type",value:"transaction_type"},{text:"Mode",value:"mode_of_transaction"},{text:"% Pre",value:"shareholding_before_transaction"},{text:"% Post",value:"shareholding_after_transaction"},{text:"Date",value:"intimation_date"}]}}};function Et(e,t,o,d,a,r){return j(),st("div",null,[t[13]||(t[13]=te("h2",null,"Stock Watchlist",-1)),t[14]||(t[14]=te("h3",null,"Announcements",-1)),s(re,{headers:a.announcementHeaders,items:o.announcements},{"header.company_name":f(()=>t[0]||(t[0]=[g("Company")])),"header.announcement_text_summary":f(()=>t[1]||(t[1]=[g("Summary")])),"header.announcement_impact":f(()=>t[2]||(t[2]=[g("Impact")])),"header.announcement_sentiment":f(()=>t[3]||(t[3]=[g("Signal")])),"header.announcement_date":f(()=>t[4]||(t[4]=[g("Date")])),_:1},8,["headers","items"]),t[15]||(t[15]=te("h3",null,"Insider Trades",-1)),s(re,{headers:r.insiderTradeHeaders,items:o.insiderTrades,class:"mb-4"},{"header.company_name":f(()=>t[5]||(t[5]=[g("Company")])),"header.name_of_insider":f(()=>t[6]||(t[6]=[g("Insider")])),"header.category_of_insider":f(()=>t[7]||(t[7]=[g("Category")])),"header.transaction_type":f(()=>t[8]||(t[8]=[g("Type")])),"header.mode_of_transaction":f(()=>t[9]||(t[9]=[g("Mode")])),"header.shareholding_before_transaction":f(()=>t[10]||(t[10]=[g("%Pre")])),"header.shareholding_after_transaction":f(()=>t[11]||(t[11]=[g("%Post")])),"header.intimation_date":f(()=>t[12]||(t[12]=[g("Intimation")])),_:1},8,["headers","items"])])}const Yt=se(Wt,[["render",Et],["__scopeId","data-v-d151aaa6"]]),xe=O({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:J,default:"$next"},prevIcon:{type:J,default:"$prev"},modeIcon:{type:J,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),de=A()({name:"VDatePickerControls",props:xe(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:o}=t;const d=D(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=D(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),r=D(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),l=D(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){o("click:prev")}function n(){o("click:next")}function i(){o("click:year")}function m(){o("click:month")}return W(()=>s("div",{class:["v-date-picker-controls"]},[s(w,{class:"v-date-picker-controls__month-btn",disabled:d.value,text:e.text,variant:"text",rounded:!0,onClick:m},null),s(w,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:i},null),s(it,{key:"mode-spacer"},null),s("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[s(w,{disabled:r.value,icon:e.prevIcon,variant:"text",onClick:u},null),s(w,{disabled:l.value,icon:e.nextIcon,variant:"text",onClick:n},null)])])),{}}}),Rt=O({appendIcon:J,color:String,header:String,transition:String,onClick:ct()},"VDatePickerHeader"),ue=A()({name:"VDatePickerHeader",props:Rt(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:o,slots:d}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=oe(e,"color");function l(){o("click")}function u(){o("click:append")}return W(()=>{const n=!!(d.default||e.header),i=!!(d.append||e.appendIcon);return s("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:r.value,onClick:l},[d.prepend&&s("div",{key:"prepend",class:"v-date-picker-header__prepend"},[d.prepend()]),n&&s(_e,{key:"content",name:e.transition},{default:()=>{var m;return[s("div",{key:e.header,class:"v-date-picker-header__content"},[((m=d.default)==null?void 0:m.call(d))??e.header])]}}),i&&s("div",{class:"v-date-picker-header__append"},[d.append?s(X,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var m;return[(m=d.append)==null?void 0:m.call(d)]}}):s(w,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),Bt=O({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function Ut(e){const t=F(),o=N(e,"modelValue",[],v=>Z(v)),d=D(()=>e.displayValue?t.date(e.displayValue):o.value.length>0?t.date(o.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),a=N(e,"year",void 0,v=>{const y=v!=null?Number(v):t.getYear(d.value);return t.startOfYear(t.setYear(t.date(),y))},v=>t.getYear(v)),r=N(e,"month",void 0,v=>{const y=v!=null?Number(v):t.getMonth(d.value),k=t.setYear(t.startOfMonth(t.date()),t.getYear(a.value));return t.setMonth(k,y)},v=>t.getMonth(v)),l=D(()=>{const v=Number(e.firstDayOfWeek??0);return e.weekdays.map(y=>(y+v)%7)}),u=D(()=>{const v=t.getWeekArray(r.value,e.firstDayOfWeek),y=v.flat(),k=6*7;if(e.weeksInMonth==="static"&&y.length<k){const P=y[y.length-1];let _=[];for(let c=1;c<=k-y.length;c++)_.push(t.addDays(P,c)),c%7===0&&(v.push(_),_=[])}return v});function n(v,y){return v.filter(k=>l.value.includes(t.toJsDate(k).getDay())).map((k,P)=>{const _=t.toISO(k),c=!t.isSameMonth(k,r.value),V=t.isSameDay(k,t.startOfMonth(r.value)),T=t.isSameDay(k,t.endOfMonth(r.value)),x=t.isSameDay(k,r.value);return{date:k,isoDate:_,formatted:t.format(k,"keyboardDate"),year:t.getYear(k),month:t.getMonth(k),isDisabled:M(k),isWeekStart:P%7===0,isWeekEnd:P%7===6,isToday:t.isSameDay(k,y),isAdjacent:c,isHidden:c&&!e.showAdjacentMonths,isStart:V,isSelected:o.value.some(E=>t.isSameDay(k,E)),isEnd:T,isSame:x,localized:t.format(k,"dayOfMonth")}})}const i=D(()=>{const v=t.startOfWeek(d.value,e.firstDayOfWeek),y=[];for(let P=0;P<=6;P++)y.push(t.addDays(v,P));const k=t.date();return n(y,k)}),m=D(()=>{const v=u.value.flat(),y=t.date();return n(v,y)}),p=D(()=>u.value.map(v=>v.length?mt(t,v[0]):null));function M(v){if(e.disabled)return!0;const y=t.date(v);return e.min&&t.isAfter(t.date(e.min),y)||e.max&&t.isAfter(y,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(k=>t.isSameDay(t.date(k),y)):typeof e.allowedDates=="function"?!e.allowedDates(y):!1}return{displayValue:d,daysInMonth:m,daysInWeek:i,genDays:n,model:o,weeksInMonth:u,weekDays:l,weekNumbers:p}}const Ce=O({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Bt()},"VDatePickerMonth"),ce=A()({name:"VDatePickerMonth",props:Ce(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:o,slots:d}=t;const a=ne(),{daysInMonth:r,model:l,weekNumbers:u}=Ut(e),n=F(),i=z(),m=z(),p=z(!1),M=D(()=>p.value?e.reverseTransition:e.transition);e.multiple==="range"&&l.value.length>0&&(i.value=l.value[0],l.value.length>1&&(m.value=l.value[l.value.length-1]));const v=D(()=>{const _=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return l.value.length>=_});De(r,(_,c)=>{c&&(p.value=n.isBefore(_[0].date,c[0].date))});function y(_){const c=n.startOfDay(_);if(l.value.length===0?i.value=void 0:l.value.length===1&&(i.value=l.value[0],m.value=void 0),!i.value)i.value=c,l.value=[i.value];else if(m.value)i.value=_,m.value=void 0,l.value=[i.value];else{if(n.isSameDay(c,i.value)){i.value=void 0,l.value=[];return}else n.isBefore(c,i.value)?(m.value=n.endOfDay(i.value),i.value=c):m.value=n.endOfDay(c);const V=n.getDiff(m.value,i.value,"days"),T=[i.value];for(let x=1;x<V;x++){const E=n.addDays(i.value,x);T.push(E)}T.push(m.value),l.value=T}}function k(_){const c=l.value.findIndex(V=>n.isSameDay(V,_));if(c===-1)l.value=[...l.value,_];else{const V=[...l.value];V.splice(c,1),l.value=V}}function P(_){e.multiple==="range"?y(_):e.multiple?k(_):l.value=[_]}return()=>s("div",{class:"v-date-picker-month"},[e.showWeek&&s("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&s("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[g(" ")]),u.value.map(_=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[_]))]),s(_e,{name:M.value},{default:()=>{var _;return[s("div",{ref:a,key:(_=r.value[0].date)==null?void 0:_.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&n.getWeekdays(e.firstDayOfWeek).map(c=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[c])),r.value.map((c,V)=>{const T={props:{onClick:()=>P(c.date)},item:c,i:V};return v.value&&!c.isSelected&&(c.isDisabled=!0),s("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":c.isAdjacent,"v-date-picker-month__day--hide-adjacent":c.isHidden,"v-date-picker-month__day--selected":c.isSelected,"v-date-picker-month__day--week-end":c.isWeekEnd,"v-date-picker-month__day--week-start":c.isWeekStart}],"data-v-date":c.isDisabled?void 0:c.isoDate},[(e.showAdjacentMonths||!c.isAdjacent)&&s(X,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(c.isSelected||c.isToday)&&!c.isDisabled?e.color:void 0,disabled:c.isDisabled,icon:!0,ripple:!1,text:c.localized,variant:c.isDisabled?c.isToday?"outlined":"text":c.isToday&&!c.isSelected?"outlined":"flat",onClick:()=>P(c.date)}}},{default:()=>{var x;return[((x=d.day)==null?void 0:x.call(d,T))??s(w,T.props,null)]}})])})])]}})])}}),we=O({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),me=A()({name:"VDatePickerMonths",props:we(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:d}=t;const a=F(),r=N(e,"modelValue"),l=D(()=>{let u=a.startOfYear(a.date());return e.year&&(u=a.setYear(u,e.year)),Se(12).map(n=>{const i=a.format(u,"monthShort"),m=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),u)||e.max&&a.isAfter(u,a.startOfMonth(a.date(e.max))));return u=a.getNextMonth(u),{isDisabled:m,text:i,value:n}})});return be(()=>{r.value=r.value??a.getMonth(a.date())}),W(()=>s("div",{class:"v-date-picker-months",style:{height:Ve(e.height)}},[s("div",{class:"v-date-picker-months__content"},[l.value.map((u,n)=>{var p;const i={active:r.value===n,color:r.value===n?e.color:void 0,disabled:u.isDisabled,rounded:!0,text:u.text,variant:r.value===u.value?"flat":"text",onClick:()=>m(n)};function m(M){if(r.value===M){o("update:modelValue",r.value);return}r.value=M}return((p=d.month)==null?void 0:p.call(d,{month:u,i:n,props:i}))??s(w,C({key:"month"},i),null)})])])),{}}}),Me=O({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),fe=A()({name:"VDatePickerYears",props:Me(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:d}=t;const a=F(),r=N(e,"modelValue"),l=D(()=>{const n=a.getYear(a.date());let i=n-100,m=n+52;e.min&&(i=a.getYear(a.date(e.min))),e.max&&(m=a.getYear(a.date(e.max)));let p=a.startOfYear(a.date());return p=a.setYear(p,i),Se(m-i+1,i).map(M=>{const v=a.format(p,"year");return p=a.setYear(p,a.getYear(p)+1),{text:v,value:M}})});be(()=>{r.value=r.value??a.getYear(a.date())});const u=ft();return ot(async()=>{var n;await rt(),(n=u.el)==null||n.scrollIntoView({block:"center"})}),W(()=>s("div",{class:"v-date-picker-years",style:{height:Ve(e.height)}},[s("div",{class:"v-date-picker-years__content"},[l.value.map((n,i)=>{var p;const m={ref:r.value===n.value?u:void 0,active:r.value===n.value,color:r.value===n.value?e.color:void 0,rounded:!0,text:n.text,variant:r.value===n.value?"flat":"text",onClick:()=>{if(r.value===n.value){o("update:modelValue",r.value);return}r.value=n.value}};return((p=d.year)==null?void 0:p.call(d,{year:n,i,props:m}))??s(w,C({key:"month"},m),null)})])])),{}}}),Lt=ht("v-picker-title"),Te=O({color:String,...Ie(),...vt(),...Ae(),...Ne(),...We(),...Ee(),...Ye(),...Re(),...kt()},"VSheet"),he=A()({name:"VSheet",props:Te(),setup(e,t){let{slots:o}=t;const{themeClasses:d}=yt(e),{backgroundColorClasses:a,backgroundColorStyles:r}=oe(Pe(e,"color")),{borderClasses:l}=Be(e),{dimensionStyles:u}=Ue(e),{elevationClasses:n}=Le(e),{locationStyles:i}=Ge(e),{positionClasses:m}=je(e),{roundedClasses:p}=Fe(e);return W(()=>s(e.tag,{class:["v-sheet",d.value,a.value,l.value,n.value,m.value,p.value,e.class],style:[r.value,u.value,i.value,e.style]},o)),{}}}),Oe=O({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Te()},"VPicker"),ve=A()({name:"VPicker",props:Oe(),setup(e,t){let{slots:o}=t;const{backgroundColorClasses:d,backgroundColorStyles:a}=oe(Pe(e,"color"));return W(()=>{const r=he.filterProps(e),l=!!(e.title||o.title);return s(he,C(r,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!o.actions},e.class],style:e.style}),{default:()=>{var u;return[!e.hideHeader&&s("div",{key:"header",class:[d.value],style:[a.value]},[l&&s(Lt,{key:"picker-title"},{default:()=>{var n;return[((n=o.title)==null?void 0:n.call(o))??e.title]}}),o.header&&s("div",{class:"v-picker__header"},[o.header()])]),s("div",{class:"v-picker__body"},[(u=o.default)==null?void 0:u.call(o)]),o.actions&&s(X,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[s("div",{class:"v-picker__actions"},[o.actions()])]})]}})}),{}}}),Gt=O({header:{type:String,default:"$vuetify.datePicker.header"},...xe(),...Ce({weeksInMonth:"static"}),...Q(we(),["modelValue"]),...Q(Me(),["modelValue"]),...Oe({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),ke=A()({name:"VDatePicker",props:Gt(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:o,slots:d}=t;const a=F(),{t:r}=_t(),l=N(e,"modelValue",void 0,h=>Z(h),h=>e.multiple?h:h[0]),u=N(e,"viewMode"),n=D(()=>{var S;const h=a.date((S=l.value)==null?void 0:S[0]);return h&&a.isValid(h)?h:a.date()}),i=ne(Number(e.month??a.getMonth(a.startOfMonth(n.value)))),m=ne(Number(e.year??a.getYear(a.startOfYear(a.setMonth(n.value,i.value))))),p=z(!1),M=D(()=>e.multiple&&l.value.length>1?r("$vuetify.datePicker.itemsSelected",l.value.length):l.value[0]&&a.isValid(l.value[0])?a.format(a.date(l.value[0]),"normalDateWithWeekday"):r(e.header)),v=D(()=>{let h=a.date();return h=a.setDate(h,1),h=a.setMonth(h,i.value),h=a.setYear(h,m.value),a.format(h,"monthAndYear")}),y=D(()=>`date-picker-header${p.value?"-reverse":""}-transition`),k=D(()=>{const h=a.date(e.min);return e.min&&a.isValid(h)?h:null}),P=D(()=>{const h=a.date(e.max);return e.max&&a.isValid(h)?h:null}),_=D(()=>{if(e.disabled)return!0;const h=[];if(u.value!=="month")h.push("prev","next");else{let S=a.date();if(S=a.setYear(S,m.value),S=a.setMonth(S,i.value),k.value){const I=a.addDays(a.startOfMonth(S),-1);a.isAfter(k.value,I)&&h.push("prev")}if(P.value){const I=a.addDays(a.endOfMonth(S),1);a.isAfter(I,P.value)&&h.push("next")}}return h});function c(){i.value<11?i.value++:(m.value++,i.value=0,B(m.value)),R(i.value)}function V(){i.value>0?i.value--:(m.value--,i.value=11,B(m.value)),R(i.value)}function T(){u.value="month"}function x(){u.value=u.value==="months"?"month":"months"}function E(){u.value=u.value==="year"?"month":"year"}function R(h){u.value==="months"&&x(),o("update:month",h)}function B(h){u.value==="year"&&E(),o("update:year",h)}return De(l,(h,S)=>{const I=Z(S),U=Z(h);if(!U.length)return;const $=a.date(I[I.length-1]),L=a.date(U[U.length-1]),Y=a.getMonth(L),b=a.getYear(L);Y!==i.value&&(i.value=Y,R(i.value)),b!==m.value&&(m.value=b,B(m.value)),p.value=a.isBefore($,L)}),W(()=>{const h=ve.filterProps(e),S=de.filterProps(e),I=ue.filterProps(e),U=ce.filterProps(e),$=Q(me.filterProps(e),["modelValue"]),L=Q(fe.filterProps(e),["modelValue"]),Y={header:M.value,transition:y.value};return s(ve,C(h,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var b;return((b=d.title)==null?void 0:b.call(d))??s("div",{class:"v-date-picker__title"},[r(e.title)])},header:()=>d.header?s(X,{defaults:{VDatePickerHeader:{...Y}}},{default:()=>{var b;return[(b=d.header)==null?void 0:b.call(d,Y)]}}):s(ue,C({key:"header"},I,Y,{onClick:u.value!=="month"?T:void 0}),{...d,default:void 0}),default:()=>s(lt,null,[s(de,C(S,{disabled:_.value,text:v.value,"onClick:next":c,"onClick:prev":V,"onClick:month":x,"onClick:year":E}),null),s(He,{hideOnLeave:!0},{default:()=>[u.value==="months"?s(me,C({key:"date-picker-months"},$,{modelValue:i.value,"onUpdate:modelValue":[b=>i.value=b,R],min:k.value,max:P.value,year:m.value}),null):u.value==="year"?s(fe,C({key:"date-picker-years"},L,{modelValue:m.value,"onUpdate:modelValue":[b=>m.value=b,B],min:k.value,max:P.value}),null):s(ce,C({key:"date-picker-month"},U,{modelValue:l.value,"onUpdate:modelValue":b=>l.value=b,month:i.value,"onUpdate:month":[b=>i.value=b,R],year:m.value,"onUpdate:year":[b=>m.value=b,B],min:k.value,max:P.value}),null)]})]),actions:d.actions})}),{}}}),jt={name:"ChatApp",components:{MutualFundAnalysis:dt,GoogleSignIn:ge,StockWatchList:Yt},data(){return{messages:[],userInput:"",isLoading:!1,showError:!1,errorMessage:"",stocks:[],selectedStocks:[],portfolio:[],compareData:{},inserts:[],deletes:[],fromDate:new Date,toDate:new Date,selectedPeriod:"yesterday",showCustomDatePicker:!1,dateRangePeriods:[{text:"Yesterday",value:"yesterday"},{text:"Last 7 Days",value:"last7"},{text:"Last 15 Days",value:"last15"},{text:"Custom",value:"custom"}],searchText:"",title:"Stocks Helper Agent",subTitles:["Ask what Google/ChatGPT cannot answer. E.g.","Which companies reported insider trades in last one month","Last one month, which companies made preferential offer announcements","** Trained on Indian data, can make mistakes"],userInputLabel:"This is an AI tool. Double Check",debug:!1,distilledModel:"analysis_reasoning",announcementHeaders:[{text:"Sentiment",value:"sentiment"}],announcements:[],insiderTrades:[],candles:[],snackbar:{show:!1,message:"",timeout:3e3,color:"orange"}}},watch:{async loggedInGoogle(e){},async userGoogle(e){e&&e.email&&(this.stocks.length===0&&await this.getStocks(),await this.getUserStockPortfolio())}},computed:{...qe(["loggedInGoogle","userGoogle"]),dateRangeText(){return`${this.fromDate} to ${this.toDate}`}},methods:{async getAnnouncements(){try{const e=await this.$apollo.query({query:Ke,variables:{fromDate:this.fromDate.toISOString().split("T")[0],toDate:this.toDate.toISOString().split("T")[0],fromDateTime:this.fromDate.toISOString(),toDateTime:this.toDate.toISOString(),email:this.userGoogle.email},fetchPolicy:"no-cache"}),t=this.extractArraysFromResponse(e);this.announcements=t.announcements,this.insiderTrades=t.insiderTrades,this.candles=t.candles}catch(e){console.error(e)}},extractArraysFromResponse(e){const t=e.data.portfolio_stocks,o=[],d=[],a=[];return t.forEach(r=>{const l=r.stock,u=l.company_name;l.stock_announcements.forEach(n=>{o.push({company_name:u,announcement_date:n.announcement_date,announcement_text_summary:n.announcement_text_summary,announcement_impact:n.announcement_impact,announcement_document_link:n.announcement_document_link,announcement_sentiment:Ot[n.announcement_sentiment]})}),l.insider_trades.forEach(n=>{d.push({company_name:u,intimation_date:n.intimation_date,name_of_insider:n.name_of_insider,number_of_securities_transacted:n.number_of_securities_transacted,number_of_securities_after_transaction:n.number_of_securities_after_transaction,number_of_securities_before_transaction:n.number_of_securities_before_transaction,type_of_security:Pt[n.type_of_security],shareholding_before_transaction:n.shareholding_before_transaction,shareholding_after_transaction:n.shareholding_after_transaction,mode_of_transaction:Vt[n.mode_of_transaction],transaction_type:Ct[n.transaction_type],category_of_insider:pt[n.category_of_insider]})}),l.stock_price_dailies.forEach(n=>{n.open!==void 0&&a.push({company_name:u,open:n.open,high:n.high,low:n.low,volume:n.volume,price_date:n.price_date})})}),{announcements:o,insiderTrades:d,candles:a}},customFilter(e,t){const o=e.toLowerCase();return t.toLowerCase().split(/\s+/).every(r=>o.includes(r))},formatDate(e){return e.toISOString().substr(0,10)},handlePeriodChange(){switch(this.selectedPeriod){case"today":this.fromDate=new Date,this.toDate=new Date,this.showCustomDatePicker=!1;break;case"yesterday":const e=new Date;e.setDate(e.getDate()-1),this.fromDate=e,this.toDate=e,console.log("Yday",this.fromDate,this.toDate),this.showCustomDatePicker=!1;break;case"last7":this.toDate=new Date;const t=new Date;t.setDate(t.getDate()-6),this.fromDate=t,this.showCustomDatePicker=!1;break;case"last15":this.toDate=new Date;const o=new Date;o.setDate(o.getDate()-14),this.fromDate=o,this.showCustomDatePicker=!1;break;case"custom":this.fromDate=new Date,this.toDate=new Date,this.showCustomDatePicker=!0;break}},async updateWatchList(){const e=new Set(this.portfolio.map(a=>a.id)),t=new Set(this.selectedStocks.map(a=>a.id)),o=this.selectedStocks.filter(a=>!e.has(a.id)),d=this.portfolio.filter(a=>!t.has(a.id));for(const[a,r]of o.entries())try{const l=await this.$apollo.query({query:ze,variables:{object:{stock_id:r.id,user:{data:{email:this.userGoogle.email,google_id:this.userGoogle.uid},on_conflict:{constraint:"users_email_key",update_columns:["email"]}}}},fetchPolicy:"no-cache"})}catch(l){console.error(l)}for(const[a,r]of d.entries())try{const l=await this.$apollo.query({query:Je,variables:{stock_id:r.id,email:this.userGoogle.email},fetchPolicy:"no-cache"})}catch(l){console.error(l)}this.snackbar.show=!0,this.snackbar.message="Watch List updated"},async getUserStockPortfolio(){if(this.userGoogle.email)try{const e=await this.$apollo.query({query:Ze,variables:{email:this.userGoogle.email}});this.selectedStocks=e.data.portfolio_stocks.map(t=>({id:t.stock.id,company_name:t.stock.company_name})),this.portfolio=this.selectedStocks}catch(e){console.error(e)}},async getStocks(){try{let e=await this.$apollo.query({query:Qe,variables:{},fetchPolicy:"no-cache"});this.stocks=e.data.stock}catch(e){console.error(e)}},handleSearch(e){this.searchText=e},handleStockSelection(e){},scrollToBottom(){const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)}},async mounted(){const e=new Date;e.setDate(e.getDate()-1),this.fromDate=e,this.toDate=e,this.stocks.length==0&&this.userGoogle&&await this.getStocks()}};function Ft(e,t,o,d,a,r){const l=ge,u=pe("stock-watch-list");return j(),K(Xe,null,{default:f(()=>[s(at,{fluid:"",class:"fill-height pa-0"},{default:f(()=>[s(ee,{"no-gutters":"",class:"fill-height"},{default:f(()=>[s(G,{cols:"12"},{default:f(()=>[e.loggedInGoogle===!0?(j(),K(q,{key:0},{default:f(()=>[g("Welcome "+H(e.userGoogle.displayName),1)]),_:1})):ie("",!0),s(ye,null,{default:f(()=>[s(ae,{class:"subtitle-wrap"},{default:f(()=>t[7]||(t[7]=[g("We are NOT registered with SEBI. We do not execute any trades, or take any deposits.")])),_:1}),s(ae,{class:"subtitle-wrap"},{default:f(()=>t[8]||(t[8]=[g("No Investment advice. Only providing DIY query tools.")])),_:1}),s(l),s(q,null,{default:f(()=>[s(w,{onClick:r.updateWatchList,color:"primary"},{default:f(()=>t[9]||(t[9]=[g("Update Watch List")])),_:1},8,["onClick"]),s(ut,{modelValue:a.selectedStocks,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.selectedStocks=n),r.handleStockSelection],items:a.stocks,"item-title":"company_name","custom-filter":r.customFilter,"item-value":"id",label:"Select Stocks "+(a.selectedStocks.length?`(${a.selectedStocks.length} selected)`:""),multiple:"",chips:"","closable-chips":"","persistent-hint":"",search:a.searchText,"onUpdate:search":r.handleSearch,"return-object":""},{chip:f(({props:n,item:i})=>[s($e,C(n,{text:i.raw.company_name,variant:"elevated"}),{default:f(()=>[s(et,{start:""},{default:f(()=>t[10]||(t[10]=[g("$mdiChartLine")])),_:1}),g(" "+H(i.raw.company_name),1)]),_:2},1040,["text"])]),_:1},8,["modelValue","items","custom-filter","label","onUpdate:modelValue","search","onUpdate:search"])]),_:1}),s(q,null,{default:f(()=>[s(ee,null,{default:f(()=>[s(G,{cols:"12",sm:"4"},{default:f(()=>[s(tt,{modelValue:a.selectedPeriod,"onUpdate:modelValue":[t[1]||(t[1]=n=>a.selectedPeriod=n),r.handlePeriodChange],items:a.dateRangePeriods,"item-title":"text","item-value":"value",label:"Select Period"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),a.showCustomDatePicker?(j(),K(G,{key:0,cols:"12",sm:"8"},{default:f(()=>[s(ee,null,{default:f(()=>[s(G,{cols:"12",sm:"6"},{default:f(()=>[s(ke,{"show-adjacent-months":"",modelValue:a.fromDate,"onUpdate:modelValue":t[2]||(t[2]=n=>a.fromDate=n)},null,8,["modelValue"])]),_:1}),s(G,{cols:"12",sm:"6"},{default:f(()=>[s(ke,{"show-adjacent-months":"",modelValue:a.toDate,"onUpdate:modelValue":t[3]||(t[3]=n=>a.toDate=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):ie("",!0)]),_:1}),s(w,{onClick:r.getAnnouncements,color:"primary"},{default:f(()=>t[11]||(t[11]=[g("Fetch Announcements")])),_:1},8,["onClick"]),s(u,{announcements:a.announcements,insiderTrades:a.insiderTrades,candles:a.candles},null,8,["announcements","insiderTrades","candles"])]),_:1})]),_:1})]),_:1})]),_:1}),s(le,{modelValue:a.showError,"onUpdate:modelValue":t[5]||(t[5]=n=>a.showError=n),color:"error",timeout:"3000"},{action:f(({attrs:n})=>[s(w,C({text:""},n,{onClick:t[4]||(t[4]=i=>a.showError=!1)}),{default:f(()=>t[12]||(t[12]=[g(" Close ")])),_:2},1040)]),default:f(()=>[g(H(a.errorMessage)+" ",1)]),_:1},8,["modelValue"]),s(le,{modelValue:a.snackbar.show,"onUpdate:modelValue":t[6]||(t[6]=n=>a.snackbar.show=n),timeout:a.snackbar.timeout,color:a.snackbar.color},{default:f(()=>[g(H(a.snackbar.message),1)]),_:1},8,["modelValue","timeout","color"])]),_:1})]),_:1})}const Qt=se(jt,[["render",Ft],["__scopeId","data-v-cc9261cf"]]);export{Qt as default};
//# sourceMappingURL=Stocks-BuBSwees.js.map
