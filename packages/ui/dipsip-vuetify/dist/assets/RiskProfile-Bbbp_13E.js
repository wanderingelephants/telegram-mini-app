import{_ as W,ai as H,w as U,y as C,z as K,A as X,C as z,x as E,aa as J,aj as Z,E as Q,ak as ee,al as te,am as ae,i as se,j as oe,an as ie,ao as re}from"./index-Bo7_YAFq.js";import{_ as ne,N as p,S,O as w,c as g,d as M,P as o,m as n,Q as A,V as u,R as c,U as R,F as P,$ as le}from"./vue-GY1gnyCa.js";import"./vuetify-Jj1zsdul.js";import"./apexcharts-D4WdCuSv.js";const ce={name:"RiskRadarChart",components:{apexcharts:H},props:{categoryScores:{type:Array,required:!0,default:()=>[]}},data(){return{componentKey:0}},computed:{series(){return[{name:"Category Score",data:this.categoryScores.map(l=>l.score)}]},chartOptions(){return{chart:{type:"radar",toolbar:{show:!1},fontFamily:"inherit"},xaxis:{categories:this.categoryScores.map(l=>l.category),labels:{style:{fontSize:"12px"}}},yaxis:{show:!0,min:0,max:100,labels:{formatter:l=>`${Math.round(l)}%`}},fill:{opacity:.6,colors:["#FFA000"]},stroke:{width:2,colors:["#FFA000"]},markers:{size:4,colors:["#FFA000"],hover:{size:6}},tooltip:{y:{formatter:l=>`${Math.round(l)}%`}},theme:{palette:"palette1"},plotOptions:{radar:{polygons:{strokeColors:"#e9e9e9",fill:{colors:["#f8f8f8","#fff"]}}}}}}},watch:{categoryScores:{handler(l){console.log("categoryScores changed:",l),this.$nextTick(()=>{this.$refs.chartRef&&(this.$refs.chartRef.updateOptions(this.chartOptions),this.$refs.chartRef.updateSeries(this.series))})},deep:!0},series:{handler(l){console.log("series changed:",l)},deep:!0},chartOptions:{handler(l){console.log("options changed:",l)},deep:!0}},mounted(){this.$nextTick(()=>{console.log("Mounting chart..."),this.$refs.chartRef&&console.log("Chart ref found")})},beforeUnmount(){this.chart&&this.chart.destroy()},errorCaptured(l,q,k){return console.error("Chart Error:",l),console.error("Component:",q),console.error("Info:",k),!1}},ue={class:"risk-radar-chart"};function de(l,q,k,f,y,_){const r=ne("apexcharts");return p(),S("div",ue,[(p(),w(r,{id:"risk-radar",ref:"chartRef",key:y.componentKey,width:"100%",height:"600",type:"radar",options:_.chartOptions,series:_.series},null,8,["options","series"]))])}const he=W(ce,[["render",de],["__scopeId","data-v-342f994d"]]),pe={class:"mt-2 d-flex flex-column flex-sm-row justify-space-between"},me={class:"text-subtitle-2"},ge={class:"text-subtitle-2"},ve={class:"text-h6 mb-4"},fe={class:"options-container"},_e={class:"pa-3 w-100"},ye={key:0,class:"text-caption text-grey mt-1"},we={class:"mb-6"},xe={class:"mb-6"},ke={class:"text-h6 mb-2"},be={class:"mb-4"},Te={class:"mb-6"},Ce={class:"d-flex justify-space-between align-center w-100"},Ee={class:"text-primary"},Se={__name:"RiskProfile",setup(l,{expose:q}){const k=g(()=>{const s=new Map,a=new Map;return f.forEach(t=>{s.set(t.title,0),a.set(t.title,0)}),Object.entries(r.value).forEach(([t,i])=>{for(const e of f)if(e.questions.find(h=>h.id===t)&&i.risk_score){const h=s.get(e.title)||0,v=a.get(e.title)||0;s.set(e.title,h+i.risk_score/4*100),a.set(e.title,v+1);break}}),Array.from(s.entries()).map(([t,i])=>({category:t,score:a.get(t)?Math.round(i/a.get(t)):0}))}),f=[{id:"demographics",title:"Personal Demographics",questions:[{id:"age_group",text:"Which age group do you belong to?",type:"demographics",user_answer:null,options:[{value:"18_25",text:"18-25 years",weight:4,risk_score:4,note:"Longer investment horizon allows for higher risk capacity"},{value:"26_35",text:"26-35 years",weight:4,risk_score:4,note:"Prime earning years with good risk capacity"},{value:"36_45",text:"36-45 years",weight:3,risk_score:3,note:"Balanced approach recommended"},{value:"46_55",text:"46-55 years",weight:2,risk_score:2,note:"Consider reducing high-risk exposures"},{value:"56_65",text:"56-65 years",weight:1,risk_score:1,note:"Focus on capital preservation"},{value:"above_65",text:"Above 65 years",weight:1,risk_score:1,note:"Conservative approach recommended"}]},{id:"employment_status",text:"What is your current employment status?",type:"demographics",user_answer:null,options:[{value:"salaried",text:"Salaried (Private Sector)",weight:3,income_stability:"stable"},{value:"govt",text:"Government Employee",weight:4,income_stability:"very_stable"},{value:"business",text:"Self-Employed/Business Owner",weight:2,income_stability:"variable"},{value:"professional",text:"Independent Professional (Doctor/CA/Lawyer etc.)",weight:3,income_stability:"stable"},{value:"retired",text:"Retired",weight:1,income_stability:"fixed"},{value:"other",text:"Other/Not Currently Employed",weight:1,income_stability:"uncertain"}]},{id:"income_source",text:"How would you describe your income stream?",type:"demographics",user_answer:null,options:[{value:"very_stable",text:"Very stable with regular increments",weight:4,risk_score:4},{value:"stable",text:"Stable but limited growth",weight:3,risk_score:3},{value:"variable",text:"Variable but predictable",weight:2,risk_score:2},{value:"uncertain",text:"Highly variable/uncertain",weight:1,risk_score:1}]}]},{id:"financial_health",title:"Financial Health Assessment",questions:[{id:"monthly_savings",text:"What percentage of your monthly income do you save/invest?",type:"savings_capacity",user_answer:null,options:[{value:1,text:"Less than 10%",weight:1,risk_score:1},{value:2,text:"10% to 20%",weight:2,risk_score:2},{value:3,text:"20% to 30%",weight:3,risk_score:3},{value:4,text:"More than 30%",weight:4,risk_score:4}]},{id:"emergency_fund",text:"Do you have an emergency fund covering your expenses?",type:"financial_security",user_answer:null,options:[{value:1,text:"No emergency fund",weight:0,risk_score:1},{value:2,text:"1-3 months of expenses",weight:2,risk_score:2},{value:3,text:"3-6 months of expenses",weight:3,risk_score:3},{value:4,text:"More than 6 months of expenses",weight:4,risk_score:4}]},{id:"debt_obligations",text:"What percentage of your monthly income goes towards EMIs/debt payments?",type:"financial_security",user_answer:null,options:[{value:1,text:"More than 50%",weight:1,risk_score:1},{value:2,text:"30% to 50%",weight:2,risk_score:2},{value:3,text:"10% to 30%",weight:3,risk_score:3},{value:4,text:"Less than 10%",weight:4,risk_score:4}]}]},{id:"market_understanding",title:"Market Understanding",questions:[{id:"market_experience",text:"How long have you been investing in stock markets?",type:"experience",user_answer:null,options:[{value:1,text:"Never invested before",weight:1,risk_score:1},{value:2,text:"Less than 2 years",weight:2,risk_score:2},{value:3,text:"2-5 years",weight:3,risk_score:3},{value:4,text:"More than 5 years",weight:4,risk_score:4}]},{id:"volatility_understanding",text:"How well do you understand market volatility and its impact on different sized companies?",type:"experience",user_answer:null,options:[{value:1,text:"Limited understanding",weight:1,risk_score:1},{value:2,text:"Basic understanding of large companies",weight:2,risk_score:2},{value:3,text:"Good understanding of market dynamics",weight:3,risk_score:3},{value:4,text:"Deep understanding of all market segments",weight:4,risk_score:4}]}]},{id:"risk_assessment",title:"Risk Assessment",questions:[{id:"investment_horizon",text:"What is your primary investment time horizon?",type:"time_horizon",user_answer:null,options:[{value:1,text:"Less than 1 year",weight:1,risk_score:1},{value:2,text:"1-3 years",weight:2,risk_score:2},{value:3,text:"3-5 years",weight:3,risk_score:3},{value:4,text:"More than 5 years",weight:4,risk_score:4}]},{id:"loss_tolerance",text:"If your portfolio dropped 20% in a month, what would you do?",type:"risk_tolerance",user_answer:null,options:[{value:1,text:"Sell everything immediately",weight:1,risk_score:1},{value:2,text:"Sell some investments",weight:2,risk_score:2},{value:3,text:"Hold and wait for recovery",weight:3,risk_score:3},{value:4,text:"Buy more at lower prices",weight:4,risk_score:4}]}]}],y=M(0),_=M(0),r=M({}),F=M(!1),N=g(()=>f[y.value]),I=g(()=>N.value.questions[_.value]),V=g(()=>{let s=1;for(let a=0;a<y.value;a++)s+=f[a].questions.length;return s+_.value}),L=g(()=>f.reduce((s,a)=>s+a.questions.length,0)),G=g(()=>(V.value-1)/L.value*100),B=g(()=>{let s=0,a=0;return Object.values(r.value).forEach(t=>{t.risk_score&&(s+=t.risk_score,a++)}),a?s/(a*4)*100:0}),x=g(()=>{const s=B.value;return s<25?{title:"Conservative",description:"You prefer stability and capital preservation. Focus on low-volatility investments with steady returns."}:s<50?{title:"Moderate",description:"You seek a balance between growth and stability, comfortable with moderate market fluctuations."}:s<75?{title:"Growth",description:"You prioritize long-term growth and can tolerate significant market volatility."}:{title:"Aggressive",description:"You seek maximum growth potential and are comfortable with high market volatility."}});g(()=>{var d,h,v;const s=((d=r.value.age_group)==null?void 0:d.value)||"",a=((h=r.value.employment_status)==null?void 0:h.value)||"",t=((v=r.value.income_source)==null?void 0:v.value)||"";let i=B.value;s.startsWith("18")||s.startsWith("26")?i*=1.2:(s.startsWith("56")||s.startsWith("above"))&&(i*=.8),a==="govt"?i*=1.2:(a==="retired"||a==="other")&&(i*=.8),t==="very_stable"?i*=1.1:t==="uncertain"&&(i*=.8);const e=Math.min(i,100);return e<25?{title:"Conservative",description:"Based on your age, employment status, and other factors, a conservative approach is recommended. Focus on capital preservation with stable, low-volatility investments."}:e<50?{title:"Moderate",description:"Your profile suggests a balanced approach. While you have some risk capacity, maintaining stability is important given your circumstances."}:e<75?{title:"Growth",description:"Your age and income stability support a growth-oriented approach. You can consider a good mix of different market caps while maintaining some safety."}:{title:"Aggressive",description:"Your young age and stable income support an aggressive growth approach. You can consider higher exposure to mid and small caps."}});const Y=g(()=>{var h,v,b;const s=x.value.title;(h=r.value.age_group)!=null&&h.value;const a=((v=r.value.cap_volatility)==null?void 0:v.cap_preference)||"mixed",t=((b=r.value.alternative_assets)==null?void 0:b.value)||"none";let e={Conservative:{equityTotal:40,alternativesTotal:30,debtTotal:30,largeCap:35,midCap:5,smallCap:0},Moderate:{equityTotal:60,alternativesTotal:20,debtTotal:20,largeCap:40,midCap:15,smallCap:5},Growth:{equityTotal:75,alternativesTotal:15,debtTotal:10,largeCap:40,midCap:25,smallCap:10},Aggressive:{equityTotal:85,alternativesTotal:10,debtTotal:5,largeCap:35,midCap:30,smallCap:20}}[s],d={};if(e.equityTotal>0){let m={};switch(a){case"large":m={"Large Cap Equity":{percentage:e.equityTotal*.8,etfs:[{name:"Nifty 50 ETF",code:"NIFTYBEES",weight:e.equityTotal*.5},{name:"Nifty Next 50 ETF",code:"NIFTYNXT50",weight:e.equityTotal*.3}]},"Mid Cap Equity":{percentage:e.equityTotal*.2,etfs:[{name:"Nifty Midcap 150 ETF",code:"MIDCAPETF",weight:e.equityTotal*.2}]}};break;case"mid":m={"Mid Cap Equity":{percentage:e.equityTotal*.6,etfs:[{name:"Nifty Midcap 150 ETF",code:"MIDCAPETF",weight:e.equityTotal*.6}]},"Large Cap Equity":{percentage:e.equityTotal*.4,etfs:[{name:"Nifty 50 ETF",code:"NIFTYBEES",weight:e.equityTotal*.4}]}};break;case"small":m={"Small Cap Equity":{percentage:e.equityTotal*.5,etfs:[{name:"Nifty Smallcap 250 ETF",code:"SMALLCAP",weight:e.equityTotal*.5}]},"Mid Cap Equity":{percentage:e.equityTotal*.3,etfs:[{name:"Nifty Midcap 150 ETF",code:"MIDCAPETF",weight:e.equityTotal*.3}]},"Large Cap Equity":{percentage:e.equityTotal*.2,etfs:[{name:"Nifty 50 ETF",code:"NIFTYBEES",weight:e.equityTotal*.2}]}};break;default:m={"Large Cap Equity":{percentage:e.largeCap,etfs:[{name:"Nifty 50 ETF",code:"NIFTYBEES",weight:e.largeCap}]},"Mid Cap Equity":{percentage:e.midCap,etfs:[{name:"Nifty Midcap 150 ETF",code:"MIDCAPETF",weight:e.midCap}]},"Small Cap Equity":{percentage:e.smallCap,etfs:[{name:"Nifty Smallcap 250 ETF",code:"SMALLCAP",weight:e.smallCap}]}}}d={...d,...m}}if(e.alternativesTotal>0)switch(t){case"gold":d["Precious Metals"]={percentage:e.alternativesTotal,etfs:[{name:"Gold BeES",code:"GOLDBEES",weight:e.alternativesTotal*.7},{name:"Silver ETF",code:"SILVERBEES",weight:e.alternativesTotal*.3}]};break;case"real_estate":d["Real Estate"]={percentage:e.alternativesTotal,etfs:[{name:"Nexus REIT",code:"NXST-RR",weight:e.alternativesTotal}]};break;case"infra":d.Infrastructure={percentage:e.alternativesTotal,etfs:[{name:"PowerGrid InvIT",code:"PGINVIT-IV",weight:e.alternativesTotal}]};break;case"none":const m=e.alternativesTotal/2;e.equityTotal+=m,e.debtTotal+=m;break}return e.debtTotal>0&&(d.Debt={percentage:e.debtTotal,etfs:[{name:"Liquid BeES",code:"LIQUIDBEES",weight:e.debtTotal}]}),d});g(()=>{var e,d,h,v,b,m;const s=[];let a=0,t=0;f.forEach(D=>{D.questions.forEach(O=>{const T=r.value[O.id];T&&(s.push({section:D.title,question:O.text,answer:T.text,risk_score:T.risk_score||null}),T.risk_score&&(a+=T.risk_score,t++))})});const i=t>0?a/(t*4)*100:0;return{user_responses:s,risk_profile:{score:i,category:x.value.title,description:x.value.description},category_scores:k.value,demographics:{age_group:((e=r.value.age_group)==null?void 0:e.text)||null,employment:((d=r.value.employment_status)==null?void 0:d.text)||null,income_stability:((h=r.value.income_source)==null?void 0:h.text)||null},financial_health:{monthly_savings:((v=r.value.monthly_savings)==null?void 0:v.text)||null,emergency_fund:((b=r.value.emergency_fund)==null?void 0:b.text)||null,debt_obligations:((m=r.value.debt_obligations)==null?void 0:m.text)||null}}});const j=s=>{r.value={...r.value,[I.value.id]:s};const a=I.value.id;f.forEach(t=>{t.questions.forEach(i=>{i.id===a&&(i.user_answer=s)})}),_.value<N.value.questions.length-1?_.value++:y.value<f.length-1?(y.value++,_.value=0):F.value=!0},$=()=>{y.value=0,_.value=0,r.value={},F.value=!1};return q({resetQuiz:$,answers:r,riskProfile:x,recommendedAllocation:Y}),(s,a)=>(p(),w(U,{fluid:""},{default:o(()=>[n(E,{justify:"center"},{default:o(()=>[n(C,{cols:"12",sm:"12",md:"10",lg:"8",xl:"6"},{default:o(()=>[n(K,{class:"elevation-2"},{default:o(()=>[n(X,{class:"text-h5 text-sm-h4 py-4"},{default:o(()=>[A(u(F.value?"Your Investment Profile & Recommendations":"Investment Profile Assessment"),1)]),_:1}),F.value?(p(),w(z,{key:1},{default:o(()=>[n(E,null,{default:o(()=>[n(C,{cols:"12"},{default:o(()=>[c("div",we,[c("div",xe,[c("h3",ke,"Risk Profile: "+u(x.value.title),1),c("p",be,u(x.value.description),1),n(he,{"category-scores":k.value,class:"mt-4"},null,8,["category-scores"])])]),c("div",Te,[a[0]||(a[0]=c("h3",{class:"text-h6 mb-4"},"Recommended ETF Allocation:",-1)),n(Z,null,{default:o(()=>[(p(!0),S(P,null,R(Y.value,(t,i)=>(p(),w(ee,{key:i},{default:o(()=>[n(te,null,{default:o(()=>[c("div",Ce,[c("span",null,u(i),1),c("span",Ee,u(t.percentage)+"%",1)])]),_:2},1024),n(ae,null,{default:o(()=>[n(se,null,{default:o(()=>[(p(!0),S(P,null,R(t.etfs,e=>(p(),w(oe,{key:e.code},{default:o(()=>[n(ie,null,{default:o(()=>[A(u(e.name),1)]),_:2},1024),n(re,null,{default:o(()=>[A(u(e.code)+" - "+u(e.weight)+"% ",1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),n(E,{class:"mt-6"},{default:o(()=>[n(C,{cols:"12",sm:"8",md:"6",class:"mx-auto"},{default:o(()=>[n(Q,{block:"",color:"primary",onClick:$},{default:o(()=>a[1]||(a[1]=[A(" Retake Assessment ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(p(),w(z,{key:0},{default:o(()=>[n(E,{class:"mb-6"},{default:o(()=>[n(C,{cols:"12"},{default:o(()=>[n(J,{"model-value":G.value,height:"20",color:"primary",rounded:""},{default:o(({value:t})=>[c("strong",null,u(Math.ceil(t))+"%",1)]),_:1},8,["model-value"]),c("div",pe,[c("span",me,"Section: "+u(N.value.title),1),c("span",ge,"Question "+u(V.value)+" of "+u(L.value),1)])]),_:1})]),_:1}),n(E,null,{default:o(()=>[n(C,{cols:"12"},{default:o(()=>[c("h3",ve,u(I.value.text),1),c("div",fe,[(p(!0),S(P,null,R(I.value.options,t=>(p(),w(Q,{key:t.value,variant:"outlined",class:"option-button mb-3 text-start",block:"",height:"auto","min-height":"48",onClick:i=>j(t)},{default:o(()=>[c("div",_e,[c("div",null,u(t.text),1),t.note?(p(),S("div",ye,u(t.note),1)):le("",!0)])]),_:2},1032,["onClick"]))),128))])]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}},Ae=W(Se,[["__scopeId","data-v-210d67fa"]]);export{Ae as default};
//# sourceMappingURL=RiskProfile-Bbbp_13E.js.map
