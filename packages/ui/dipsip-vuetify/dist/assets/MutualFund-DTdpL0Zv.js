import{m as Pe,a as Re,b as Ee,c as Be,u as Ne,d as Oe,e as Ue,f as We,g as Ge,V as ne,h as Ke,i as He,j as ue,k as ze,l as Ye,n as qe,o as K,p as $,q as je,r as Qe,_ as Xe,a0 as fe,P as Je,s as Ze,v as se,I as $e,x as el,y as oe,C as X,z as ll,A as J,B as re,F as ie,H as tl,w as al}from"./index-Bqhguatb.js";import{p as nl,a0 as ul,g as sl,W as ol,B as Z,O as rl,f as il,av as cl,aI as dl,G as vl,aw as fl,$ as ce}from"./vuetify-DFyGEC3H.js";import{d as U,s as L,a as F,w as W,A as de,m as a,F as R,n as x,Q as V,O as G,P as i,N as M,V as P,_ as ve,R as ml,S as pl,U as hl,$ as gl}from"./vue-CltRCLGX.js";import"./apexcharts-BF8gMu54.js";function yl(e,t,n){if(t==null)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return typeof t=="number"&&~t?a(R,null,[a("span",{class:"v-autocomplete__unmask"},[e.substr(0,t)]),a("span",{class:"v-autocomplete__mask"},[e.substr(t,n)]),a("span",{class:"v-autocomplete__unmask"},[e.substr(t+n)])]):e}const Vl=nl({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Pe({filterKeys:["title"]}),...Re(),...ul(Ee({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Be({transition:!1})},"VAutocomplete"),bl=sl()({name:"VAutocomplete",props:Vl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:C}=ol(),s=U(),h=L(!1),k=L(!0),A=L(!1),g=U(),_=U(),H=Z(e,"menu"),f=F({get:()=>H.value,set:l=>{var u;H.value&&!l&&((u=g.value)!=null&&u.ΨopenChildren.size)||(H.value=l)}}),v=L(-1),me=F(()=>{var l;return(l=s.value)==null?void 0:l.color}),ee=F(()=>f.value?e.closeText:e.openText),{items:le,transformIn:pe,transformOut:he}=Ne(e),{textColorClasses:ge,textColorStyles:ye}=Oe(me),m=Z(e,"search",""),r=Z(e,"modelValue",[],l=>pe(l===null?[null]:vl(l)),l=>{const u=he(l);return e.multiple?u:u[0]??null}),Ve=F(()=>typeof e.counterValue=="function"?e.counterValue(r.value):typeof e.counterValue=="number"?e.counterValue:r.value.length),E=Ue(e),{filteredItems:z,getMatches:be}=We(e,le,()=>k.value?"":m.value),S=F(()=>e.hideSelected?z.value.filter(l=>!r.value.some(u=>u.value===l.value)):z.value),B=F(()=>!!(e.chips||n.chip)),D=F(()=>B.value||!!n.selection),we=F(()=>r.value.map(l=>l.props.value)),Y=F(()=>{var u;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&m.value===((u=S.value[0])==null?void 0:u.title))&&S.value.length>0&&!k.value&&!A.value}),q=F(()=>e.hideNoData&&!S.value.length||E.isReadonly.value||E.isDisabled.value),j=U(),Ce=Ge(j,s);function ke(l){e.openOnClear&&(f.value=!0),m.value=""}function Fe(){q.value||(f.value=!0)}function Se(l){q.value||(h.value&&(l.preventDefault(),l.stopPropagation()),f.value=!f.value)}function xe(l){var u;fl(l)&&((u=s.value)==null||u.focus())}function _e(l){var o,c,b;if(E.isReadonly.value)return;const u=s.value.selectionStart,d=r.value.length;if((v.value>-1||["Enter","ArrowDown","ArrowUp"].includes(l.key))&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(f.value=!0),["Escape"].includes(l.key)&&(f.value=!1),Y.value&&["Enter","Tab"].includes(l.key)&&!r.value.some(p=>{let{value:y}=p;return y===S.value[0].value})&&I(S.value[0]),l.key==="ArrowDown"&&Y.value&&((o=j.value)==null||o.focus("next")),["Backspace","Delete"].includes(l.key)){if(!e.multiple&&D.value&&r.value.length>0&&!m.value)return I(r.value[0],!1);if(~v.value){const p=v.value;I(r.value[v.value],!1),v.value=p>=d-1?d-2:p}else l.key==="Backspace"&&!m.value&&(v.value=d-1)}if(e.multiple){if(l.key==="ArrowLeft"){if(v.value<0&&u>0)return;const p=v.value>-1?v.value-1:d-1;r.value[p]?v.value=p:(v.value=-1,s.value.setSelectionRange((c=m.value)==null?void 0:c.length,(b=m.value)==null?void 0:b.length))}if(l.key==="ArrowRight"){if(v.value<0)return;const p=v.value+1;r.value[p]?v.value=p:(v.value=-1,s.value.setSelectionRange(0,0))}}}function Ie(l){if(ce(s.value,":autofill")||ce(s.value,":-webkit-autofill")){const u=le.value.find(d=>d.title===l.target.value);u&&I(u)}}function Te(){var l;e.eager&&((l=_.value)==null||l.calculateVisibleItems())}function Ae(){var l;h.value&&(k.value=!0,(l=s.value)==null||l.focus())}function De(l){h.value=!0,setTimeout(()=>{A.value=!0})}function Le(l){A.value=!1}function Me(l){(l==null||l===""&&!e.multiple&&!D.value)&&(r.value=[])}const Q=L(!1);function I(l){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!l||l.props.disabled))if(e.multiple){const d=r.value.findIndex(c=>e.valueComparator(c.value,l.value)),o=u??!~d;if(~d){const c=o?[...r.value,l]:[...r.value];c.splice(d,1),r.value=c}else o&&(r.value=[...r.value,l]);e.clearOnSelect&&(m.value="")}else{const d=u!==!1;r.value=d?[l]:[],m.value=d&&!D.value?l.title:"",de(()=>{f.value=!1,k.value=!0})}}return W(h,(l,u)=>{var d;l!==u&&(l?(Q.value=!0,m.value=e.multiple||D.value?"":String(((d=r.value.at(-1))==null?void 0:d.props.title)??""),k.value=!0,de(()=>Q.value=!1)):(!e.multiple&&m.value==null&&(r.value=[]),f.value=!1,r.value.some(o=>{let{title:c}=o;return c===m.value})||(m.value=""),v.value=-1))}),W(m,l=>{!h.value||Q.value||(l&&(f.value=!0),k.value=!l)}),W(f,()=>{if(!e.hideSelected&&f.value&&r.value.length){const l=S.value.findIndex(u=>r.value.some(d=>u.value===d.value));rl&&window.requestAnimationFrame(()=>{var u;l>=0&&((u=_.value)==null||u.scrollToIndex(l))})}}),W(()=>e.items,(l,u)=>{f.value||h.value&&!u.length&&l.length&&(f.value=!0)}),il(()=>{const l=!!(!e.hideNoData||S.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),u=r.value.length>0,d=ne.filterProps(e);return a(ne,x({ref:s},d,{modelValue:m.value,"onUpdate:modelValue":[o=>m.value=o,Me],focused:h.value,"onUpdate:focused":o=>h.value=o,validationValue:r.externalValue,counterValue:Ve.value,dirty:u,onChange:Ie,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":f.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!D.value,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:E.isReadonly.value,placeholder:u?void 0:e.placeholder,"onClick:clear":ke,"onMousedown:control":Fe,onKeydown:_e}),{...n,default:()=>a(R,null,[a(Ke,x({ref:g,modelValue:f.value,"onUpdate:modelValue":o=>f.value=o,activator:"parent",contentClass:"v-autocomplete__content",disabled:q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Te,onAfterLeave:Ae},e.menuProps),{default:()=>[l&&a(He,x({ref:j,selected:we.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault(),onKeydown:xe,onFocusin:De,onFocusout:Le,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Ce,e.listProps),{default:()=>{var o,c,b;return[(o=n["prepend-item"])==null?void 0:o.call(n),!S.value.length&&!e.hideNoData&&(((c=n["no-data"])==null?void 0:c.call(n))??a(ue,{title:C(e.noDataText)},null)),a(ze,{ref:_,renderless:!0,items:S.value},{default:p=>{var ae;let{item:y,index:T,itemRef:w}=p;const te=x(y.props,{ref:w,key:T,active:Y.value&&T===0?!0:void 0,onClick:()=>I(y,null)});return((ae=n.item)==null?void 0:ae.call(n,{item:y,index:T,props:te}))??a(ue,x(te,{role:"option"}),{prepend:N=>{let{isSelected:O}=N;return a(R,null,[e.multiple&&!e.hideSelected?a(Ye,{key:y.value,modelValue:O,ripple:!1,tabindex:"-1"},null):void 0,y.props.prependAvatar&&a(qe,{image:y.props.prependAvatar},null),y.props.prependIcon&&a(K,{icon:y.props.prependIcon},null)])},title:()=>{var N,O;return k.value?y.title:yl(y.title,(N=be(y))==null?void 0:N.title,((O=m.value)==null?void 0:O.length)??0)}})}}),(b=n["append-item"])==null?void 0:b.call(n)]}})]}),r.value.map((o,c)=>{function b(w){w.stopPropagation(),w.preventDefault(),I(o,!1)}const p={"onClick:close":b,onKeydown(w){w.key!=="Enter"&&w.key!==" "||(w.preventDefault(),w.stopPropagation(),b(w))},onMousedown(w){w.preventDefault(),w.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},y=B.value?!!n.chip:!!n.selection,T=y?cl(B.value?n.chip({item:o,index:c,props:p}):n.selection({item:o,index:c})):void 0;if(!(y&&!T))return a("div",{key:o.value,class:["v-autocomplete__selection",c===v.value&&["v-autocomplete__selection--selected",ge.value]],style:c===v.value?ye.value:{}},[B.value?n.chip?a(je,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>[T]}):a($,x({key:"chip",closable:e.closableChips,size:"small",text:o.title,disabled:o.props.disabled},p),null):T??a("span",{class:"v-autocomplete__selection-text"},[o.title,e.multiple&&c<r.value.length-1&&a("span",{class:"v-autocomplete__selection-comma"},[V(",")])])])})]),"append-inner":function(){var p;for(var o=arguments.length,c=new Array(o),b=0;b<o;b++)c[b]=arguments[b];return a(R,null,[(p=n["append-inner"])==null?void 0:p.call(n,...c),e.menuIcon?a(K,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:Se,onClick:dl,"aria-label":C(ee.value),title:C(ee.value),tabindex:"-1"},null):void 0])}})}),Qe({isFocused:h,isPristine:k,menu:f,search:m,filteredItems:z,select:I},s)}}),wl={name:"ChatApp",components:{MutualFundAnalysis:fe,PromptChat:Je},data(){return{messages:[],userInput:"",isLoading:!1,showError:!1,errorMessage:"",fundList:[],selectedFunds:[],portfolio:[],compareData:{},searchText:"",title:"Mutual Fund Helper Agent",subTitles:["Ask what Google/ChatGPT cannot answer. E.g.","Find - किन म्यूचुअल फंडों में रिटर्न 20% से अधिक है, शुल्क 0.5% से कम है","Stock Discovery - Which stocks are present in only 1 small cap fund","Reasoning - Define Churn as stocks bought plus stocks sold in a fund. Which funds had highest churn","** Trained on Indian data, can make mistakes"],userInputLabel:"This is an AI tool. Double Check",debug:!1,distilledModel:"mutual_funds_reasoning",analysisTypes:[{name:"Overlap",color:"primary",icon:"mdi-compare"},{name:"Diversification",color:"success",icon:"mdi-chart-pie"},{name:"Performance",color:"info",icon:"mdi-chart-line"},{name:"Fees",color:"warning",icon:"mdi-alert-circle-outline"}]}},computed:Ze(["loggedInGoogle","userGoogle"]),methods:{customFilter(e,t){const n=e.toLowerCase();return t.toLowerCase().split(/\s+/).every(h=>n.includes(h))},async fetchFundList(){try{const e=await se.get("/api/mutualfunds/list");this.fundList=e.data.map(t=>{let n=t.return_3Y?" (3 Y Returns "+t.return_3Y+" %)":"";for(let C=1;C<=t.star_rating;C++)n+="⭐";return{name:t.name,displayName:t.name+n}})}catch(e){console.error("Error fetching fund list:",e)}},async sendCompare(){try{const e=await se.post("/api/mutualfunds/compare",{fundList:this.selectedFunds});this.compareData=e.data}catch(e){console.error("Error in sendCompare:",e)}},handleSearch(e){this.searchText=e},handleFundSelection(e){this.portfolio.value=e.map(t=>({...this.fundList.find(C=>C.name===t),currentValue:"",investedDate:"",investedAmount:""}))},scrollToBottom(){const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)}},async mounted(){this.fundList.length==0&&await this.fetchFundList()}};function Cl(e,t,n,C,s,h){const k=gl("prompt-chat"),A=fe;return M(),G($e,null,{default:i(()=>[a(al,{fluid:"",class:"fill-height pa-0"},{default:i(()=>[a(el,{"no-gutters":"",class:"fill-height"},{default:i(()=>[a(oe,{cols:"12",md:"6",order:"first","order-md":"first",class:"left-panel"},{default:i(()=>[a(k,{distilledModel:s.distilledModel,title:s.title,subTitles:s.subTitles,userInputLabel:s.userInputLabel,debug:s.debug},null,8,["distilledModel","title","subTitles","userInputLabel","debug"])]),_:1}),a(oe,{cols:"12",md:"6",order:"last","order-md":"last",class:"right-panel"},{default:i(()=>[e.loggedInGoogle===!0?(M(),G(X,{key:0},{default:i(()=>[V("Welcome "+P(e.userGoogle.displayName),1)]),_:1})):ve("",!0),a(ll,null,{default:i(()=>[a(J,null,{default:i(()=>t[4]||(t[4]=[V("We are NOT registered with SEBI.")])),_:1}),a(J,{class:"subtitle-wrap"},{default:i(()=>t[5]||(t[5]=[V("No Investment advice. Only providing DIY query tools.")])),_:1}),a(J,{class:"subtitle-wrap"},{default:i(()=>t[6]||(t[6]=[V("Select 2 or More Funds")])),_:1}),a(re,{class:"subtitle-wrap"},{default:i(()=>t[7]||(t[7]=[V(" Reduce Overlap ")])),_:1}),a(re,{class:"subtitle-wrap"},{default:i(()=>t[8]||(t[8]=[V(" Fee of ETFs can be 10X lower than Mutual Funds. "),ml("a",{href:"/etfList"},"See ETFs",-1)])),_:1}),a(X,{class:"pb-0"},{default:i(()=>[(M(!0),pl(R,null,hl(s.analysisTypes,g=>(M(),G($,{key:g.name,class:"me-2 mb-2",color:g.color,variant:"outlined"},{default:i(()=>[a(K,{start:""},{default:i(()=>[V(P(g.icon),1)]),_:2},1024),V(" "+P(g.name),1)]),_:2},1032,["color"]))),128))]),_:1}),a(X,null,{default:i(()=>[a(ie,{disabled:s.selectedFunds.length<=1,onClick:t[0]||(t[0]=g=>h.sendCompare(s.selectedFunds)),color:"amber"},{default:i(()=>t[9]||(t[9]=[V("Compare")])),_:1},8,["disabled"]),a(bl,{modelValue:s.selectedFunds,"onUpdate:modelValue":[t[1]||(t[1]=g=>s.selectedFunds=g),h.handleFundSelection],items:s.fundList,"item-title":"displayName","custom-filter":h.customFilter,"item-value":"name",label:"Select Mutual Funds "+(s.selectedFunds.length?`(${s.selectedFunds.length} selected)`:""),multiple:"",chips:"","closable-chips":"","persistent-hint":"",hint:"Partial match works while typing e.g. 'Motilal Small'",search:s.searchText,"onUpdate:search":h.handleSearch},{chip:i(({props:g,item:_})=>[a($,x(g,{text:_.raw.name,variant:"elevated"}),{default:i(()=>[a(K,{start:""},{default:i(()=>t[10]||(t[10]=[V("mdi-chart-line")])),_:1}),V(" "+P(_.raw.name),1)]),_:2},1040,["text"])]),_:1},8,["modelValue","items","custom-filter","label","onUpdate:modelValue","search","onUpdate:search"])]),_:1}),s.compareData.overlaps?(M(),G(A,{key:0,analysisReport:s.compareData},null,8,["analysisReport"])):ve("",!0)]),_:1})]),_:1})]),_:1}),a(tl,{modelValue:s.showError,"onUpdate:modelValue":t[3]||(t[3]=g=>s.showError=g),color:"error",timeout:"3000"},{action:i(({attrs:g})=>[a(ie,x({text:""},g,{onClick:t[2]||(t[2]=_=>s.showError=!1)}),{default:i(()=>t[11]||(t[11]=[V(" Close ")])),_:2},1040)]),default:i(()=>[V(P(s.errorMessage)+" ",1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}const _l=Xe(wl,[["render",Cl],["__scopeId","data-v-d0e21c1e"]]);export{_l as default};
//# sourceMappingURL=MutualFund-DTdpL0Zv.js.map
