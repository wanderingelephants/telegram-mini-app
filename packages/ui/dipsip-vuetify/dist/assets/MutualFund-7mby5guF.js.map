{"version":3,"file":"MutualFund-7mby5guF.js","sources":["../../src/views/MutualFund.vue"],"sourcesContent":["<template>\n<v-responsive>\n  <v-container fluid class=\"fill-height pa-0\">\n    <v-row no-gutters class=\"fill-height\">\n      <!--<v-col\n            cols=\"12\"\n            md=\"6\"\n            order=\"first\"\n            order-md=\"first\"\n            class=\"left-panel\"\n          >\n          \n       <prompt-chat :distilledModel=\"distilledModel\" :title=\"title\" :subTitles=\"subTitles\" :userInputLabel=\"userInputLabel\" :debug=\"debug\"></prompt-chat>\n          \n      </v-col> -->\n      <v-col cols=\"12\">\n        <google-sign-in/>\n        <v-card-text v-if=\"loggedInGoogle === true\">Welcome {{userGoogle.displayName}}</v-card-text>\n            <v-card>\n              <v-card-title>We are NOT registered with SEBI.</v-card-title>\n              <v-card-title class=\"subtitle-wrap\">No Investment advice. Only providing DIY query tools.</v-card-title>\n              <v-card-title class=\"subtitle-wrap\">Select 2 or More Funds</v-card-title>\n              <v-card-subtitle class=\"subtitle-wrap\">\n                Reduce Overlap\n              </v-card-subtitle>\n              <v-card-subtitle class=\"subtitle-wrap\">\n                Fee of ETFs can be 10X lower than Mutual Funds. \n                <a href=\"/etfList\">See ETFs</a>\n              </v-card-subtitle>\n              <v-card-text class=\"pb-0\">\n                <v-chip\n                  v-for=\"type in analysisTypes\"\n                  :key=\"type.name\"\n                  class=\"me-2 mb-2\"\n                  :color=\"type.color\"\n                  variant=\"outlined\"\n                >\n                  <v-icon>{{ type.icon }}</v-icon>\n                  {{ type.name }}\n                </v-chip>\n              </v-card-text>\n              <v-card-text>\n                <v-btn :disabled=\"selectedFunds.length <= 1\" @click=\"sendCompare(selectedFunds)\" color=\"amber\">Compare</v-btn>\n              \n                <v-autocomplete\n                  v-model=\"selectedFunds\"\n                  :items=\"fundList\"\n                  item-title=\"displayName\"\n                  :custom-filter=\"customFilter\"\n                  item-value=\"name\"\n                  :label=\"'Select Mutual Funds ' + (selectedFunds.length ? `(${selectedFunds.length} selected)` : '')\"\n                  multiple\n                  chips\n                  closable-chips\n                  persistent-hint\n                  hint=\"Partial match works while typing e.g. 'Motilal Small'\"\n                  @update:model-value=\"handleFundSelection\"\n                  :search=\"searchText\"\n                  @update:search=\"handleSearch\"\n                >\n                  <template v-slot:chip=\"{ props, item }\">\n                    <v-chip\n                      v-bind=\"props\"\n                      :text=\"item.raw.name\"\n                      variant=\"elevated\"\n                    >\n                      <v-icon start>$mdiChartLine</v-icon>\n                      {{ item.raw.name }}\n                    </v-chip>\n                  </template>\n                </v-autocomplete>\n                </v-card-text>\n              <mutual-fund-analysis :analysisReport=\"compareData\" v-if=\"compareData.overlaps\"></mutual-fund-analysis>\n            </v-card>\n        </v-col> \n    </v-row>\n\n    <!-- Error Snackbar -->\n    <v-snackbar\n      v-model=\"showError\"\n      color=\"error\"\n      timeout=\"3000\"\n    >\n      {{ errorMessage }}\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn\n          text\n          v-bind=\"attrs\"\n          @click=\"showError = false\"\n        >\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n  </v-container>\n</v-responsive>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nimport GoogleSignIn from '../components/GoogleSignIn'\nimport api from './api'\nimport MutualFundAnalysis from '../components/MutualFundAnalysis.vue'\n//import PromptChat from \"./Assistant.vue\"\n\nexport default {\n  name: 'ChatApp',\n  components: {\n    MutualFundAnalysis, GoogleSignIn\n  },  \n  data() {\n    return {\n      messages: [],\n      userInput: '',\n      isLoading: false,\n      showError: false,\n      errorMessage: '',\n      fundList: [],\n      selectedFunds: [],\n      portfolio: [],\n      compareData: {},\n      searchText: '',\n      title: 'Mutual Fund Helper Agent',\n      subTitles: ['Ask what Google/ChatGPT cannot answer. E.g.', 'Find - किन म्यूचुअल फंडों में रिटर्न 20% से अधिक है, शुल्क 0.5% से कम है', 'Stock Discovery - Which stocks are present in only 1 small cap fund', 'Reasoning - Define Churn as stocks bought plus stocks sold in a fund. Which funds had highest churn', '** Trained on Indian data, can make mistakes'],\n      userInputLabel: \"This is an AI tool. Double Check\",\n      debug: false,\n      distilledModel: \"analysis_reasoning\",\n      analysisTypes: [\n      {\n        name: 'Overlap',\n        color: 'primary',\n        icon: '$mdiCompare'\n      },\n      {\n        name: 'Diversification',\n        color: 'success',\n        icon: '$mdiChartPie'\n      },\n      {\n        name: 'Performance',\n        color: 'info',\n        icon: '$mdiChartLine'\n      },\n      {\n        name: 'Fees',\n        color: 'warning',\n        icon: '$mdiCurrencyRupee'\n      }\n    ]\n    \n    }\n  },\n  computed: mapState([\n    // map this.count to store.state.count\n    \"loggedInGoogle\",\n    \"userGoogle\",\n  ]),\n  methods: {\n    customFilter(item, queryText) {\n      const itemText = item.toLowerCase()\n      const searchText = queryText.toLowerCase()\n      const searchWords = searchText.split(/\\s+/)\n      return searchWords.every(word => itemText.includes(word))\n  },\n    async fetchFundList(){\n      try {\n        const response = await api.get('/api/mutualfunds/list')\n        this.fundList = response.data.map(m => {\n          let returnsLabel = m.return_3Y ? \" (3 Y Returns \" +m.return_3Y + \" %)\" : \"\"\n          for (let i=1; i<=m.star_rating; i++) returnsLabel += \"⭐\";\n          return {\n            \"name\": m.name,\n            \"displayName\": m.name +  returnsLabel\n          }\n        })\n      } catch (error) {\n        console.error('Error fetching fund list:', error)\n      }\n    },\n    \n    async sendCompare(){\n      try {\n        const response = await api.post('/api/mutualfunds/compare', {\n         \"fundList\": this.selectedFunds\n        })\n        this.compareData = response.data\n      \n      } catch (error) {\n        console.error('Error in sendCompare:', error)\n      }\n    },\n    handleSearch(val) {\n      // The search text will be available in 'val'\n      this.searchText = val;\n    },\n    handleFundSelection(value){\n      //this.searchText = \"\"\n      this.portfolio.value = value.map(name => {\n        const fund = this.fundList.find(f => f.name === name)\n        return {\n          ...fund,\n          currentValue: '',\n          investedDate: '',\n          investedAmount: ''\n        }\n      })\n      \n    },\n    \n    scrollToBottom() {\n      const container = this.$refs.messagesContainer;\n      if (container) {\n        container.scrollTop = container.scrollHeight;\n      }\n    }\n  },\n\n  async mounted() {   \n\t  if (this.fundList.length == 0)\n    await this.fetchFundList()\n  }\n}\n</script>\n<style scoped>\n.message-content {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  word-break: break-word;\n  overflow-wrap: break-word;\n  line-height: 1.5;\n  max-width: 100%;\n}\n.subtitle-wrap {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  word-break: break-word;\n  overflow-wrap: break-word;\n}\n.max-width-75 {\n  max-width: 75%;\n}\n\n/* Add these styles if you want to preserve specific formatting */\n.v-list-item-content {\n  width: 100%;\n}\n\n.v-list-item {\n  align-items: flex-start;\n}\n.max-width-75 {\n  max-width: 75%;\n}\n\n.text-wrap {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n/* Custom scrollbar styles */\n.overflow-y-auto {\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\n}\n\n.overflow-y-auto::-webkit-scrollbar {\n  width: 6px;\n}\n\n.overflow-y-auto::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.overflow-y-auto::-webkit-scrollbar-thumb {\n  background-color: rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n}\n.left-panel {\n  height: 100vh;\n  position: sticky;\n  top: 0;\n  overflow-y: auto;\n}\n\n.right-panel {\n  height: 100vh;\n  overflow-y: auto;\n}\n\n@media (max-width: 960px) {\n  .left-panel {\n    height: auto;\n    position: relative;\n  }\n}\n</style>"],"names":["_sfc_main","MutualFundAnalysis","GoogleSignIn","mapState","item","queryText","itemText","word","response","api","m","returnsLabel","error","val","value","name","f","container","_createBlock","_component_v_responsive","_withCtx","_createVNode","_component_v_container","_component_v_row","_component_v_col","_component_google_sign_in","_ctx","_openBlock","_component_v_card_text","_createTextVNode","_toDisplayString","_createCommentVNode","_component_v_card","_component_v_card_title","_cache","_component_v_card_subtitle","_createElementVNode","_createElementBlock","_Fragment","_renderList","$data","type","_component_v_chip","_component_v_icon","_component_v_btn","$event","$options","_component_v_autocomplete","props","_mergeProps","_component_mutual_fund_analysis","_component_v_snackbar","attrs"],"mappings":"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"}